/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,t,r={8446:e=>{"use strict";e.exports={CONTEXT_FILENAME:"credentials-examples-v1.jsonld",CONTEXT_URL_V1:"https://www.w3.org/2018/credentials/examples/v1"}},1288:(e,t,r)=>{"use strict";const n=r(8970);e.exports={"@context":[{"@version":1.1},n.CONTEXT_URL_V1,{ex:"https://example.org/examples#",schema:"http://schema.org/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#","3rdPartyCorrelation":"ex:3rdPartyCorrelation",AllVerifiers:"ex:AllVerifiers",AlumniCredential:"ex:AlumniCredential",Archival:"ex:Archival",BachelorDegree:"ex:BachelorDegree",Child:"ex:Child",CLCredentialDefinition2019:"ex:CLCredentialDefinition2019",CLSignature2019:"ex:CLSignature2019",DisputeCredential:"ex:DisputeCredential",IssuerPolicy:"ex:IssuerPolicy",HolderPolicy:"ex:HolderPolicy",Mother:"ex:Mother",PrescriptionCredential:"ex:PrescriptionCredential",RelationshipCredential:"ex:RelationshipCredential",UniversityDegreeCredential:"ex:UniversityDegreeCredential",ZkpExampleSchema2018:"ex:ZkpExampleSchema2018",alumniOf:{"@id":"schema:alumniOf","@type":"rdf:HTML"},attributes:"ex:attributes",child:{"@id":"ex:child","@type":"@id"},college:"ex:college",currentStatus:"ex:currentStatus",degree:"ex:degree",degreeSchool:"ex:degreeSchool",degreeType:"ex:degreeType",familyName:"schema:familyName",givenName:"schema:givenName",issuerData:"ex:issuerData",name:{"@id":"schema:name","@type":"rdf:HTML"},nonRevocationProof:"ex:nonRevocationProof",parent:{"@id":"ex:parent","@type":"@id"},prescription:"ex:prescription",primaryProof:"ex:primaryProof",referenceId:"ex:referenceId",documentPresence:"ex:documentPresence",evidenceDocument:"ex:evidenceDocument",signature:"ex:signature",signatureCorrectnessProof:"ex:signatureCorrectnessProof",spouse:"schema:spouse",statusReason:"ex:statusReason",subjectPresence:"ex:subjectPresence",verifier:{"@id":"ex:verifier","@type":"@id"}}]}},3118:(e,t,r)=>{"use strict";const n=r(1288),o=r(8446),{CONTEXT_URL_V1:i}=o,a=new Map;a.set(i,n),e.exports={constants:o,contexts:a,CONTEXT_URL_V1:i,CONTEXT_V1:n}},1800:e=>{"use strict";e.exports={CONTEXT_FILENAME:"credentials-v2.jsonld",CONTEXT_URL:"https://www.w3.org/ns/credentials/v2",CBORLD_VALUE:50}},7524:e=>{"use strict";e.exports={"@context":{"@protected":!0,id:"@id",type:"@type",VerifiableCredential:{"@id":"https://www.w3.org/2018/credentials#VerifiableCredential","@context":{"@protected":!0,id:"@id",type:"@type",credentialSchema:{"@id":"https://www.w3.org/2018/credentials#credentialSchema","@type":"@id"},credentialStatus:{"@id":"https://www.w3.org/2018/credentials#credentialStatus","@type":"@id"},credentialSubject:{"@id":"https://www.w3.org/2018/credentials#credentialSubject","@type":"@id"},description:{"@id":"https://schema.org/description","@type":"http://www.w3.org/2001/XMLSchema#string"},evidence:{"@id":"https://www.w3.org/2018/credentials#evidence","@type":"@id"},holder:{"@id":"https://www.w3.org/2018/credentials#holder","@type":"@id"},validFrom:{"@id":"https://www.w3.org/2018/credentials#validFrom","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},validUntil:{"@id":"https://www.w3.org/2018/credentials#validUntil","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},issuer:{"@id":"https://www.w3.org/2018/credentials#issuer","@type":"@id"},name:{"@id":"https://schema.org/description","@type":"http://www.w3.org/2001/XMLSchema#string"},proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},refreshService:{"@id":"https://www.w3.org/2018/credentials#refreshService","@type":"@id"},termsOfUse:{"@id":"https://www.w3.org/2018/credentials#termsOfUse","@type":"@id"}}},VerifiablePresentation:{"@id":"https://www.w3.org/2018/credentials#VerifiablePresentation","@context":{"@protected":!0,id:"@id",type:"@type",holder:{"@id":"https://www.w3.org/2018/credentials#holder","@type":"@id"},termsOfUse:{"@id":"https://www.w3.org/2018/credentials#termsOfUse","@type":"@id"},proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},verifiableCredential:{"@id":"https://www.w3.org/2018/credentials#verifiableCredential","@type":"@id","@container":"@graph"}}},DataIntegrityProof:{"@id":"https://w3id.org/security#DataIntegrityProof","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},cryptosuite:"https://w3id.org/security#cryptosuite",proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},5907:(e,t,r)=>{"use strict";const n=r(7524),o=r(1800),{CONTEXT_URL:i,CBORLD_VALUE:a}=o,s=new Map;s.set(i,n);const c=new Map;c.set(i,a),e.exports={constants:o,contexts:s,appContextMap:c,CONTEXT_URL:i,CONTEXT:n}},7619:e=>{"use strict";e.exports={CONTEXT_FILENAME:"odrl.jsonld",CONTEXT_URL_V1:"https://www.w3.org/ns/odrl.jsonld"}},8033:e=>{"use strict";e.exports={"@context":{odrl:"http://www.w3.org/ns/odrl/2/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",skos:"http://www.w3.org/2004/02/skos/core#",dct:"http://purl.org/dc/terms/",xsd:"http://www.w3.org/2001/XMLSchema#",vcard:"http://www.w3.org/2006/vcard/ns#",foaf:"http://xmlns.com/foaf/0.1/",schema:"http://schema.org/",cc:"http://creativecommons.org/ns#",uid:"@id",type:"@type",Policy:"odrl:Policy",Rule:"odrl:Rule",profile:{"@type":"@id","@id":"odrl:profile"},inheritFrom:{"@type":"@id","@id":"odrl:inheritFrom"},ConflictTerm:"odrl:ConflictTerm",conflict:{"@type":"@vocab","@id":"odrl:conflict"},perm:"odrl:perm",prohibit:"odrl:prohibit",invalid:"odrl:invalid",Agreement:"odrl:Agreement",Assertion:"odrl:Assertion",Offer:"odrl:Offer",Privacy:"odrl:Privacy",Request:"odrl:Request",Set:"odrl:Set",Ticket:"odrl:Ticket",Asset:"odrl:Asset",AssetCollection:"odrl:AssetCollection",relation:{"@type":"@id","@id":"odrl:relation"},hasPolicy:{"@type":"@id","@id":"odrl:hasPolicy"},target:{"@type":"@id","@id":"odrl:target"},output:{"@type":"@id","@id":"odrl:output"},partOf:{"@type":"@id","@id":"odrl:partOf"},source:{"@type":"@id","@id":"odrl:source"},Party:"odrl:Party",PartyCollection:"odrl:PartyCollection",function:{"@type":"@vocab","@id":"odrl:function"},PartyScope:"odrl:PartyScope",assignee:{"@type":"@id","@id":"odrl:assignee"},assigner:{"@type":"@id","@id":"odrl:assigner"},assigneeOf:{"@type":"@id","@id":"odrl:assigneeOf"},assignerOf:{"@type":"@id","@id":"odrl:assignerOf"},attributedParty:{"@type":"@id","@id":"odrl:attributedParty"},attributingParty:{"@type":"@id","@id":"odrl:attributingParty"},compensatedParty:{"@type":"@id","@id":"odrl:compensatedParty"},compensatingParty:{"@type":"@id","@id":"odrl:compensatingParty"},consentingParty:{"@type":"@id","@id":"odrl:consentingParty"},consentedParty:{"@type":"@id","@id":"odrl:consentedParty"},informedParty:{"@type":"@id","@id":"odrl:informedParty"},informingParty:{"@type":"@id","@id":"odrl:informingParty"},trackingParty:{"@type":"@id","@id":"odrl:trackingParty"},trackedParty:{"@type":"@id","@id":"odrl:trackedParty"},contractingParty:{"@type":"@id","@id":"odrl:contractingParty"},contractedParty:{"@type":"@id","@id":"odrl:contractedParty"},Action:"odrl:Action",action:{"@type":"@vocab","@id":"odrl:action"},includedIn:{"@type":"@id","@id":"odrl:includedIn"},implies:{"@type":"@id","@id":"odrl:implies"},Permission:"odrl:Permission",permission:{"@type":"@id","@id":"odrl:permission"},Prohibition:"odrl:Prohibition",prohibition:{"@type":"@id","@id":"odrl:prohibition"},obligation:{"@type":"@id","@id":"odrl:obligation"},use:"odrl:use",grantUse:"odrl:grantUse",aggregate:"odrl:aggregate",annotate:"odrl:annotate",anonymize:"odrl:anonymize",archive:"odrl:archive",concurrentUse:"odrl:concurrentUse",derive:"odrl:derive",digitize:"odrl:digitize",display:"odrl:display",distribute:"odrl:distribute",execute:"odrl:execute",extract:"odrl:extract",give:"odrl:give",index:"odrl:index",install:"odrl:install",modify:"odrl:modify",move:"odrl:move",play:"odrl:play",present:"odrl:present",print:"odrl:print",read:"odrl:read",reproduce:"odrl:reproduce",sell:"odrl:sell",stream:"odrl:stream",textToSpeech:"odrl:textToSpeech",transfer:"odrl:transfer",transform:"odrl:transform",translate:"odrl:translate",Duty:"odrl:Duty",duty:{"@type":"@id","@id":"odrl:duty"},consequence:{"@type":"@id","@id":"odrl:consequence"},remedy:{"@type":"@id","@id":"odrl:remedy"},acceptTracking:"odrl:acceptTracking",attribute:"odrl:attribute",compensate:"odrl:compensate",delete:"odrl:delete",ensureExclusivity:"odrl:ensureExclusivity",include:"odrl:include",inform:"odrl:inform",nextPolicy:"odrl:nextPolicy",obtainConsent:"odrl:obtainConsent",reviewPolicy:"odrl:reviewPolicy",uninstall:"odrl:uninstall",watermark:"odrl:watermark",Constraint:"odrl:Constraint",LogicalConstraint:"odrl:LogicalConstraint",constraint:{"@type":"@id","@id":"odrl:constraint"},refinement:{"@type":"@id","@id":"odrl:refinement"},Operator:"odrl:Operator",operator:{"@type":"@vocab","@id":"odrl:operator"},RightOperand:"odrl:RightOperand",rightOperand:"odrl:rightOperand",rightOperandReference:{"@type":"xsd:anyURI","@id":"odrl:rightOperandReference"},LeftOperand:"odrl:LeftOperand",leftOperand:{"@type":"@vocab","@id":"odrl:leftOperand"},unit:"odrl:unit",dataType:{"@type":"xsd:anyType","@id":"odrl:datatype"},status:"odrl:status",absolutePosition:"odrl:absolutePosition",absoluteSpatialPosition:"odrl:absoluteSpatialPosition",absoluteTemporalPosition:"odrl:absoluteTemporalPosition",absoluteSize:"odrl:absoluteSize",count:"odrl:count",dateTime:"odrl:dateTime",delayPeriod:"odrl:delayPeriod",deliveryChannel:"odrl:deliveryChannel",elapsedTime:"odrl:elapsedTime",event:"odrl:event",fileFormat:"odrl:fileFormat",industry:"odrl:industry:",language:"odrl:language",media:"odrl:media",meteredTime:"odrl:meteredTime",payAmount:"odrl:payAmount",percentage:"odrl:percentage",product:"odrl:product",purpose:"odrl:purpose",recipient:"odrl:recipient",relativePosition:"odrl:relativePosition",relativeSpatialPosition:"odrl:relativeSpatialPosition",relativeTemporalPosition:"odrl:relativeTemporalPosition",relativeSize:"odrl:relativeSize",resolution:"odrl:resolution",spatial:"odrl:spatial",spatialCoordinates:"odrl:spatialCoordinates",systemDevice:"odrl:systemDevice",timeInterval:"odrl:timeInterval",unitOfCount:"odrl:unitOfCount",version:"odrl:version",virtualLocation:"odrl:virtualLocation",eq:"odrl:eq",gt:"odrl:gt",gteq:"odrl:gteq",lt:"odrl:lt",lteq:"odrl:lteq",neq:"odrl:neg",isA:"odrl:isA",hasPart:"odrl:hasPart",isPartOf:"odrl:isPartOf",isAllOf:"odrl:isAllOf",isAnyOf:"odrl:isAnyOf",isNoneOf:"odrl:isNoneOf",or:"odrl:or",xone:"odrl:xone",and:"odrl:and",andSequence:"odrl:andSequence",policyUsage:"odrl:policyUsage"}}},8970:(e,t,r)=>{"use strict";const n=r(8033),o=r(7619),{CONTEXT_URL_V1:i}=o,a=new Map;a.set(i,n),e.exports={constants:o,contexts:a,CONTEXT_URL_V1:i,CONTEXT_V1:n}},2591:e=>{"use strict";e.exports={SECURITY_CONTEXT_V1_URL:"https://w3id.org/security/v1",SECURITY_CONTEXT_V2_URL:"https://w3id.org/security/v2",CONTEXT_URL:"https://w3id.org/security/v2"}},1881:(e,t,r)=>{"use strict";const n=r(59),o=r(9374),i=r(2591),{CONTEXT_URL:a,SECURITY_CONTEXT_V1_URL:s,SECURITY_CONTEXT_V2_URL:c}=i,l=new Map;l.set(s,n),l.set(c,o),e.exports={constants:i,contexts:l,SECURITY_CONTEXT_V1_URL:s,SECURITY_CONTEXT_V2_URL:c,CONTEXT_URL:a,CONTEXT:o}},59:e=>{"use strict";e.exports={"@context":{id:"@id",type:"@type",dc:"http://purl.org/dc/terms/",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",EcdsaKoblitzSignature2016:"sec:EcdsaKoblitzSignature2016",Ed25519Signature2018:"sec:Ed25519Signature2018",EncryptedMessage:"sec:EncryptedMessage",GraphSignature2012:"sec:GraphSignature2012",LinkedDataSignature2015:"sec:LinkedDataSignature2015",LinkedDataSignature2016:"sec:LinkedDataSignature2016",CryptographicKey:"sec:Key",authenticationTag:"sec:authenticationTag",canonicalizationAlgorithm:"sec:canonicalizationAlgorithm",cipherAlgorithm:"sec:cipherAlgorithm",cipherData:"sec:cipherData",cipherKey:"sec:cipherKey",created:{"@id":"dc:created","@type":"xsd:dateTime"},creator:{"@id":"dc:creator","@type":"@id"},digestAlgorithm:"sec:digestAlgorithm",digestValue:"sec:digestValue",domain:"sec:domain",encryptionKey:"sec:encryptionKey",expiration:{"@id":"sec:expiration","@type":"xsd:dateTime"},expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},initializationVector:"sec:initializationVector",iterationCount:"sec:iterationCount",nonce:"sec:nonce",normalizationAlgorithm:"sec:normalizationAlgorithm",owner:{"@id":"sec:owner","@type":"@id"},password:"sec:password",privateKey:{"@id":"sec:privateKey","@type":"@id"},privateKeyPem:"sec:privateKeyPem",publicKey:{"@id":"sec:publicKey","@type":"@id"},publicKeyBase58:"sec:publicKeyBase58",publicKeyPem:"sec:publicKeyPem",publicKeyWif:"sec:publicKeyWif",publicKeyService:{"@id":"sec:publicKeyService","@type":"@id"},revoked:{"@id":"sec:revoked","@type":"xsd:dateTime"},salt:"sec:salt",signature:"sec:signature",signatureAlgorithm:"sec:signingAlgorithm",signatureValue:"sec:signatureValue"}}},9374:e=>{"use strict";e.exports={"@context":[{"@version":1.1},"https://w3id.org/security/v1",{AesKeyWrappingKey2019:"sec:AesKeyWrappingKey2019",DeleteKeyOperation:"sec:DeleteKeyOperation",DeriveSecretOperation:"sec:DeriveSecretOperation",EcdsaSecp256k1Signature2019:"sec:EcdsaSecp256k1Signature2019",EcdsaSecp256r1Signature2019:"sec:EcdsaSecp256r1Signature2019",EcdsaSecp256k1VerificationKey2019:"sec:EcdsaSecp256k1VerificationKey2019",EcdsaSecp256r1VerificationKey2019:"sec:EcdsaSecp256r1VerificationKey2019",Ed25519Signature2018:"sec:Ed25519Signature2018",Ed25519VerificationKey2018:"sec:Ed25519VerificationKey2018",EquihashProof2018:"sec:EquihashProof2018",ExportKeyOperation:"sec:ExportKeyOperation",GenerateKeyOperation:"sec:GenerateKeyOperation",KmsOperation:"sec:KmsOperation",RevokeKeyOperation:"sec:RevokeKeyOperation",RsaSignature2018:"sec:RsaSignature2018",RsaVerificationKey2018:"sec:RsaVerificationKey2018",Sha256HmacKey2019:"sec:Sha256HmacKey2019",SignOperation:"sec:SignOperation",UnwrapKeyOperation:"sec:UnwrapKeyOperation",VerifyOperation:"sec:VerifyOperation",WrapKeyOperation:"sec:WrapKeyOperation",X25519KeyAgreementKey2019:"sec:X25519KeyAgreementKey2019",allowedAction:"sec:allowedAction",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"},capability:{"@id":"sec:capability","@type":"@id"},capabilityAction:"sec:capabilityAction",capabilityChain:{"@id":"sec:capabilityChain","@type":"@id","@container":"@list"},capabilityDelegation:{"@id":"sec:capabilityDelegationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"sec:capabilityInvocationMethod","@type":"@id","@container":"@set"},caveat:{"@id":"sec:caveat","@type":"@id","@container":"@set"},challenge:"sec:challenge",ciphertext:"sec:ciphertext",controller:{"@id":"sec:controller","@type":"@id"},delegator:{"@id":"sec:delegator","@type":"@id"},equihashParameterK:{"@id":"sec:equihashParameterK","@type":"xsd:integer"},equihashParameterN:{"@id":"sec:equihashParameterN","@type":"xsd:integer"},invocationTarget:{"@id":"sec:invocationTarget","@type":"@id"},invoker:{"@id":"sec:invoker","@type":"@id"},jws:"sec:jws",keyAgreement:{"@id":"sec:keyAgreementMethod","@type":"@id","@container":"@set"},kmsModule:{"@id":"sec:kmsModule"},parentCapability:{"@id":"sec:parentCapability","@type":"@id"},plaintext:"sec:plaintext",proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab"},proofValue:"sec:proofValue",referenceId:"sec:referenceId",unwrappedKey:"sec:unwrappedKey",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"},verifyData:"sec:verifyData",wrappedKey:"sec:wrappedKey"}]}},5456:e=>{"use strict";e.exports=function e(t){return null===t||"object"!=typeof t||null!=t.toJSON?JSON.stringify(t):Array.isArray(t)?"["+t.reduce(((t,r,n)=>t+(0===n?"":",")+e(void 0===r||"symbol"==typeof r?null:r)),"")+"]":"{"+Object.keys(t).sort().reduce(((r,n,o)=>void 0===t[n]||"symbol"==typeof t[n]?r:r+(0===r.length?"":",")+e(n)+":"+e(t[n])),"")+"}"}},1931:(e,t,r)=>{"use strict";const n=r(44),o=r(6805),{extendContextLoader:i,strictDocumentLoader:a}=r(8369),{serializeError:s}=r(7710);function c({document:e}){let t;t=o.getValues(e,"proof");const r=e["@context"]||n.SECURITY_CONTEXT_URL;return t=t.map((e=>({"@context":r,...e}))),t}function l(e){Object.defineProperty(e,"toJSON",{value:function(){return s(this)},configurable:!0,writable:!0})}e.exports=class{async add(e,{suite:t,purpose:r,documentLoader:n}={}){if(!t)throw new TypeError('"options.suite" is required.');if(!r)throw new TypeError('"options.purpose" is required.');n=n?i(n):a;const s={...e};delete s.proof;const l=c({document:e}),d=await t.createProof({document:s,purpose:r,proofSet:l,documentLoader:n});return o.addValue(e,"proof",d),e}async derive(e,{suite:t,purpose:r,documentLoader:n}={}){if(!t)throw new TypeError('"options.suite" is required.');if(!r)throw new TypeError('"options.purpose" is required.');n=n?i(n):a;const o={...e};delete o.proof;const s=c({document:e});return await t.derive({document:o,purpose:r,proofSet:s,documentLoader:n})}async verify(e,{suite:t,purpose:r,documentLoader:n}={}){if(!t)throw new TypeError('"options.suite" is required.');if(!r)throw new TypeError('"options.purpose" is required.');const o=Array.isArray(t)?t:[t];if(0===o.length)throw new TypeError("At least one suite is required.");n=n?i(n):a;try{const t=c({document:e={...e}});if(0===t.length)throw new Error("No matching proofs found in the given document.");delete e.proof;const i=await async function({document:e,suites:t,proofSet:r,purpose:n,documentLoader:o}){const i=Array.isArray(n)?n:[n],a=new Map,s=new Map,c=new Map;if(await Promise.all(i.map((n=>async function({purposeToProofs:e,proofToSuite:t,purpose:r,proofSet:n,suites:o,suiteMatchQueue:i,document:a,documentLoader:s}){for(const c of n){if(!await r.match(c,{document:a,documentLoader:s}))continue;let n=!1;for(const e of o){let r=i.get(e);r||i.set(e,r=new Map);let o=r.get(c);if(o||(o=e.matchProof({proof:c,document:a,documentLoader:s}),r.set(c,o)),await o){n=!0,t.set(c,e);break}}if(n){const t=e.get(r);t?t.push(c):e.set(r,[c])}}}({purposeToProofs:a,proofToSuite:s,purpose:n,proofSet:r,suites:t,suiteMatchQueue:c,document:e,documentLoader:o})))),a.size<i.length)return[];const d=new Map;return await Promise.all([...s.entries()].map((async([t,n])=>{let i;try{let a;const s={validate:async(e,{verificationMethod:t})=>(a=t,{valid:!0})},{verified:c,verificationMethod:l,error:d}=await n.verifyProof({proof:t,document:e,purpose:s,proofSet:r,documentLoader:o});a||(a=l),i={proof:t,verified:c,verificationMethod:a,error:d}}catch(e){i={proof:t,verified:!1,error:e}}i.error&&l(i.error),d.set(t,i)}))),await Promise.all([...a.entries()].map((async([t,r])=>{for(const n of r){const r=d.get(n);if(!r.verified)continue;const{verificationMethod:i}=r,a=s.get(n);let c;try{c=await t.validate(n,{document:e,suite:a,verificationMethod:i,documentLoader:o})}catch(e){c={valid:!1,error:e}}r.purposeResult?Array.isArray(r.purposeResult)?r.purposeResult.push(c):r.purposeResult=[r.purposeResult,c]:r.purposeResult=c,c.valid||(l(c.error),r.error||(r.verified=!1,r.error=c.error))}}))),[...d.values()]}({document:e,suites:o,proofSet:t,purpose:r,documentLoader:n});if(0===i.length){const e=new Error("Did not verify any proofs; insufficient proofs matched the acceptable suite(s) and required purpose(s).");throw e.name="NotFoundError",e}const a=i.some((e=>e.verified));if(!a){const e=[].concat(...i.filter((e=>e.error)).map((e=>e.error))),t={verified:a,results:i};return e.length>0&&(t.error=e),t}return{verified:a,results:i}}catch(e){return l(e),{verified:!1,error:e}}}}},1714:e=>{"use strict";class t extends Error{constructor(e){super("Verification error(s)."),this.name="VerificationError",this.errors=[].concat(e)}}e.exports=t},44:(e,t,r)=>{"use strict";const{constants:n}=r(1881);e.exports={SECURITY_CONTEXT_URL:n.SECURITY_CONTEXT_V2_URL,SECURITY_CONTEXT_V1_URL:n.SECURITY_CONTEXT_V1_URL,SECURITY_CONTEXT_V2_URL:n.SECURITY_CONTEXT_V2_URL,SECURITY_PROOF_URL:"https://w3id.org/security#proof",SECURITY_SIGNATURE_URL:"https://w3id.org/security#signature"}},1907:(e,t,r)=>{"use strict";const n=r(44),{contexts:o}=r(1881);e.exports=new Map([[n.SECURITY_CONTEXT_V1_URL,o.get(n.SECURITY_CONTEXT_V1_URL)],[n.SECURITY_CONTEXT_V2_URL,o.get(n.SECURITY_CONTEXT_V2_URL)]])},8369:(e,t,r)=>{"use strict";const n=r(1907),o={};e.exports=o,o.extendContextLoader=e=>async t=>{const r=n.get(t);return void 0!==r?{contextUrl:null,documentUrl:t,document:r,tag:"static"}:e(t)},o.strictDocumentLoader=o.extendContextLoader((e=>{throw new Error(`${e} not found.`)}))},7563:(e,t,r)=>{"use strict";const n={};e.exports=n;const o=r(44);Object.assign(n,o);const i=r(1931),a=r(1714);n.derive=async function(e,{suite:t,purpose:r,documentLoader:n,addSuiteContext:o=!0}={}){if("object"!=typeof e)throw new TypeError('The "document" parameter must be an object.');t.ensureSuiteContext({document:e,addSuiteContext:o});try{return await(new i).derive(e,{suite:t,purpose:r,documentLoader:n})}catch(e){if(!n&&"jsonld.InvalidUrl"===e.name){const{details:{url:t}}=e,r=new Error(`A URL "${t}" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "derive".`);throw r.cause=e,r}throw e}},n.sign=async function(e,{suite:t,purpose:r,documentLoader:n,expansionMap:o,addSuiteContext:a=!0}={}){if(o)throw new Error('"expansionMap" not supported.');if("object"!=typeof e)throw new TypeError('The "document" parameter must be an object.');t.ensureSuiteContext({document:e,addSuiteContext:a});try{return await(new i).add(e,{suite:t,purpose:r,documentLoader:n})}catch(e){if(!n&&"jsonld.InvalidUrl"===e.name){const{details:{url:t}}=e,r=new Error(`A URL "${t}" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "sign".`);throw r.cause=e,r}throw e}},n.verify=async function(e,{suite:t,purpose:r,documentLoader:n,expansionMap:o}={}){if(o)throw new Error('"expansionMap" not supported.');if("object"!=typeof e)throw new TypeError('The "document" parameter must be an object.');const s=await(new i).verify(e,{suite:t,purpose:r,documentLoader:n}),{error:c}=s;if(c)if(n||"jsonld.InvalidUrl"!==c.name)s.error=new a(c);else{const{details:{url:e}}=c,t=new Error(`A URL "${e}" could not be fetched; you need to pass "documentLoader" or resolve the URL before calling "verify".`);s.error=new a(t)}return s},n.suites=r(7115).suites,n.purposes=r(3578).purposes,Object.assign(n,r(8369))},3578:(e,t,r)=>{"use strict";const n={};e.exports=n,n.purposes={AssertionProofPurpose:r(9778),AuthenticationProofPurpose:r(8238),ControllerProofPurpose:r(2065),ProofPurpose:r(5940)}},9778:(e,t,r)=>{"use strict";const n=r(2065);e.exports=class extends n{constructor({term:e="assertionMethod",controller:t,date:r,maxTimestampDelta:n=1/0}={}){super({term:e,controller:t,date:r,maxTimestampDelta:n})}}},8238:(e,t,r)=>{"use strict";const n=r(2065);e.exports=class extends n{constructor({term:e="authentication",controller:t,challenge:r,date:n,domain:o,maxTimestampDelta:i=1/0}={}){if(super({term:e,controller:t,date:n,maxTimestampDelta:i}),"string"!=typeof r)throw new TypeError('"challenge" must be a string.');if(void 0!==o&&"string"!=typeof o)throw new TypeError('"domain" must be a string.');this.challenge=r,this.domain=o}async validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n}){try{if(e.challenge!==this.challenge)throw new Error(`The challenge is not as expected; challenge="${e.challenge}", expected="${this.challenge}"`);if(void 0!==this.domain&&e.domain!==this.domain)throw new Error(`The domain is not as expected; domain="${e.domain}", expected="${this.domain}"`);return super.validate(e,{verificationMethod:t,documentLoader:r,expansionMap:n})}catch(e){return{valid:!1,error:e}}}async update(e,{document:t,suite:r,documentLoader:n,expansionMap:o}){return(e=await super.update(e,{document:t,suite:r,documentLoader:n,expansionMap:o})).challenge=this.challenge,void 0!==this.domain&&(e.domain=this.domain),e}}},2065:(e,t,r)=>{"use strict";const n=r(44),o=r(6805),i=r(5940),a="https://www.w3.org/ns/did/v1",s=["assertionMethod","authentication","capabilityInvocation","capabilityDelegation","keyAgreement","verificationMethod"];e.exports=class extends i{constructor({term:e,controller:t,date:r,maxTimestampDelta:n=1/0}={}){if(super({term:e,date:r,maxTimestampDelta:n}),void 0!==t){if("object"!=typeof t)throw new TypeError('"controller" must be an object.');this.controller=t}this._termDefinedByDIDContext=s.includes(e)}async validate(e,{verificationMethod:t,documentLoader:r,expansionMap:i}){try{const s=await super.validate(e,{verificationMethod:t,documentLoader:r,expansionMap:i});if(!s.valid)throw s.error;const{id:c}=t,{term:l,_termDefinedByDIDContext:d}=this;if(this.controller)s.controller=this.controller;else{const{controller:e}=t;let i;if(e)if("object"==typeof e)i=e.id;else{if("string"!=typeof e)throw new TypeError('"controller" must be a string representing a URL.');i=e}let{document:u}=await r(i);!(d&&u["@context"]===a||Array.isArray(u["@context"])&&u["@context"][0]===a)&&(u=await o.frame(u,{"@context":n.SECURITY_CONTEXT_URL,id:i,[l]:{"@embed":"@never",id:c}},{documentLoader:r,compactToRelative:!1,safe:!0})),s.controller=u}const u=o.getValues(s.controller,l);if(s.valid=u.some((e=>e===c||"object"==typeof e&&e.id===c)),!s.valid)throw new Error(`Verification method "${t.id}" not authorized by controller for proof purpose "${this.term}".`);return s}catch(e){return{valid:!1,error:e}}}}},5940:e=>{"use strict";e.exports=class{constructor({term:e,date:t,maxTimestampDelta:r=1/0}={}){if(void 0===e)throw new Error('"term" is required.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxTimestampDelta" must be a number.');if(this.term=e,void 0!==t&&(this.date=new Date(t),isNaN(this.date)))throw TypeError(`"date" "${t}" is not a valid date.`);this.maxTimestampDelta=r}async validate(e,{expansionMap:t}){if(t)throw new Error('"expansionMap" not supported.');try{if(this.maxTimestampDelta!==1/0){const t=(this.date||new Date).getTime(),r=1e3*this.maxTimestampDelta,n=new Date(e.created).getTime();if(!(n>=t-r&&n<=t+r))throw new Error("The proof's created timestamp is out of range.")}return{valid:!0}}catch(e){return{valid:!1,error:e}}}async update(e,{expansionMap:t}){if(t)throw new Error('"expansionMap" not supported.');return e.proofPurpose=this.term,e}async match(e,{expansionMap:t}){if(t)throw new Error('"expansionMap" not supported.');return e.proofPurpose===this.term}}},3929:e=>{"use strict";const t=self&&(self.crypto||self.msCrypto);e.exports={async sha256digest({string:e}){const r=(new TextEncoder).encode(e);return new Uint8Array(await t.subtle.digest("SHA-256",r))}}},7115:(e,t,r)=>{"use strict";const n={};e.exports=n,n.suites={LinkedDataProof:r(2259),LinkedDataSignature:r(7384)}},2259:e=>{"use strict";e.exports=class{constructor({type:e}={}){if("string"!=typeof e)throw new TypeError('A LinkedDataProof must have a "type".');this.type=e}async createProof({}){throw new Error('"createProof" must be implemented in a derived class.')}async derive({}){throw new Error('"deriveProof" must be implemented in a derived class.')}async verifyProof({}){throw new Error('"verifyProof" must be implemented in a derived class.')}async matchProof({proof:e}){return e.type===this.type}}},7384:(e,t,r)=>{"use strict";const n=r(44),o=r(6805),i=r(445),{sha256digest:a}=r(3929),s=r(2259);e.exports=class extends s{constructor({type:e,proof:t,LDKeyClass:r,date:n,key:o,signer:i,verifier:a,useNativeCanonize:s,canonizeOptions:c,contextUrl:l}={}){super({type:e}),this.LDKeyClass=r,this.contextUrl=l,this.proof=t;const d=function({key:e,signer:t,verifier:r}){const n={};if(e){if(n.key=e,n.verificationMethod=e.id,"function"==typeof e.signer&&(n.signer=e.signer()),"function"==typeof e.verifier&&(n.verifier=e.verifier()),!n.signer&&!n.verifier)throw new TypeError('The "key" parameter must contain a "signer" or "verifier" method.')}else n.verificationMethod=t&&t.id||r&&r.id,n.signer=t,n.verifier=r;if(n.signer&&"function"!=typeof n.signer.sign)throw new TypeError("A signer API has not been specified.");if(n.verifier&&"function"!=typeof n.verifier.verify)throw new TypeError("A verifier API has not been specified.");return n}({key:o,signer:i,verifier:a});if(this.verificationMethod=d.verificationMethod,this.key=d.key,this.signer=d.signer,this.verifier=d.verifier,this.canonizeOptions=c,n&&(this.date=new Date(n),isNaN(this.date)))throw TypeError(`"date" "${n}" is not a valid date.`);this.useNativeCanonize=s,this._hashCache=null}async createProof({document:e,purpose:t,proofSet:r,documentLoader:n,expansionMap:o}){if(o)throw new Error('"expansionMap" not supported.');let a;a=this.proof?{...this.proof}:{},a.type=this.type;let s=this.date;void 0===a.created&&void 0===s&&(s=new Date),s&&"string"!=typeof s&&(s=i.w3cDate(s)),s&&(a.created=s),a.verificationMethod=this.verificationMethod,a=await this.updateProof({document:e,proof:a,proofSet:r,purpose:t,documentLoader:n}),a=await t.update(a,{document:e,suite:this,documentLoader:n});const c=await this.createVerifyData({document:e,proof:a,proofSet:r,documentLoader:n});return a=await this.sign({verifyData:c,document:e,proof:a,documentLoader:n}),a}async updateProof({proof:e,expansionMap:t}){if(t)throw new Error('"expansionMap" not supported.');return e}async verifyProof({proof:e,document:t,proofSet:r,documentLoader:n,expansionMap:o}){if(o)throw new Error('"expansionMap" not supported.');try{const i=await this.createVerifyData({document:t,proof:e,proofSet:r,documentLoader:n,expansionMap:o}),a=await this.getVerificationMethod({proof:e,document:t,documentLoader:n,expansionMap:o});if(!await this.verifySignature({verifyData:i,verificationMethod:a,document:t,proof:e,documentLoader:n,expansionMap:o}))throw new Error("Invalid signature.");return{verified:!0,verificationMethod:a}}catch(e){return{verified:!1,error:e}}}async canonize(e,{documentLoader:t,expansionMap:r,skipExpansion:n}){if(r)throw new Error('"expansionMap" not supported.');return o.canonize(e,{algorithm:"URDNA2015",base:null,format:"application/n-quads",documentLoader:t,safe:!0,skipExpansion:n,useNative:this.useNativeCanonize,...this.canonizeOptions})}async canonizeProof(e,{document:t,documentLoader:r,expansionMap:o}){if(o)throw new Error('"expansionMap" not supported.');return delete(e={"@context":t["@context"]||n.SECURITY_CONTEXT_URL,...e}).jws,delete e.signatureValue,delete e.proofValue,this.canonize(e,{documentLoader:r,expansionMap:o,skipExpansion:!1,...this.canonizeOptions})}async createVerifyData({document:e,proof:t,documentLoader:r,expansionMap:n}){if(n)throw new Error('"expansionMap" not supported.');let o;const{_hashCache:s}=this;s&&s.document===e?o=s.hash:this._hashCache={document:e,hash:o=this.canonize(e,{documentLoader:r,expansionMap:n}).then((e=>a({string:e})))};const[c,l]=await Promise.all([this.canonizeProof(t,{document:e,documentLoader:r,expansionMap:n}).then((e=>a({string:e}))),o]);return i.concat(c,l)}async derive(){throw new Error("Must be implemented by a derived class.")}async getVerificationMethod({proof:e,documentLoader:t}){let{verificationMethod:r}=e;if("object"==typeof r&&(r=r.id),!r)throw new Error('No "verificationMethod" found in proof.');const i=await o.frame(r,{"@context":n.SECURITY_CONTEXT_URL,"@embed":"@always",id:r},{documentLoader:t,compactToRelative:!1,safe:!0});if(!i)throw new Error(`Verification method ${r} not found.`);if(void 0!==i.revoked)throw new Error("The verification method has been revoked.");return i}async sign(){throw new Error("Must be implemented by a derived class.")}async verifySignature(){throw new Error("Must be implemented by a derived class.")}ensureSuiteContext({document:e,addSuiteContext:t}){const{contextUrl:r}=this;if(function({document:e,contextUrl:t}){const r=e["@context"];return r===t||Array.isArray(r)&&r.includes(t)}({document:e,contextUrl:r}))return;if(!t)throw new TypeError(`The document to be signed must contain this suite's @context, "${r}".`);const n=e["@context"]||[];e["@context"]=Array.isArray(n)?[...n,r]:[n,r]}}},445:e=>{"use strict";const t={};e.exports=t,t.w3cDate=e=>{null==e?e=new Date:"number"!=typeof e&&"string"!=typeof e||(e=new Date(e));const t=e.toISOString();return t.substr(0,t.length-5)+"Z"},t.concat=(e,t)=>{const r=new Uint8Array(e.length+t.length);return r.set(e,0),r.set(t,e.length),r}},8058:(e,t,r)=>{"use strict";const{isArray:n,isObject:o,isString:i}=r(832),{asArray:a}=r(1055),{prependBase:s}=r(2278),c=r(4093),l=r(6767);function d(e){throw new c("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:e})}function u({context:e,base:t}){if(!e)return;const r=e["@context"];if(i(r))e["@context"]=s(t,r);else if(n(r))for(let e=0;e<r.length;++e){const n=r[e];i(n)?r[e]=s(t,n):o(n)&&u({context:{"@context":n},base:t})}else if(o(r))for(const e in r)u({context:r[e],base:t})}e.exports=class{constructor({sharedCache:e}){this.perOpCache=new Map,this.sharedCache=e}async resolve({activeCtx:e,context:t,documentLoader:r,base:s,cycles:c=new Set}){t&&o(t)&&t["@context"]&&(t=t["@context"]),t=a(t);const u=[];for(const a of t){if(i(a)){let t=this._get(a);t||(t=await this._resolveRemoteContext({activeCtx:e,url:a,documentLoader:r,base:s,cycles:c})),n(t)?u.push(...t):u.push(t);continue}if(null===a){u.push(new l({document:null}));continue}o(a)||d(t);const p=JSON.stringify(a);let f=this._get(p);f||(f=new l({document:a}),this._cacheResolvedContext({key:p,resolved:f,tag:"static"})),u.push(f)}return u}_get(e){let t=this.perOpCache.get(e);if(!t){const r=this.sharedCache.get(e);r&&(t=r.get("static"),t&&this.perOpCache.set(e,t))}return t}_cacheResolvedContext({key:e,resolved:t,tag:r}){if(this.perOpCache.set(e,t),void 0!==r){let n=this.sharedCache.get(e);n||(n=new Map,this.sharedCache.set(e,n)),n.set(r,t)}return t}async _resolveRemoteContext({activeCtx:e,url:t,documentLoader:r,base:n,cycles:o}){t=s(n,t);const{context:i,remoteDoc:a}=await this._fetchContext({activeCtx:e,url:t,documentLoader:r,cycles:o});u({context:i,base:n=a.documentUrl||t});const c=await this.resolve({activeCtx:e,context:i,documentLoader:r,base:n,cycles:o});return this._cacheResolvedContext({key:t,resolved:c,tag:a.tag}),c}async _fetchContext({activeCtx:e,url:t,documentLoader:r,cycles:a}){if(a.size>10)throw new c("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"loading remote context failed":"context overflow",max:10});if(a.has(t))throw new c("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===e.processingMode?"recursive context inclusion":"context overflow",url:t});let s,l;a.add(t);try{l=await r(t),s=l.document||null,i(s)&&(s=JSON.parse(s))}catch(e){throw new c("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:t,cause:e})}if(!o(s))throw new c("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:t});return s="@context"in s?{"@context":s["@context"]}:{"@context":{}},l.contextUrl&&(n(s["@context"])||(s["@context"]=[s["@context"]]),s["@context"].push(l.contextUrl)),{context:s,remoteDoc:l}}}},4093:e=>{"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",r={}){super(e),this.name=t,this.message=e,this.details=r}}},731:e=>{"use strict";e.exports=e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,r){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,r)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t}},9048:(e,t,r)=>{"use strict";e.exports=r(7055).NQuads},533:e=>{"use strict";e.exports=class{constructor(){this._requests={}}wrapLoader(e){const t=this;return t._loader=e,function(){return t.add.apply(t,arguments)}}async add(e){let t=this._requests[e];if(t)return Promise.resolve(t);t=this._requests[e]=this._loader(e);try{return await t}finally{delete this._requests[e]}}}},6767:(e,t,r)=>{"use strict";const n=r(9593);e.exports=class{constructor({document:e}){this.document=e,this.cache=new n({max:10})}getProcessed(e){return this.cache.get(e)}setProcessed(e,t){this.cache.set(e,t)}}},3251:(e,t,r)=>{"use strict";const n=r(4093),{isArray:o,isObject:i,isString:a,isUndefined:s}=r(832),{isList:c,isValue:l,isGraph:d,isSimpleGraph:u,isSubjectReference:p}=r(8463),{expandIri:f,getContextValue:h,isKeyword:y,process:g,processingMode:m}=r(4131),{removeBase:v,prependBase:w}=r(2278),{REGEX_KEYWORD:x,addValue:b,asArray:E,compareShortestLeast:S}=r(1055),T={};function O(e,t,r){if("@nest"!==f(e,t,{vocab:!0},r))throw new n("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=T,T.compact=async({activeCtx:e,activeProperty:t=null,element:r,options:f={}})=>{if(o(r)){let n=[];for(let o=0;o<r.length;++o){const i=await T.compact({activeCtx:e,activeProperty:t,element:r[o],options:f});null!==i&&n.push(i)}return f.compactArrays&&1===n.length&&0===(h(e,t,"@container")||[]).length&&(n=n[0]),n}const v=h(e,t,"@context");if(s(v)||(e=await g({activeCtx:e,localCtx:v,propagate:!0,overrideProtected:!0,options:f})),i(r)){if(f.link&&"@id"in r&&f.link.hasOwnProperty(r["@id"])){const e=f.link[r["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===r)return e[t].compacted}if(l(r)||p(r)){const n=T.compactValue({activeCtx:e,activeProperty:t,value:r,options:f});return f.link&&p(r)&&(f.link.hasOwnProperty(r["@id"])||(f.link[r["@id"]]=[]),f.link[r["@id"]].push({expanded:r,compacted:n})),n}if(c(r)&&(h(e,t,"@container")||[]).includes("@list"))return T.compact({activeCtx:e,activeProperty:t,element:r["@list"],options:f});const v="@reverse"===t,w={},x=e;l(r)||p(r)||(e=e.revertToPreviousContext());const S=h(x,t,"@context");s(S)||(e=await g({activeCtx:e,localCtx:S,propagate:!0,overrideProtected:!0,options:f})),f.link&&"@id"in r&&(f.link.hasOwnProperty(r["@id"])||(f.link[r["@id"]]=[]),f.link[r["@id"]].push({expanded:r,compacted:w}));let C=r["@type"]||[];C.length>1&&(C=Array.from(C).sort());const I=e;for(const t of C){const r=T.compactIri({activeCtx:I,iri:t,relativeTo:{vocab:!0}}),n=h(x,r,"@context");s(n)||(e=await g({activeCtx:e,localCtx:n,options:f,propagate:!1}))}const j=Object.keys(r).sort();for(const s of j){const p=r[s];if("@id"!==s)if("@type"!==s)if("@reverse"!==s)if("@preserve"!==s)if("@index"!==s)if("@graph"!==s&&"@list"!==s&&"@included"!==s&&y(s)){const t=T.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(w,t,p)}else{if(!o(p))throw new n("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===p.length){const t=T.compactIri({activeCtx:e,iri:s,value:p,relativeTo:{vocab:!0},reverse:v}),r=e.mappings.has(t)?e.mappings.get(t)["@nest"]:null;let n=w;r&&(O(e,r,f),i(w[r])||(w[r]={}),n=w[r]),b(n,t,p,{propertyIsArray:!0})}for(const t of p){const r=T.compactIri({activeCtx:e,iri:s,value:t,relativeTo:{vocab:!0},reverse:v}),n=e.mappings.has(r)?e.mappings.get(r)["@nest"]:null;let p=w;n&&(O(e,n,f),i(w[n])||(w[n]={}),p=w[n]);const y=h(e,r,"@container")||[],g=d(t),m=c(t);let x;m?x=t["@list"]:g&&(x=t["@graph"]);let S=await T.compact({activeCtx:e,activeProperty:r,element:m||g?x:t,options:f});if(m){if(o(S)||(S=[S]),y.includes("@list")){b(p,r,S,{valueIsArray:!0,allowDuplicate:!0});continue}S={[T.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:S},"@index"in t&&(S[T.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"])}if(g)if(y.includes("@graph")&&(y.includes("@id")||y.includes("@index")&&u(t))){let n;p.hasOwnProperty(r)?n=p[r]:p[r]=n={};const o=(y.includes("@id")?t["@id"]:t["@index"])||T.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}});b(n,o,S,{propertyIsArray:!f.compactArrays||y.includes("@set")})}else y.includes("@graph")&&u(t)?(o(S)&&S.length>1&&(S={"@included":S}),b(p,r,S,{propertyIsArray:!f.compactArrays||y.includes("@set")})):(o(S)&&1===S.length&&f.compactArrays&&(S=S[0]),S={[T.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:S},"@id"in t&&(S[T.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(S[T.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),b(p,r,S,{propertyIsArray:!f.compactArrays||y.includes("@set")}));else if(y.includes("@language")||y.includes("@index")||y.includes("@id")||y.includes("@type")){let n,o;if(p.hasOwnProperty(r)?n=p[r]:p[r]=n={},y.includes("@language"))l(S)&&(S=S["@value"]),o=t["@language"];else if(y.includes("@index")){const n=h(e,r,"@index")||"@index",i=T.compactIri({activeCtx:e,iri:n,relativeTo:{vocab:!0}});if("@index"===n)o=t["@index"],delete S[i];else{let e;if([o,...e]=E(S[n]||[]),a(o))switch(e.length){case 0:delete S[n];break;case 1:S[n]=e[0];break;default:S[n]=e}else o=null}}else if(y.includes("@id")){const t=T.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});o=S[t],delete S[t]}else if(y.includes("@type")){const n=T.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}});let i;switch([o,...i]=E(S[n]||[]),i.length){case 0:delete S[n];break;case 1:S[n]=i[0];break;default:S[n]=i}1===Object.keys(S).length&&"@id"in t&&(S=await T.compact({activeCtx:e,activeProperty:r,element:{"@id":t["@id"]},options:f}))}o||(o=T.compactIri({activeCtx:e,iri:"@none",relativeTo:{vocab:!0}})),b(n,o,S,{propertyIsArray:y.includes("@set")})}else{const e=!f.compactArrays||y.includes("@set")||y.includes("@list")||o(S)&&0===S.length||"@list"===s||"@graph"===s;b(p,r,S,{propertyIsArray:e})}}}else{if((h(e,t,"@container")||[]).includes("@index"))continue;const r=T.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(w,r,p)}else{const r=await T.compact({activeCtx:e,activeProperty:t,element:p,options:f});o(r)&&0===r.length||b(w,s,r)}else{const t=await T.compact({activeCtx:e,activeProperty:"@reverse",element:p,options:f});for(const r in t)if(e.mappings.has(r)&&e.mappings.get(r).reverse){const n=t[r],o=(h(e,r,"@container")||[]).includes("@set")||!f.compactArrays;b(w,r,n,{propertyIsArray:o}),delete t[r]}if(Object.keys(t).length>0){const r=T.compactIri({activeCtx:e,iri:s,relativeTo:{vocab:!0}});b(w,r,t)}}else{let t=E(p).map((e=>T.compactIri({activeCtx:x,iri:e,relativeTo:{vocab:!0}})));1===t.length&&(t=t[0]);const r=T.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}}),n=(h(e,r,"@container")||[]).includes("@set")&&m(e,1.1)||o(t)&&0===p.length;b(w,r,t,{propertyIsArray:n})}else{let t=E(p).map((t=>T.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!1},base:f.base})));1===t.length&&(t=t[0]),w[T.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t}}return w}return r},T.compactIri=({activeCtx:e,iri:t,value:r=null,relativeTo:o={vocab:!1},reverse:a=!1,base:s=null})=>{if(null===t)return t;e.isPropertyTermScoped&&e.previousContext&&(e=e.previousContext);const u=e.getInverse();if(y(t)&&t in u&&"@none"in u[t]&&"@type"in u[t]["@none"]&&"@none"in u[t]["@none"]["@type"])return u[t]["@none"]["@type"]["@none"];if(o.vocab&&t in u){const n=e["@language"]||"@none",o=[];i(r)&&"@index"in r&&!("@graph"in r)&&o.push("@index","@index@set"),i(r)&&"@preserve"in r&&(r=r["@preserve"][0]),d(r)?("@index"in r&&o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r&&o.push("@graph@id","@graph@id@set"),o.push("@graph","@graph@set","@set"),"@index"in r||o.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in r||o.push("@graph@id","@graph@id@set")):i(r)&&!l(r)&&o.push("@id","@id@set","@type","@set@type");let s="@language",u="@null";if(a)s="@type",u="@reverse",o.push("@set");else if(c(r)){"@index"in r||o.push("@list");const e=r["@list"];if(0===e.length)s="@any",u="@none";else{let t=0===e.length?n:null,r=null;for(let n=0;n<e.length;++n){const o=e[n];let i="@none",a="@none";if(l(o)?"@direction"in o?i=`${(o["@language"]||"").toLowerCase()}_${o["@direction"]}`:"@language"in o?i=o["@language"].toLowerCase():"@type"in o?a=o["@type"]:i="@null":a="@id",null===t?t=i:i!==t&&l(o)&&(t="@none"),null===r?r=a:a!==r&&(r="@none"),"@none"===t&&"@none"===r)break}t=t||"@none",r=r||"@none","@none"!==r?(s="@type",u=r):u=t}}else{if(l(r))if("@language"in r&&!("@index"in r)){o.push("@language","@language@set"),u=r["@language"];const e=r["@direction"];e&&(u=`${u}_${e}`)}else"@direction"in r&&!("@index"in r)?u=`_${r["@direction"]}`:"@type"in r&&(s="@type",u=r["@type"]);else s="@type",u="@id";o.push("@set")}o.push("@none"),i(r)&&!("@index"in r)&&o.push("@index","@index@set"),l(r)&&1===Object.keys(r).length&&o.push("@language","@language@set");const p=function(e,t,r,n,o,a){null===a&&(a="@null");const s=[];if(("@id"===a||"@reverse"===a)&&i(r)&&"@id"in r){"@reverse"===a&&s.push("@reverse");const t=T.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:!0}});e.mappings.has(t)&&e.mappings.get(t)&&e.mappings.get(t)["@id"]===r["@id"]?s.push.apply(s,["@vocab","@id"]):s.push.apply(s,["@id","@vocab"])}else{s.push(a);const e=s.find((e=>e.includes("_")));e&&s.push(e.replace(/^[^_]+_/,"_"))}s.push("@none");const c=e.inverse[t];for(const e of n){if(!(e in c))continue;const t=c[e][o];for(const e of s)if(e in t)return t[e]}return null}(e,t,r,o,s,u);if(null!==p)return p}if(o.vocab&&"@vocab"in e){const r=e["@vocab"];if(0===t.indexOf(r)&&t!==r){const n=t.substr(r.length);if(!e.mappings.has(n))return n}}let p=null;const f=[];let h=e.fastCurieMap;const g=t.length-1;for(let e=0;e<g&&t[e]in h;++e)h=h[t[e]],""in h&&f.push(h[""][0]);for(let n=f.length-1;n>=0;--n){const o=f[n],i=o.terms;for(const n of i){const i=n+":"+t.substr(o.iri.length);e.mappings.get(n)._prefix&&(!e.mappings.has(i)||null===r&&e.mappings.get(i)["@id"]===t)&&(null===p||S(i,p)<0)&&(p=i)}}if(null!==p)return p;for(const[r,o]of e.mappings)if(o&&o._prefix&&t.startsWith(r+":"))throw new n(`Absolute IRI "${t}" confused with prefix "${r}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:e});if(!o.vocab){if("@base"in e){if(e["@base"]){const r=v(w(s,e["@base"]),t);return x.test(r)?`./${r}`:r}return t}return v(s,t)}return t},T.compactValue=({activeCtx:e,activeProperty:t,value:r,options:n})=>{if(l(r)){const n=h(e,t,"@type"),o=h(e,t,"@language"),i=h(e,t,"@direction"),s=h(e,t,"@container")||[],c="@index"in r&&!s.includes("@index");if(!c&&"@none"!==n){if(r["@type"]===n)return r["@value"];if("@language"in r&&r["@language"]===o&&"@direction"in r&&r["@direction"]===i)return r["@value"];if("@language"in r&&r["@language"]===o)return r["@value"];if("@direction"in r&&r["@direction"]===i)return r["@value"]}const l=Object.keys(r).length,d=1===l||2===l&&"@index"in r&&!c,u="@language"in e,p=a(r["@value"]),f=e.mappings.has(t)&&null===e.mappings.get(t)["@language"];if(d&&"@none"!==n&&(!u||!p||f))return r["@value"];const y={};return c&&(y[T.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=r["@index"]),"@type"in r?y[T.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=T.compactIri({activeCtx:e,iri:r["@type"],relativeTo:{vocab:!0}}):"@language"in r&&(y[T.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=r["@language"]),"@direction"in r&&(y[T.compactIri({activeCtx:e,iri:"@direction",relativeTo:{vocab:!0}})]=r["@direction"]),y[T.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=r["@value"],y}const o=f(e,t,{vocab:!0},n),i=h(e,t,"@type"),s=T.compactIri({activeCtx:e,iri:r["@id"],relativeTo:{vocab:"@vocab"===i},base:n.base});return"@id"===i||"@vocab"===i||"@graph"===o?s:{[T.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:s}}},3770:e=>{"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:t,RDF_LIST:t+"List",RDF_FIRST:t+"first",RDF_REST:t+"rest",RDF_NIL:t+"nil",RDF_TYPE:t+"type",RDF_PLAIN_LITERAL:t+"PlainLiteral",RDF_XML_LITERAL:t+"XMLLiteral",RDF_JSON_LITERAL:t+"JSON",RDF_OBJECT:t+"object",RDF_LANGSTRING:t+"langString",XSD:r,XSD_BOOLEAN:r+"boolean",XSD_DOUBLE:r+"double",XSD_INTEGER:r+"integer",XSD_STRING:r+"string"}},4131:(e,t,r)=>{"use strict";const n=r(1055),o=r(4093),{isArray:i,isObject:a,isString:s,isUndefined:c}=r(832),{isAbsolute:l,isRelative:d,prependBase:u}=r(2278),{handleEvent:p}=r(1696),{REGEX_BCP47:f,REGEX_KEYWORD:h,asArray:y,compareShortestLeast:g}=r(1055),m=new Map,v={};function w(e,t,r,n,o,i){if(null===t||!s(t)||v.isKeyword(t))return t;if(t.match(h))return null;if(n&&n.hasOwnProperty(t)&&!0!==o.get(t)&&v.createTermDefinition({activeCtx:e,localCtx:n,term:t,defined:o,options:i}),(r=r||{}).vocab){const r=e.mappings.get(t);if(null===r)return null;if(a(r)&&"@id"in r)return r["@id"]}const c=t.indexOf(":");if(c>0){const r=t.substr(0,c),a=t.substr(c+1);if("_"===r||0===a.indexOf("//"))return t;n&&n.hasOwnProperty(r)&&v.createTermDefinition({activeCtx:e,localCtx:n,term:r,defined:o,options:i});const s=e.mappings.get(r);if(s&&s._prefix)return s["@id"]+a;if(l(t))return t}if(r.vocab&&"@vocab"in e)t=e["@vocab"]+t;else if(r.base){let r,n;"@base"in e?e["@base"]?(n=u(i.base,e["@base"]),r=u(n,t)):(n=e["@base"],r=t):(n=i.base,r=u(i.base,t)),t=r}return t}function x(e,t){if(!e||"object"!=typeof e||!t||"object"!=typeof t)return e===t;const r=Array.isArray(e);if(r!==Array.isArray(t))return!1;if(r){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!x(e[r],t[r]))return!1;return!0}const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(const r in e){let n=e[r],o=t[r];if("@container"===r&&Array.isArray(n)&&Array.isArray(o)&&(n=n.slice().sort(),o=o.slice().sort()),!x(n,o))return!1}return!0}e.exports=v,v.process=async({activeCtx:e,localCtx:t,options:r,propagate:n=!0,overrideProtected:c=!1,cycles:h=new Set})=>{if(a(t)&&"@context"in t&&i(t["@context"])&&(t=t["@context"]),0===y(t).length)return e;const g=[],m=[({event:e,next:t})=>{g.push(e),t()}];r.eventHandler&&m.push(r.eventHandler);const x=r;r={...r,eventHandler:m};const b=await r.contextResolver.resolve({activeCtx:e,context:t,documentLoader:r.documentLoader,base:r.base});a(b[0].document)&&"boolean"==typeof b[0].document["@propagate"]&&(n=b[0].document["@propagate"]);let E=e;n||E.previousContext||(E=E.clone(),E.previousContext=e);for(const n of b){let{document:i}=n;if(e=E,null===i){if(!c&&0!==Object.keys(e.protected).length)throw new o("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});E=e=v.getInitialContext(r).clone();continue}const y=n.getProcessed(e);if(y){if(x.eventHandler)for(const e of y.events)p({event:e,options:x});E=e=y.context;continue}if(a(i)&&"@context"in i&&(i=i["@context"]),!a(i))throw new o("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:i});E=E.clone();const m=new Map;if("@version"in i){if(1.1!==i["@version"])throw new o("Unsupported JSON-LD version: "+i["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:i});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new o("@version: "+i["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:i});E.processingMode="json-ld-1.1",E["@version"]=i["@version"],m.set("@version",!0)}if(E.processingMode=E.processingMode||e.processingMode,"@base"in i){let e=i["@base"];if(null===e||l(e));else{if(!d(e))throw new o('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:i});e=u(E["@base"],e)}E["@base"]=e,m.set("@base",!0)}if("@vocab"in i){const e=i["@vocab"];if(null===e)delete E["@vocab"];else{if(!s(e))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:i});if(!l(e)&&v.processingMode(E,1))throw new o('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:i});{const t=w(E,e,{vocab:!0,base:!0},void 0,void 0,r);l(t)||r.eventHandler&&p({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:t}},options:r}),E["@vocab"]=t}}m.set("@vocab",!0)}if("@language"in i){const e=i["@language"];if(null===e)delete E["@language"];else{if(!s(e))throw new o('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:i});e.match(f)||r.eventHandler&&p({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:r}),E["@language"]=e.toLowerCase()}m.set("@language",!0)}if("@direction"in i){const t=i["@direction"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @direction not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:i});if(null===t)delete E["@direction"];else{if("ltr"!==t&&"rtl"!==t)throw new o('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:i});E["@direction"]=t}m.set("@direction",!0)}if("@propagate"in i){const r=i["@propagate"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @propagate not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:i});if("boolean"!=typeof r)throw new o("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:t});m.set("@propagate",!0)}if("@import"in i){const n=i["@import"];if("json-ld-1.0"===e.processingMode)throw new o("Invalid JSON-LD syntax; @import not compatible with "+e.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:i});if(!s(n))throw new o("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:t});const a=await r.contextResolver.resolve({activeCtx:e,context:n,documentLoader:r.documentLoader,base:r.base});if(1!==a.length)throw new o("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:t});const c=a[0].getProcessed(e);if(c)i=c;else{const r=a[0].document;if("@import"in r)throw new o("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:t});for(const e in r)i.hasOwnProperty(e)||(i[e]=r[e]);a[0].setProcessed(e,i)}m.set("@import",!0)}m.set("@protected",i["@protected"]||!1);for(const e in i)if(v.createTermDefinition({activeCtx:E,localCtx:i,term:e,defined:m,options:r,overrideProtected:c}),a(i[e])&&"@context"in i[e]){const t=i[e]["@context"];let n=!0;if(s(t)){const e=u(r.base,t);h.has(e)?n=!1:h.add(e)}if(n)try{await v.process({activeCtx:E.clone(),localCtx:i[e]["@context"],overrideProtected:!0,options:r,cycles:h})}catch(t){throw new o("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:i[e]["@context"],term:e})}}n.setProcessed(e,{context:E,events:g})}return E},v.createTermDefinition=({activeCtx:e,localCtx:t,term:r,defined:n,options:c,overrideProtected:d=!1})=>{if(n.has(r)){if(n.get(r))return;throw new o("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}let u;if(n.set(r,!1),t.hasOwnProperty(r)&&(u=t[r]),"@type"===r&&a(u)&&"@set"===(u["@container"]||"@set")&&v.processingMode(e,1.1)){const e=["@container","@id","@protected"],n=Object.keys(u);if(0===n.length||n.some((t=>!e.includes(t))))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r})}else{if(v.isKeyword(r))throw new o("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(r.match(h))return void(c.eventHandler&&p({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:r}},options:c}));if(""===r)throw new o("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t})}const f=e.mappings.get(r);e.mappings.has(r)&&e.mappings.delete(r);let y=!1;if((s(u)||null===u)&&(y=!0,u={"@id":u}),!a(u))throw new o("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const g={};e.mappings.set(r,g),g.reverse=!1;const m=["@container","@id","@language","@reverse","@type"];v.processingMode(e,1.1)&&m.push("@context","@direction","@index","@nest","@prefix","@protected");for(const e in u)if(!m.includes(e))throw new o("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const b=r.indexOf(":");if(g._termHasColon=b>0,"@reverse"in u){if("@id"in u)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in u)throw new o("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const i=u["@reverse"];if(!s(i))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(i.match(h))return c.eventHandler&&p({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:i}},options:c}),void(f?e.mappings.set(r,f):e.mappings.delete(r));const a=w(e,i,{vocab:!0,base:!1},t,n,c);if(!l(a))throw new o("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});g["@id"]=a,g.reverse=!0}else if("@id"in u){let i=u["@id"];if(i&&!s(i))throw new o("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(null===i)g["@id"]=null;else{if(!v.isKeyword(i)&&i.match(h))return c.eventHandler&&p({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:i}},options:c}),void(f?e.mappings.set(r,f):e.mappings.delete(r));if(i!==r){if(i=w(e,i,{vocab:!0,base:!1},t,n,c),!l(i)&&!v.isKeyword(i))throw new o("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(r.match(/(?::[^:])|\//)&&w(e,r,{vocab:!0,base:!1},t,new Map(n).set(r,!0),c)!==i)throw new o("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});g["@id"]=i,g._prefix=y&&!g._termHasColon&&i.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in g))if(g._termHasColon){const o=r.substr(0,b);if(t.hasOwnProperty(o)&&v.createTermDefinition({activeCtx:e,localCtx:t,term:o,defined:n,options:c}),e.mappings.has(o)){const t=r.substr(b+1);g["@id"]=e.mappings.get(o)["@id"]+t}else g["@id"]=r}else if("@type"===r)g["@id"]=r;else{if(!("@vocab"in e))throw new o("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});g["@id"]=e["@vocab"]+r}if((!0===u["@protected"]||!0===n.get("@protected")&&!1!==u["@protected"])&&(e.protected[r]=!0,g.protected=!0),n.set(r,!0),"@type"in u){let r=u["@type"];if(!s(r))throw new o("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@json"===r||"@none"===r){if(v.processingMode(e,1))throw new o(`Invalid JSON-LD syntax; an @context @type value must not be "${r}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else if("@id"!==r&&"@vocab"!==r){if(r=w(e,r,{vocab:!0,base:!1},t,n,c),!l(r))throw new o("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===r.indexOf("_:"))throw new o("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}g["@type"]=r}if("@container"in u){const r=s(u["@container"])?[u["@container"]]:u["@container"]||[],n=["@list","@set","@index","@language"];let a=!0;const c=r.includes("@set");if(v.processingMode(e,1.1)){if(n.push("@graph","@id","@type"),r.includes("@list")){if(1!==r.length)throw new o("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(r.includes("@graph")){if(r.some((e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e)))throw new o("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else a&=r.length<=(c?2:1);if(r.includes("@type")&&(g["@type"]=g["@type"]||"@id",!["@id","@vocab"].includes(g["@type"])))throw new o("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}else a&=!i(u["@container"]),a&=r.length<=1;if(a&=r.every((e=>n.includes(e))),a&=!(c&&r.includes("@list")),!a)throw new o("Invalid JSON-LD syntax; @context @container value must be one of the following: "+n.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(g.reverse&&!r.every((e=>["@index","@set"].includes(e))))throw new o("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});g["@container"]=r}if("@index"in u){if(!("@container"in u)||!g["@container"].includes("@index"))throw new o(`Invalid JSON-LD syntax; @index without @index in @container: "${u["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});if(!s(u["@index"])||0===u["@index"].indexOf("@"))throw new o(`Invalid JSON-LD syntax; @index must expand to an IRI: "${u["@index"]}" on term "${r}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:t});g["@index"]=u["@index"]}if("@context"in u&&(g["@context"]=u["@context"]),"@language"in u&&!("@type"in u)){let e=u["@language"];if(null!==e&&!s(e))throw new o("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),g["@language"]=e}if("@prefix"in u){if(r.match(/:|\//))throw new o("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if(v.isKeyword(g["@id"]))throw new o("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof u["@prefix"])throw new o("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});g._prefix=!0===u["@prefix"]}if("@direction"in u){const e=u["@direction"];if(null!==e&&"ltr"!==e&&"rtl"!==e)throw new o('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:t});g["@direction"]=e}if("@nest"in u){const e=u["@nest"];if(!s(e)||"@nest"!==e&&0===e.indexOf("@"))throw new o("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});g["@nest"]=e}const E=g["@id"];if("@context"===E||"@preserve"===E)throw new o("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t});if(f&&f.protected&&!d&&(e.protected[r]=!0,g.protected=!0,!x(f,g)))throw new o("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:t,term:r})},v.expandIri=(e,t,r,n)=>w(e,t,r,void 0,void 0,n),v.getInitialContext=e=>{const t=JSON.stringify({processingMode:e.processingMode}),r=m.get(t);if(r)return r;const o={processingMode:e.processingMode,mappings:new Map,inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},r=e.fastCurieMap={},n={},o=(e["@language"]||"@none").toLowerCase(),s=e["@direction"],c=e.mappings,l=[...c.keys()].sort(g);for(const e of l){const i=c.get(e);if(null===i)continue;let l=i["@container"]||"@none";if(l=[].concat(l).sort().join(""),null===i["@id"])continue;const d=y(i["@id"]);for(const c of d){let d=t[c];const u=v.isKeyword(c);if(d)u||i._termHasColon||n[c].push(e);else if(t[c]=d={},!u&&!i._termHasColon){n[c]=[e];const t={iri:c,terms:n[c]};c[0]in r?r[c[0]].push(t):r[c[0]]=[t]}if(d[l]||(d[l]={"@language":{},"@type":{},"@any":{}}),d=d[l],a(e,d["@any"],"@none"),i.reverse)a(e,d["@type"],"@reverse");else if("@none"===i["@type"])a(e,d["@any"],"@none"),a(e,d["@language"],"@none"),a(e,d["@type"],"@none");else if("@type"in i)a(e,d["@type"],i["@type"]);else if("@language"in i&&"@direction"in i){const t=i["@language"],r=i["@direction"];a(e,d["@language"],t&&r?`${t}_${r}`.toLowerCase():t?t.toLowerCase():r?`_${r}`:"@null")}else"@language"in i?a(e,d["@language"],(i["@language"]||"@null").toLowerCase()):"@direction"in i?i["@direction"]?a(e,d["@language"],`_${i["@direction"]}`):a(e,d["@language"],"@none"):s?(a(e,d["@language"],`_${s}`),a(e,d["@language"],"@none"),a(e,d["@type"],"@none")):(a(e,d["@language"],o),a(e,d["@language"],"@none"),a(e,d["@type"],"@none"))}}for(const e in r)i(r,e,1);return t},clone:function(){const e={};return e.mappings=n.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,e.protected=n.clone(this.protected),this.previousContext&&(e.previousContext=this.previousContext.clone()),e.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(e["@base"]=this["@base"]),"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e},revertToPreviousContext:function(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===m.size&&m.clear(),m.set(t,o),o;function i(e,t,r){const n=e[t],o=e[t]={};let a,s;for(const e of n)a=e.iri,s=r>=a.length?"":a[r],s in o?o[s].push(e):o[s]=[e];for(const e in o)""!==e&&i(o,e,r+1)}function a(e,t,r){t.hasOwnProperty(r)||(t[r]=e)}},v.getContextValue=(e,t,r)=>{if(null===t){if("@context"===r)return;return null}if(e.mappings.has(t)){const n=e.mappings.get(t);if(c(r))return n;if(n.hasOwnProperty(r))return n[r]}return"@language"===r&&r in e||"@direction"===r&&r in e?e[r]:"@context"!==r?null:void 0},v.processingMode=(e,t)=>t.toString()>="1.1"?!e.processingMode||e.processingMode>="json-ld-"+t.toString():"json-ld-1.0"===e.processingMode,v.isKeyword=e=>{if(!s(e)||"@"!==e[0])return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},8831:(e,t,r)=>{"use strict";const{parseLinkHeader:n,buildHeaders:o}=r(1055),{LINK_HEADER_CONTEXT:i}=r(3770),a=r(4093),s=r(533),{prependBase:c}=r(2278),l=/(^|(\r\n))link:/i;e.exports=({secure:e,headers:t={},xhr:r}={headers:{}})=>(t=o(t),(new s).wrapLoader((async function o(s){if(0!==s.indexOf("http:")&&0!==s.indexOf("https:"))throw new a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:s});if(e&&0!==s.indexOf("https"))throw new a('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:s});let d;try{d=await function(e,t,r){const n=new(e=e||XMLHttpRequest);return new Promise(((e,o)=>{n.onload=()=>e(n),n.onerror=e=>o(e),n.open("GET",t,!0);for(const e in r)n.setRequestHeader(e,r[e]);n.send()}))}(r,s,t)}catch(e){throw new a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:s,cause:e})}if(d.status>=400)throw new a("URL could not be dereferenced: "+d.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:s,httpStatusCode:d.status});let u={contextUrl:null,documentUrl:s,document:d.response},p=null;const f=d.getResponseHeader("Content-Type");let h;if(l.test(d.getAllResponseHeaders())&&(h=d.getResponseHeader("Link")),h&&"application/ld+json"!==f){const e=n(h),t=e[i];if(Array.isArray(t))throw new a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:s});t&&(u.contextUrl=t.target),p=e.alternate,p&&"application/ld+json"==p.type&&!(f||"").match(/^application\/(\w*\+)?json$/)&&(u=await o(c(s,p.target)))}return u})))},1696:(e,t,r)=>{"use strict";const n=r(4093),{isArray:o}=r(832),{asArray:i}=r(1055),a={};function s({event:e,handlers:t}){let r=!0;for(let i=0;r&&i<t.length;++i){r=!1;const a=t[i];if(o(a))r=s({event:e,handlers:a});else if("function"==typeof a)a({event:e,next:()=>{r=!0}});else{if("object"!=typeof a)throw new n("Invalid event handler.","jsonld.InvalidEventHandler",{event:e});e.code in a?a[e.code]({event:e,next:()=>{r=!0}}):r=!0}}return r}e.exports=a,a.defaultEventHandler=null,a.setupEventHandler=({options:e={}})=>{const t=[].concat(e.safe?a.safeEventHandler:[],e.eventHandler?i(e.eventHandler):[],a.defaultEventHandler?a.defaultEventHandler:[]);return 0===t.length?null:t},a.handleEvent=({event:e,options:t})=>{s({event:e,handlers:t.eventHandler})};const c=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);a.safeEventHandler=function({event:e,next:t}){if("warning"===e.level&&c.has(e.code))throw new n("Safe mode validation error.","jsonld.ValidationError",{event:e});t()},a.logEventHandler=function({event:e,next:t}){console.log(`EVENT: ${e.message}`,{event:e}),t()},a.logWarningEventHandler=function({event:e,next:t}){"warning"===e.level&&console.warn(`WARNING: ${e.message}`,{event:e}),t()},a.unhandledEventHandler=function({event:e}){throw new n("No handler for event.","jsonld.UnhandledEvent",{event:e})},a.setDefaultEventHandler=function({eventHandler:e}={}){a.defaultEventHandler=e?i(e):null}},2759:(e,t,r)=>{"use strict";const n=r(4093),{isArray:o,isObject:i,isEmptyObject:a,isString:s,isUndefined:c}=r(832),{isList:l,isValue:d,isGraph:u,isSubject:p}=r(8463),{expandIri:f,getContextValue:h,isKeyword:y,process:g,processingMode:m}=r(4131),{isAbsolute:v}=r(2278),{REGEX_BCP47:w,REGEX_KEYWORD:x,addValue:b,asArray:E,getValues:S,validateTypeValue:T}=r(1055),{handleEvent:O}=r(1696),C={};function I({value:e,count:t,options:r}){if(0===t||"@value"in e||"@list"in e||1===t&&"@id"in e){if(r.eventHandler){let n,o;0===t?(n="empty object",o="Dropping empty object."):"@value"in e?(n="object with only @value",o="Dropping object with only @value."):"@list"in e?(n="object with only @list",o="Dropping object with only @list."):1===t&&"@id"in e&&(n="object with only @id",o="Dropping object with only @id."),O({event:{type:["JsonLdEvent"],code:n,level:"warning",message:o,details:{value:e}},options:r})}return null}return e}async function j({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:u,expandedParent:x,options:S={},insideList:A,typeKey:P,typeScopedContext:R}){const D=Object.keys(u).sort(),_=[];let k;const M=u[P]&&"@json"===f(e,o(u[P])?u[P][0]:u[P],{vocab:!0},{...S,typeExpansion:!0});for(const j of D){let A,P=u[j];if("@context"===j)continue;const D=f(e,j,{vocab:!0},S);if(null===D||!v(D)&&!y(D)){S.eventHandler&&O({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:j,expandedProperty:D}},options:S});continue}if(y(D)){if("@reverse"===r)throw new n("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:P});if(D in x&&"@included"!==D&&"@type"!==D)throw new n("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:D})}if("@id"===D){if(!s(P)){if(!S.isFrame)throw new n('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:P});if(i(P)){if(!a(P))throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P})}else{if(!o(P))throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P});if(!P.every((e=>s(e))))throw new n('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:P})}}b(x,"@id",E(P).map((t=>{if(s(t)){const r=f(e,t,{base:!0},S);return S.eventHandler&&(null===r?O(null===t?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:t}},options:S}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:S}):v(r)||O({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:t,expandedId:r}},options:S})),r}return t})),{propertyIsArray:S.isFrame});continue}if("@type"===D){i(P)&&(P=Object.fromEntries(Object.entries(P).map((([e,t])=>[f(R,e,{vocab:!0}),E(t).map((e=>f(R,e,{base:!0,vocab:!0},{...S,typeExpansion:!0})))])))),T(P,S.isFrame),b(x,"@type",E(P).map((e=>{if(s(e)){const t=f(R,e,{base:!0,vocab:!0},{...S,typeExpansion:!0});return"@json"===t||v(t)||S.eventHandler&&O({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:e}},options:S}),t}return e})),{propertyIsArray:!!S.isFrame});continue}if("@included"===D&&m(e,1.1)){const r=E(await C.expand({activeCtx:e,activeProperty:t,element:P,options:S}));if(!r.every((e=>p(e))))throw new n("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:P});b(x,"@included",r,{propertyIsArray:!0});continue}if("@graph"===D&&!i(P)&&!o(P))throw new n('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:P});if("@value"===D){k=P,M&&m(e,1.1)?x["@value"]=P:b(x,"@value",P,{propertyIsArray:S.isFrame});continue}if("@language"===D){if(null===P)continue;if(!s(P)&&!S.isFrame)throw new n('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:P});P=E(P).map((e=>s(e)?e.toLowerCase():e));for(const e of P)s(e)&&!e.match(w)&&S.eventHandler&&O({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:S});b(x,"@language",P,{propertyIsArray:S.isFrame});continue}if("@direction"===D){if(!s(P)&&!S.isFrame)throw new n('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:P});P=E(P);for(const e of P)if(s(e)&&"ltr"!==e&&"rtl"!==e)throw new n('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:P});b(x,"@direction",P,{propertyIsArray:S.isFrame});continue}if("@index"===D){if(!s(P))throw new n('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:P});b(x,"@index",P);continue}if("@reverse"===D){if(!i(P))throw new n('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:P});if(A=await C.expand({activeCtx:e,activeProperty:"@reverse",element:P,options:S}),"@reverse"in A)for(const e in A["@reverse"])b(x,e,A["@reverse"][e],{propertyIsArray:!0});let t=x["@reverse"]||null;for(const e in A){if("@reverse"===e)continue;null===t&&(t=x["@reverse"]={}),b(t,e,[],{propertyIsArray:!0});const r=A[e];for(let o=0;o<r.length;++o){const i=r[o];if(d(i)||l(i))throw new n('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:A});b(t,e,i,{propertyIsArray:!0})}}continue}if("@nest"===D){_.push(j);continue}let U=e;const V=h(e,j,"@context");c(V)||(U=await g({activeCtx:e,localCtx:V,propagate:!0,overrideProtected:!0,options:S}));const B=h(U,j,"@container")||[];if(B.includes("@language")&&i(P))A=N(U,P,h(U,j,"@direction"),S);else if(B.includes("@index")&&i(P)){const t=B.includes("@graph"),r=h(U,j,"@index")||"@index",n="@index"!==r&&f(e,r,{vocab:!0},S);A=await L({activeCtx:U,options:S,activeProperty:j,value:P,asGraph:t,indexKey:r,propertyIndex:n})}else if(B.includes("@id")&&i(P)){const e=B.includes("@graph");A=await L({activeCtx:U,options:S,activeProperty:j,value:P,asGraph:e,indexKey:"@id"})}else if(B.includes("@type")&&i(P))A=await L({activeCtx:U.revertToPreviousContext(),options:S,activeProperty:j,value:P,asGraph:!1,indexKey:"@type"});else{const n="@list"===D;if(n||"@set"===D){let e=t;n&&"@graph"===r&&(e=null),A=await C.expand({activeCtx:U,activeProperty:e,element:P,options:S,insideList:n})}else A="@json"===h(e,j,"@type")?{"@type":"@json","@value":P}:await C.expand({activeCtx:U,activeProperty:j,element:P,options:S,insideList:!1})}if(null!==A||"@value"===D){if("@list"!==D&&!l(A)&&B.includes("@list")&&(A={"@list":E(A)}),B.includes("@graph")&&!B.some((e=>"@id"===e||"@index"===e))){A=E(A);const e=Object.keys(A[0]).length;if(!S.isFrame&&null===I({value:A[0],count:e,options:S}))continue;A=A.map((e=>({"@graph":E(e)})))}if(U.mappings.has(j)&&U.mappings.get(j).reverse){const e=x["@reverse"]=x["@reverse"]||{};A=E(A);for(let t=0;t<A.length;++t){const r=A[t];if(d(r)||l(r))throw new n('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:A});b(e,D,r,{propertyIsArray:!0})}}else b(x,D,A,{propertyIsArray:!0})}}if("@value"in x)if("@json"===x["@type"]&&m(e,1.1));else if((i(k)||o(k))&&!S.isFrame)throw new n('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:k});for(const a of _){const s=o(u[a])?u[a]:[u[a]];for(const o of s){if(!i(o)||Object.keys(o).some((t=>"@value"===f(e,t,{vocab:!0},S))))throw new n("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:o});await j({activeCtx:e,activeProperty:t,expandedActiveProperty:r,element:o,expandedParent:x,options:S,insideList:A,typeScopedContext:R,typeKey:P})}}}function A({activeCtx:e,activeProperty:t,value:r,options:n}){if(null==r)return null;const o=f(e,t,{vocab:!0},n);if("@id"===o)return f(e,r,{base:!0},n);if("@type"===o)return f(e,r,{vocab:!0,base:!0},{...n,typeExpansion:!0});const i=h(e,t,"@type");if(("@id"===i||"@graph"===o)&&s(r)){const o=f(e,r,{base:!0},n);return null===o&&r.match(x)&&n.eventHandler&&O({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:t}},options:n}),{"@id":o}}if("@vocab"===i&&s(r))return{"@id":f(e,r,{vocab:!0,base:!0},n)};if(y(o))return r;const a={};if(i&&!["@id","@vocab","@none"].includes(i))a["@type"]=i;else if(s(r)){const r=h(e,t,"@language");null!==r&&(a["@language"]=r);const n=h(e,t,"@direction");null!==n&&(a["@direction"]=n)}return["boolean","number","string"].includes(typeof r)||(r=r.toString()),a["@value"]=r,a}function N(e,t,r,i){const a=[],c=Object.keys(t).sort();for(const l of c){const c=f(e,l,{vocab:!0},i);let d=t[l];o(d)||(d=[d]);for(const e of d){if(null===e)continue;if(!s(e))throw new n("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const o={"@value":e};"@none"!==c&&(l.match(w)||i.eventHandler&&O({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:l}},options:i}),o["@language"]=l.toLowerCase()),r&&(o["@direction"]=r),a.push(o)}}return a}async function L({activeCtx:e,options:t,activeProperty:r,value:i,asGraph:a,indexKey:s,propertyIndex:l}){const p=[],y=Object.keys(i).sort(),m="@type"===s;for(let v of y){if(m){const r=h(e,v,"@context");c(r)||(e=await g({activeCtx:e,localCtx:r,propagate:!1,options:t}))}let y,w=i[v];o(w)||(w=[w]),w=await C.expand({activeCtx:e,activeProperty:r,element:w,options:t,insideList:!1,insideIndex:!0}),y=l?"@none"===v?"@none":A({activeCtx:e,activeProperty:s,value:v,options:t}):f(e,v,{vocab:!0},t),"@id"===s?v=f(e,v,{base:!0},t):m&&(v=y);for(let e of w){if(a&&!u(e)&&(e={"@graph":[e]}),"@type"===s)"@none"===y||(e["@type"]?e["@type"]=[v].concat(e["@type"]):e["@type"]=[v]);else{if(d(e)&&!["@language","@type","@index"].includes(s))throw new n(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${s}".`,"jsonld.SyntaxError",{code:"invalid value object",value:e});l?"@none"!==y&&b(e,l,y,{propertyIsArray:!0,prependValue:!0}):"@none"===y||s in e||(e[s]=v)}p.push(e)}}return p}e.exports=C,C.expand=async({activeCtx:e,activeProperty:t=null,element:r,options:l={},insideList:d=!1,insideIndex:u=!1,typeScopedContext:p=null})=>{if(null==r)return null;if("@default"===t&&(l=Object.assign({},l,{isFrame:!1})),!o(r)&&!i(r))return d||null!==t&&"@graph"!==f(e,t,{vocab:!0},l)?A({activeCtx:e,activeProperty:t,value:r,options:l}):(l.eventHandler&&O({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:r}},options:l}),null);if(o(r)){let n=[];const i=h(e,t,"@container")||[];d=d||i.includes("@list");for(let i=0;i<r.length;++i){let a=await C.expand({activeCtx:e,activeProperty:t,element:r[i],options:l,insideIndex:u,typeScopedContext:p});d&&o(a)&&(a={"@list":a}),null!==a&&(o(a)?n=n.concat(a):n.push(a))}return n}const y=f(e,t,{vocab:!0},l),w=h(e,t,"@context");p=p||(e.previousContext?e:null);let x=Object.keys(r).sort(),b=!u;if(b&&p&&x.length<=2&&!x.includes("@context"))for(const t of x){const r=f(p,t,{vocab:!0},l);if("@value"===r){b=!1,e=p;break}if("@id"===r&&1===x.length){b=!1;break}}b&&(e=e.revertToPreviousContext()),c(w)||(e=await g({activeCtx:e,localCtx:w,propagate:!0,overrideProtected:!0,options:l})),"@context"in r&&(e=await g({activeCtx:e,localCtx:r["@context"],options:l})),p=e;let T=null;for(const t of x)if("@type"===f(e,t,{vocab:!0},l)){T=T||t;const n=r[t],o=Array.isArray(n)?n.length>1?n.slice().sort():n:[n];for(const t of o){const r=h(p,t,"@context");c(r)||(e=await g({activeCtx:e,localCtx:r,options:l,propagate:!1}))}}let N={};await j({activeCtx:e,activeProperty:t,expandedActiveProperty:y,element:r,expandedParent:N,options:l,insideList:d,typeKey:T,typeScopedContext:p}),x=Object.keys(N);let L=x.length;if("@value"in N){if("@type"in N&&("@language"in N||"@direction"in N))throw new n('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:N});let t=L-1;if("@type"in N&&(t-=1),"@index"in N&&(t-=1),"@language"in N&&(t-=1),"@direction"in N&&(t-=1),0!==t)throw new n('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:N});const r=null===N["@value"]?[]:E(N["@value"]),o=S(N,"@type");if(m(e,1.1)&&o.includes("@json")&&1===o.length);else if(0===r.length)l.eventHandler&&O({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:N}},options:l}),N=null;else{if(!r.every((e=>s(e)||a(e)))&&"@language"in N)throw new n("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:N});if(!o.every((e=>v(e)&&!(s(e)&&0===e.indexOf("_:"))||a(e))))throw new n('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:N})}}else if("@type"in N&&!o(N["@type"]))N["@type"]=[N["@type"]];else if("@set"in N||"@list"in N){if(L>1&&(2!==L||!("@index"in N)))throw new n('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:N});"@set"in N&&(N=N["@set"],x=Object.keys(N),L=x.length)}else 1===L&&"@language"in N&&(l.eventHandler&&O({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:N}},options:l}),N=null);return!i(N)||l.keepFreeFloatingNodes||d||null!==t&&"@graph"!==y&&!(h(e,t,"@container")||[]).includes("@graph")||(N=I({value:N,count:L,options:l})),N}},1565:(e,t,r)=>{"use strict";const{isSubjectReference:n}=r(8463),{createMergedNodeMap:o}=r(2664),i={};e.exports=i,i.flatten=e=>{const t=o(e),r=[],i=Object.keys(t).sort();for(let e=0;e<i.length;++e){const o=t[i[e]];n(o)||r.push(o)}return r}},3859:(e,t,r)=>{"use strict";const{isKeyword:n}=r(4131),o=r(8463),i=r(832),a=r(1055),s=r(2278),c=r(4093),{createNodeMap:l,mergeNodeMapGraphs:d}=r(2664),u={};function p(e){const t={};for(const r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function f(e,t,r){for(let n=r.length-1;n>=0;--n){const o=r[n];if(o.graph===t&&o.subject["@id"]===e["@id"])return!0}return!1}function h(e,t,r){const n="@"+r;let o=n in e?e[n][0]:t[r];if("embed"===r)if(!0===o)o="@once";else if(!1===o)o="@never";else if("@always"!==o&&"@never"!==o&&"@link"!==o&&"@first"!==o&&"@last"!==o&&"@once"!==o)throw new c("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:e});return o}function y(e){if(!i.isArray(e)||1!==e.length||!i.isObject(e[0]))throw new c("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e});if("@id"in e[0])for(const t of a.asArray(e[0]["@id"]))if(!i.isObject(t)&&!s.isAbsolute(t)||i.isString(t)&&0===t.indexOf("_:"))throw new c("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e});if("@type"in e[0])for(const t of a.asArray(e[0]["@type"]))if(!i.isObject(t)&&!s.isAbsolute(t)&&"@json"!==t||i.isString(t)&&0===t.indexOf("_:"))throw new c("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:e})}function g(e,t,r,s){let c=!0,l=!1;for(const d in r){let u=!1;const p=a.getValues(t,d),f=0===a.getValues(r,d).length;if("@id"===d){if(i.isEmptyObject(r["@id"][0]||{})?u=!0:r["@id"].length>=0&&(u=r["@id"].includes(p[0])),!s.requireAll)return u}else if("@type"===d){if(c=!1,f){if(p.length>0)return!1;u=!0}else if(1===r["@type"].length&&i.isEmptyObject(r["@type"][0]))u=p.length>0;else for(const e of r["@type"])u=!(!i.isObject(e)||!("@default"in e))||u||p.some((t=>t===e));if(!s.requireAll)return u}else{if(n(d))continue;{const t=a.getValues(r,d)[0];let n=!1;if(t&&(y([t]),n="@default"in t),c=!1,0===p.length&&n)continue;if(p.length>0&&f)return!1;if(void 0===t){if(p.length>0)return!1;u=!0}else if(o.isList(t)){const r=t["@list"][0];if(o.isList(p[0])){const t=p[0]["@list"];o.isValue(r)?u=t.some((e=>b(r,e))):(o.isSubject(r)||o.isSubjectReference(r))&&(u=t.some((t=>x(e,r,t,s))))}}else u=o.isValue(t)?p.some((e=>b(t,e))):o.isSubjectReference(t)?p.some((r=>x(e,t,r,s))):!!i.isObject(t)&&p.length>0}}if(!u&&s.requireAll)return!1;l=l||u}return c||l}function m(e,t){const r=e.uniqueEmbeds[e.graph],n=r[t],o=n.parent,s=n.property,c={"@id":t};if(i.isArray(o)){for(let e=0;e<o.length;++e)if(a.compareValues(o[e],c)){o[e]=c;break}}else{const e=i.isArray(o[s]);a.removeValue(o,s,c,{propertyIsArray:e}),a.addValue(o,s,c,{propertyIsArray:e})}const l=e=>{const t=Object.keys(r);for(const n of t)n in r&&i.isObject(r[n].parent)&&r[n].parent["@id"]===e&&(delete r[n],l(n))};l(t)}function v(e,t){if(i.isArray(e))return e.map((e=>v(e,t)));if(i.isObject(e)){if("@preserve"in e)return e["@preserve"][0];if(o.isValue(e))return e;if(o.isList(e))return e["@list"]=v(e["@list"],t),e;if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e)"@id"===r&&t.bnodesToClear.includes(e[r])?delete e["@id"]:e[r]=v(e[r],t)}return e}function w(e,t,r){i.isObject(e)?a.addValue(e,t,r,{propertyIsArray:!0}):e.push(r)}function x(e,t,r,n){if(!("@id"in r))return!1;const o=e.subjects[r["@id"]];return o&&g(e,o,t,n)}function b(e,t){const r=t["@value"],n=t["@type"],o=t["@language"],a=e["@value"]?i.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?i.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],c=e["@language"]?i.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===s.length&&0===c.length||!(!a.includes(r)&&!i.isEmptyObject(a[0]))&&!!(!n&&0===s.length||s.includes(n)||n&&i.isEmptyObject(s[0]))&&!!(!o&&0===c.length||c.includes(o)||o&&i.isEmptyObject(c[0]))}e.exports=u,u.frameMergedOrDefault=(e,t,r)=>{const n={options:r,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},o=new a.IdentifierIssuer("_:b");l(e,n.graphMap,"@default",o),r.merged&&(n.graphMap["@merged"]=d(n.graphMap),n.graph="@merged"),n.subjects=n.graphMap[n.graph];const i=[];return u.frame(n,Object.keys(n.subjects).sort(),t,i),r.pruneBlankNodeIdentifiers&&(r.bnodesToClear=Object.keys(n.bnodeMap).filter((e=>1===n.bnodeMap[e].length))),r.link={},v(i,r)},u.frame=(e,t,r,s,l=null)=>{y(r),r=r[0];const d=e.options,v={embed:h(r,d,"embed"),explicit:h(r,d,"explicit"),requireAll:h(r,d,"requireAll")};e.link.hasOwnProperty(e.graph)||(e.link[e.graph]={});const x=e.link[e.graph],E=function(e,t,r,n){const o={};for(const i of t){const t=e.graphMap[e.graph][i];g(e,t,r,n)&&(o[i]=t)}return o}(e,t,r,v),S=Object.keys(E).sort();for(const y of S){const g=E[y];if(null===l?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{},"@link"===v.embed&&y in x){w(s,l,x[y]);continue}const S={"@id":y};if(0===y.indexOf("_:")&&a.addValue(e.bnodeMap,y,S,{propertyIsArray:!0}),x[y]=S,("@first"===v.embed||"@last"===v.embed)&&e.is11)throw new c("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:r});if(e.embedded||!e.uniqueEmbeds[e.graph].hasOwnProperty(y))if(!e.embedded||"@never"!==v.embed&&!f(g,e.graph,e.subjectStack))if(!e.embedded||"@first"!=v.embed&&"@once"!=v.embed||!e.uniqueEmbeds[e.graph].hasOwnProperty(y)){if("@last"===v.embed&&y in e.uniqueEmbeds[e.graph]&&m(e,y),e.uniqueEmbeds[e.graph][y]={parent:s,property:l},e.subjectStack.push({subject:g,graph:e.graph}),y in e.graphMap){let t=!1,n=null;"@graph"in r?(n=r["@graph"][0],t=!("@merged"===y||"@default"===y),i.isObject(n)||(n={})):(t="@merged"!==e.graph,n={}),t&&u.frame({...e,graph:y,embedded:!1},Object.keys(e.graphMap[y]).sort(),[n],S,"@graph")}"@included"in r&&u.frame({...e,embedded:!1},t,r["@included"],S,"@included");for(const t of Object.keys(g).sort())if(n(t)){if(S[t]=a.clone(g[t]),"@type"===t)for(const t of g["@type"])0===t.indexOf("_:")&&a.addValue(e.bnodeMap,t,S,{propertyIsArray:!0})}else if(!v.explicit||t in r)for(const n of g[t]){const i=t in r?r[t]:p(v);if(o.isList(n)){const i=r[t]&&r[t][0]&&r[t][0]["@list"]?r[t][0]["@list"]:p(v),s={"@list":[]};w(S,t,s);const c=n["@list"];for(const t of c)o.isSubjectReference(t)?u.frame({...e,embedded:!0},[t["@id"]],i,s,"@list"):w(s,"@list",a.clone(t))}else o.isSubjectReference(n)?u.frame({...e,embedded:!0},[n["@id"]],i,S,t):b(i[0],n)&&w(S,t,a.clone(n))}for(const e of Object.keys(r).sort()){if("@type"===e){if(!i.isObject(r[e][0])||!("@default"in r[e][0]))continue}else if(n(e))continue;const t=r[e][0]||{};if(!h(t,d,"omitDefault")&&!(e in S)){let r="@null";"@default"in t&&(r=a.clone(t["@default"])),i.isArray(r)||(r=[r]),S[e]=[{"@preserve":r}]}}for(const t of Object.keys(r["@reverse"]||{}).sort()){const n=r["@reverse"][t];for(const r of Object.keys(e.subjects))a.getValues(e.subjects[r],t).some((e=>e["@id"]===y))&&(S["@reverse"]=S["@reverse"]||{},a.addValue(S["@reverse"],t,[],{propertyIsArray:!0}),u.frame({...e,embedded:!0},[r],n,S["@reverse"][t],l))}w(s,l,S),e.subjectStack.pop()}else w(s,l,S);else w(s,l,S)}},u.cleanupNull=(e,t)=>{if(i.isArray(e))return e.map((e=>u.cleanupNull(e,t))).filter((e=>e));if("@null"===e)return null;if(i.isObject(e)){if("@id"in e){const r=e["@id"];if(t.link.hasOwnProperty(r)){const n=t.link[r].indexOf(e);if(-1!==n)return t.link[r][n];t.link[r].push(e)}else t.link[r]=[e]}for(const r in e)e[r]=u.cleanupNull(e[r],t)}return e}},5076:(e,t,r)=>{"use strict";const n=r(4093),o=r(8463),i=r(832),{REGEX_BCP47:a,addValue:s}=r(1055),{handleEvent:c}=r(1696),{RDF_LIST:l,RDF_FIRST:d,RDF_REST:u,RDF_NIL:p,RDF_TYPE:f,RDF_JSON_LITERAL:h,XSD_BOOLEAN:y,XSD_DOUBLE:g,XSD_INTEGER:m,XSD_STRING:v}=r(3770),w={};function x(e,t,r,o){if(e.termType.endsWith("Node"))return{"@id":e.value};const s={"@value":e.value};if(e.language)e.language.match(a)||o.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e.language}},options:o}),s["@language"]=e.language;else{let l=e.datatype.value;if(l||(l=v),l===h){l="@json";try{s["@value"]=JSON.parse(s["@value"])}catch(e){throw new n("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:s["@value"],cause:e})}}if(t){if(l===y)"true"===s["@value"]?s["@value"]=!0:"false"===s["@value"]&&(s["@value"]=!1);else if(i.isNumeric(s["@value"]))if(l===m){const e=parseInt(s["@value"],10);e.toFixed(0)===s["@value"]&&(s["@value"]=e)}else l===g&&(s["@value"]=parseFloat(s["@value"]));[y,m,g,v].includes(l)||(s["@type"]=l)}else if("i18n-datatype"===r&&l.startsWith("https://www.w3.org/ns/i18n#")){const[,e,t]=l.split(/[#_]/);e.length>0&&(s["@language"]=e,e.match(a)||o.eventHandler&&c({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:e}},options:o})),s["@direction"]=t}else l!==v&&(s["@type"]=l)}return s}e.exports=w,w.fromRDF=async(e,t)=>{const r={},n={"@default":r},a={},{useRdfType:c=!1,useNativeTypes:h=!1,rdfDirection:y=null}=t;for(const o of e){const e="DefaultGraph"===o.graph.termType?"@default":o.graph.value;e in n||(n[e]={}),"@default"===e||e in r||(r[e]={"@id":e});const i=n[e],l=o.subject.value,d=o.predicate.value,u=o.object;l in i||(i[l]={"@id":l});const g=i[l],m=u.termType.endsWith("Node");if(m&&!(u.value in i)&&(i[u.value]={"@id":u.value}),d===f&&!c&&m){s(g,"@type",u.value,{propertyIsArray:!0});continue}const v=x(u,h,y,t);if(s(g,d,v,{propertyIsArray:!0}),m)if(u.value===p){const e=i[u.value];"usages"in e||(e.usages=[]),e.usages.push({node:g,property:d,value:v})}else u.value in a?a[u.value]=!1:a[u.value]={node:g,property:d,value:v}}for(const e in n){const t=n[e];if(!(p in t))continue;const r=t[p];if(r.usages){for(let e of r.usages){let r=e.node,n=e.property,s=e.value;const c=[],p=[];let f=Object.keys(r).length;for(;n===u&&i.isObject(a[r["@id"]])&&i.isArray(r[d])&&1===r[d].length&&i.isArray(r[u])&&1===r[u].length&&(3===f||4===f&&i.isArray(r["@type"])&&1===r["@type"].length&&r["@type"][0]===l)&&(c.push(r[d][0]),p.push(r["@id"]),e=a[r["@id"]],r=e.node,n=e.property,s=e.value,f=Object.keys(r).length,o.isBlankNode(r)););delete s["@id"],s["@list"]=c.reverse();for(const e of p)delete t[e]}delete r.usages}}const g=[],m=Object.keys(r).sort();for(const e of m){const t=r[e];if(e in n){const r=t["@graph"]=[],i=n[e],a=Object.keys(i).sort();for(const e of a){const t=i[e];o.isSubjectReference(t)||r.push(t)}}o.isSubjectReference(t)||g.push(t)}return g}},8463:(e,t,r)=>{"use strict";const n=r(832),o={};e.exports=o,o.isSubject=e=>!(!n.isObject(e)||"@value"in e||"@set"in e||"@list"in e)&&(Object.keys(e).length>1||!("@id"in e)),o.isSubjectReference=e=>n.isObject(e)&&1===Object.keys(e).length&&"@id"in e,o.isValue=e=>n.isObject(e)&&"@value"in e,o.isList=e=>n.isObject(e)&&"@list"in e,o.isGraph=e=>n.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter((e=>"@id"!==e&&"@index"!==e)).length,o.isSimpleGraph=e=>o.isGraph(e)&&!("@id"in e),o.isBlankNode=e=>{if(n.isObject(e)){if("@id"in e){const t=e["@id"];return!n.isString(t)||0===t.indexOf("_:")}return 0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)}return!1}},6805:(e,t,r)=>{const n=r(7055),o=r(7222),i=r(1055),a=r(8058),s=i.IdentifierIssuer,c=r(4093),l=r(9593),d=r(9048),{expand:u}=r(2759),{flatten:p}=r(1565),{fromRDF:f}=r(5076),{toRDF:h}=r(9382),{frameMergedOrDefault:y,cleanupNull:g}=r(3859),{isArray:m,isObject:v,isString:w}=r(832),{isSubjectReference:x}=r(8463),{expandIri:b,getInitialContext:E,process:S,processingMode:T}=r(4131),{compact:O,compactIri:C}=r(3251),{createNodeMap:I,createMergedNodeMap:j,mergeNodeMaps:A}=r(2664),{logEventHandler:N,logWarningEventHandler:L,safeEventHandler:P,setDefaultEventHandler:R,setupEventHandler:D,strictEventHandler:_,unhandledEventHandler:k}=r(1696),M=function(e){const t={},M=new l({max:100});function U(t,{documentLoader:r=e.documentLoader,...n}){if(t&&"compactionMap"in t)throw new c('"compactionMap" not supported.',"jsonld.OptionsError");if(t&&"expansionMap"in t)throw new c('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:r},n,t,{eventHandler:D({options:t})})}return e.compact=async function(t,r,n){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===r)throw new c("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;(n=U(n,{base:w(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new s("_:b"),contextResolver:new a({sharedCache:M})})).link&&(n.skipExpansion=!0),n.compactToRelative||delete n.base,o=n.skipExpansion?t:await e.expand(t,n);const l=await e.processContext(E(n),r,n);let d=await O({activeCtx:l,element:o,options:n});n.compactArrays&&!n.graph&&m(d)?1===d.length?d=d[0]:0===d.length&&(d={}):n.graph&&v(d)&&(d=[d]),v(r)&&"@context"in r&&(r=r["@context"]),r=i.clone(r),m(r)||(r=[r]);const u=r;r=[];for(let e=0;e<u.length;++e)(!v(u[e])||Object.keys(u[e]).length>0)&&r.push(u[e]);const p=r.length>0;if(1===r.length&&(r=r[0]),m(d)){const e=C({activeCtx:l,iri:"@graph",relativeTo:{vocab:!0}}),t=d;d={},p&&(d["@context"]=r),d[e]=t}else if(v(d)&&p){const e=d;d={"@context":r};for(const t in e)d[t]=e[t]}return d},e.expand=async function(t,r){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const n={},o=[];if("expandContext"in(r=U(r,{keepFreeFloatingNodes:!1,contextResolver:new a({sharedCache:M})}))){const e=i.clone(r.expandContext);v(e)&&"@context"in e?n.expandContext=e:n.expandContext={"@context":e},o.push(n.expandContext)}let s;if(w(t)){const i=await e.get(t,r);s=i.documentUrl,n.input=i.document,i.contextUrl&&(n.remoteContext={"@context":i.contextUrl},o.push(n.remoteContext))}else n.input=i.clone(t);"base"in r||(r.base=s||"");let c=E(r);for(const e of o)c=await S({activeCtx:c,localCtx:e,options:r});let l=await u({activeCtx:c,element:n.input,options:r});return v(l)&&"@graph"in l&&1===Object.keys(l).length?l=l["@graph"]:null===l&&(l=[]),m(l)||(l=[l]),l},e.flatten=async function(t,r,n){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");r="function"==typeof r?null:r||null,n=U(n,{base:w(t)?t:"",contextResolver:new a({sharedCache:M})});const o=await e.expand(t,n),i=p(o);return null===r?i:(n.graph=!0,n.skipExpansion=!0,await e.compact(i,r,n))},e.frame=async function(t,r,n){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(n=U(n,{base:w(t)?t:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new a({sharedCache:M})}),w(r)){const t=await e.get(r,n);if(r=t.document,t.contextUrl){let e=r["@context"];e?m(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,r["@context"]=e}}const o=r&&r["@context"]||{},i=await e.processContext(E(n),o,n);n.hasOwnProperty("omitGraph")||(n.omitGraph=T(i,1.1)),n.hasOwnProperty("pruneBlankNodeIdentifiers")||(n.pruneBlankNodeIdentifiers=T(i,1.1));const s=await e.expand(t,n),c={...n};c.isFrame=!0,c.keepFreeFloatingNodes=!0;const l=await e.expand(r,c),d=Object.keys(r).map((e=>b(i,e,{vocab:!0})));c.merged=!d.includes("@graph"),c.is11=T(i,1.1);const u=y(s,l,c);c.graph=!n.omitGraph,c.skipExpansion=!0,c.link={},c.framing=!0;let p=await e.compact(u,o,c);return c.link={},p=g(p,c),p},e.link=async function(t,r,n){const o={};return r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n)},e.normalize=e.canonize=async function(t,r){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(r=U(r,{base:w(t)?t:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new a({sharedCache:M})}))){if("application/n-quads"!==r.inputFormat&&"application/nquads"!==r.inputFormat)throw new c("Unknown canonicalization input format.","jsonld.CanonizeError");const e=d.parse(t);return n.canonize(e,r)}const o={...r};delete o.format,o.produceGeneralizedRdf=!1;const i=await e.toRDF(t,o);return n.canonize(i,r)},e.fromRDF=async function(e,r){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");r=U(r,{format:w(e)?"application/n-quads":void 0});const{format:n}=r;let{rdfParser:o}=r;if(n){if(o=o||t[n],!o)throw new c("Unknown input format.","jsonld.UnknownFormat",{format:n})}else o=()=>e;const i=await o(e);return f(i,r)},e.toRDF=async function(t,r){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let n;n=(r=U(r,{base:w(t)?t:"",skipExpansion:!1,contextResolver:new a({sharedCache:M})})).skipExpansion?t:await e.expand(t,r);const o=h(n,r);if(r.format){if("application/n-quads"===r.format||"application/nquads"===r.format)return d.serialize(o);throw new c("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}return o},e.createNodeMap=async function(t,r){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");r=U(r,{base:w(t)?t:"",contextResolver:new a({sharedCache:M})});const n=await e.expand(t,r);return j(n,r)},e.merge=async function(t,r,n){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!m(t))throw new TypeError('Could not merge, "docs" must be an array.');r="function"==typeof r?null:r||null,n=U(n,{contextResolver:new a({sharedCache:M})});const o=await Promise.all(t.map((t=>{const r={...n};return e.expand(t,r)})));let c=!0;"mergeNodes"in n&&(c=n.mergeNodes);const l=n.issuer||new s("_:b"),d={"@default":{}};for(let e=0;e<o.length;++e){const t=i.relabelBlankNodes(o[e],{issuer:new s("_:b"+e+"-")}),r=c||0===e?d:{"@default":{}};if(I(t,r,"@default",l),r!==d)for(const e in r){const t=r[e];if(!(e in d)){d[e]=t;continue}const n=d[e];for(const e in t)e in n||(n[e]=t[e])}}const u=A(d),p=[],f=Object.keys(u).sort();for(let e=0;e<f.length;++e){const t=u[f[e]];x(t)||p.push(t)}return null===r?p:(n.graph=!0,n.skipExpansion=!0,await e.compact(p,r,n))},Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=t}),e.documentLoader=async e=>{throw new c("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})},e.get=async function(t,r){let n;n="function"==typeof r.documentLoader?r.documentLoader:e.documentLoader;const o=await n(t);try{if(!o.document)throw new c("No remote document found at the given URL.","jsonld.NullRemoteDocument");w(o.document)&&(o.document=JSON.parse(o.document))}catch(e){throw new c("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:o})}return o},e.processContext=async function(e,t,r){return r=U(r,{base:"",contextResolver:new a({sharedCache:M})}),null===t?E(r):(t=i.clone(t),v(t)&&"@context"in t||(t={"@context":t}),S({activeCtx:e,localCtx:t,options:r}))},e.getContextValue=r(4131).getContextValue,e.documentLoaders={},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new c('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.registerRDFParser=function(e,r){t[e]=r},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",d.parse),e.registerRDFParser("application/nquads",d.parse),e.url=r(2278),e.logEventHandler=N,e.logWarningEventHandler=L,e.safeEventHandler=P,e.setDefaultEventHandler=R,e.strictEventHandler=_,e.unhandledEventHandler=k,e.util=i,Object.assign(e,i),e.promises=e,e.RequestQueue=r(533),e.JsonLdProcessor=r(731)(e),o.setupGlobals(e),o.setupDocumentLoaders(e),e},U=function(){return M((function(){return U()}))};M(U),e.exports=U},2664:(e,t,r)=>{"use strict";const{isKeyword:n}=r(4131),o=r(8463),i=r(832),a=r(1055),s=r(4093),c={};e.exports=c,c.createMergedNodeMap=(e,t)=>{const r=(t=t||{}).issuer||new a.IdentifierIssuer("_:b"),n={"@default":{}};return c.createNodeMap(e,n,"@default",r),c.mergeNodeMaps(n)},c.createNodeMap=(e,t,r,l,d,u)=>{if(i.isArray(e)){for(const n of e)c.createNodeMap(n,t,r,l,void 0,u);return}if(!i.isObject(e))return void(u&&u.push(e));if(o.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=l.getId(t))}return void(u&&u.push(e))}if(u&&o.isList(e)){const n=[];return c.createNodeMap(e["@list"],t,r,l,d,n),void u.push({"@list":n})}if("@type"in e){const t=e["@type"];for(const e of t)0===e.indexOf("_:")&&l.getId(e)}i.isUndefined(d)&&(d=o.isBlankNode(e)?l.getId(e["@id"]):e["@id"]),u&&u.push({"@id":d});const p=t[r],f=p[d]=p[d]||{};f["@id"]=d;const h=Object.keys(e).sort();for(let i of h){if("@id"===i)continue;if("@reverse"===i){const n={"@id":d},i=e["@reverse"];for(const e in i){const s=i[e];for(const i of s){let s=i["@id"];o.isBlankNode(i)&&(s=l.getId(s)),c.createNodeMap(i,t,r,l,s),a.addValue(p[s],e,n,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===i){d in t||(t[d]={}),c.createNodeMap(e[i],t,d,l);continue}if("@included"===i){c.createNodeMap(e[i],t,r,l);continue}if("@type"!==i&&n(i)){if("@index"===i&&i in f&&(e[i]!==f[i]||e[i]["@id"]!==f[i]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[i]=e[i];continue}const u=e[i];if(0===i.indexOf("_:")&&(i=l.getId(i)),0!==u.length)for(let e of u)if("@type"===i&&(e=0===e.indexOf("_:")?l.getId(e):e),o.isSubject(e)||o.isSubjectReference(e)){if("@id"in e&&!e["@id"])continue;const n=o.isBlankNode(e)?l.getId(e["@id"]):e["@id"];a.addValue(f,i,{"@id":n},{propertyIsArray:!0,allowDuplicate:!1}),c.createNodeMap(e,t,r,l,n)}else if(o.isValue(e))a.addValue(f,i,e,{propertyIsArray:!0,allowDuplicate:!1});else if(o.isList(e)){const n=[];c.createNodeMap(e["@list"],t,r,l,d,n),e={"@list":n},a.addValue(f,i,e,{propertyIsArray:!0,allowDuplicate:!1})}else c.createNodeMap(e,t,r,l,d),a.addValue(f,i,e,{propertyIsArray:!0,allowDuplicate:!1});else a.addValue(f,i,[],{propertyIsArray:!0})}},c.mergeNodeMapGraphs=e=>{const t={};for(const r of Object.keys(e).sort())for(const o of Object.keys(e[r]).sort()){const i=e[r][o];o in t||(t[o]={"@id":o});const s=t[o];for(const e of Object.keys(i).sort())if(n(e)&&"@type"!==e)s[e]=a.clone(i[e]);else for(const t of i[e])a.addValue(s,e,a.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t},c.mergeNodeMaps=e=>{const t=e["@default"],r=Object.keys(e).sort();for(const n of r){if("@default"===n)continue;const r=e[n];let i=t[n];i?"@graph"in i||(i["@graph"]=[]):t[n]=i={"@id":n,"@graph":[]};const a=i["@graph"];for(const e of Object.keys(r).sort()){const t=r[e];o.isSubjectReference(t)||a.push(t)}}return t}},7222:(e,t,r)=>{"use strict";const n=r(8831),o={};e.exports=o,o.setupDocumentLoaders=function(e){"undefined"!=typeof XMLHttpRequest&&(e.documentLoaders.xhr=n,e.useDocumentLoader("xhr"))},o.setupGlobals=function(e){void 0===globalThis.JsonLdProcessor&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor})}},9382:(e,t,r)=>{"use strict";const{createNodeMap:n}=r(2664),{isKeyword:o}=r(4131),i=r(8463),a=r(5456),s=r(832),c=r(1055),{handleEvent:l}=r(1696),{RDF_FIRST:d,RDF_REST:u,RDF_NIL:p,RDF_TYPE:f,RDF_JSON_LITERAL:h,RDF_LANGSTRING:y,XSD_BOOLEAN:g,XSD_DOUBLE:m,XSD_INTEGER:v,XSD_STRING:w}=r(3770),{isAbsolute:x}=r(2278),b={};function E(e,t,r,n,i){const a=Object.keys(t).sort();for(const s of a){const a=t[s],c=Object.keys(a).sort();for(let t of c){const c=a[t];if("@type"===t)t=f;else if(o(t))continue;for(const o of c){const a={termType:s.startsWith("_:")?"BlankNode":"NamedNode",value:s};if(!x(s)){i.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:s}},options:i});continue}const c={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(!x(t)){i.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:t}},options:i});continue}if("BlankNode"===c.termType&&!i.produceGeneralizedRdf){i.eventHandler&&l({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:n.getOldIds().find((e=>n.getId(e)===t))}},options:i});continue}const d=S(o,n,e,r,i.rdfDirection,i);d&&e.push({subject:a,predicate:c,object:d,graph:r})}}}}function S(e,t,r,n,o,c){const f={};if(i.isValue(e)){f.termType="Literal",f.value=void 0,f.datatype={termType:"NamedNode"};let t=e["@value"];const r=e["@type"]||null;if("@json"===r)f.value=a(t),f.datatype.value=h;else if(s.isBoolean(t))f.value=t.toString(),f.datatype.value=r||g;else if(s.isDouble(t)||r===m)s.isDouble(t)||(t=parseFloat(t)),f.value=t.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),f.datatype.value=r||m;else if(s.isNumber(t))f.value=t.toFixed(0),f.datatype.value=r||v;else if("i18n-datatype"===o&&"@direction"in e){const r="https://www.w3.org/ns/i18n#"+(e["@language"]||"")+`_${e["@direction"]}`;f.datatype.value=r,f.value=t}else"@language"in e?(f.value=t,f.datatype.value=r||y,f.language=e["@language"]):(f.value=t,f.datatype.value=r||w)}else if(i.isList(e)){const i=function(e,t,r,n,o,i){const a={termType:"NamedNode",value:d},s={termType:"NamedNode",value:u},c={termType:"NamedNode",value:p},l=e.pop(),f=l?{termType:"BlankNode",value:t.getId()}:c;let h=f;for(const c of e){const e=S(c,t,r,n,o,i),l={termType:"BlankNode",value:t.getId()};r.push({subject:h,predicate:a,object:e,graph:n}),r.push({subject:h,predicate:s,object:l,graph:n}),h=l}if(l){const e=S(l,t,r,n,o,i);r.push({subject:h,predicate:a,object:e,graph:n}),r.push({subject:h,predicate:s,object:c,graph:n})}return f}(e["@list"],t,r,n,o,c);f.termType=i.termType,f.value=i.value}else{const t=s.isObject(e)?e["@id"]:e;f.termType=t.startsWith("_:")?"BlankNode":"NamedNode",f.value=t}return"NamedNode"!==f.termType||x(f.value)?f:(c.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:f.value}},options:c}),null)}e.exports=b,b.toRDF=(e,t)=>{const r=new c.IdentifierIssuer("_:b"),o={"@default":{}};n(e,o,"@default",r);const i=[],a=Object.keys(o).sort();for(const e of a){let n;if("@default"===e)n={termType:"DefaultGraph",value:""};else{if(!x(e)){t.eventHandler&&l({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:e}},options:t});continue}n=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},n.value=e}E(i,o[e],n,r,t)}return i}},832:e=>{"use strict";const t={};e.exports=t,t.isArray=Array.isArray,t.isBoolean=e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e),t.isDouble=e=>t.isNumber(e)&&(-1!==String(e).indexOf(".")||Math.abs(e)>=1e21),t.isEmptyObject=e=>t.isObject(e)&&0===Object.keys(e).length,t.isNumber=e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e),t.isNumeric=e=>!isNaN(parseFloat(e))&&isFinite(e),t.isObject=e=>"[object Object]"===Object.prototype.toString.call(e),t.isString=e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e),t.isUndefined=e=>void 0===e},2278:(e,t,r)=>{"use strict";const n=r(832),o={};e.exports=o,o.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},o.parse=(e,t)=>{const r={},n=o.parsers[t||"full"],i=n.regex.exec(e);let a=n.keys.length;for(;a--;)r[n.keys[a]]=void 0===i[a]?null:i[a];return("https"===r.scheme&&"443"===r.port||"http"===r.scheme&&"80"===r.port)&&(r.href=r.href.replace(":"+r.port,""),r.authority=r.authority.replace(":"+r.port,""),r.port=null),r.normalizedPath=o.removeDotSegments(r.path),r},o.prependBase=(e,t)=>{if(null===e)return t;if(o.isAbsolute(t))return t;e&&!n.isString(e)||(e=o.parse(e||""));const r=o.parse(t),i={protocol:e.protocol||""};if(null!==r.authority)i.authority=r.authority,i.path=r.path,i.query=r.query;else if(i.authority=e.authority,""===r.path)i.path=e.path,null!==r.query?i.query=r.query:i.query=e.query;else{if(0===r.path.indexOf("/"))i.path=r.path;else{let t=e.path;t=t.substr(0,t.lastIndexOf("/")+1),(t.length>0||e.authority)&&"/"!==t.substr(-1)&&(t+="/"),t+=r.path,i.path=t}i.query=r.query}""!==r.path&&(i.path=o.removeDotSegments(i.path));let a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==r.fragment&&(a+="#"+r.fragment),""===a&&(a="./"),a},o.removeBase=(e,t)=>{if(null===e)return t;e&&!n.isString(e)||(e=o.parse(e||""));let r="";if(""!==e.href?r+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;const i=o.parse(t.substr(r.length)),a=e.normalizedPath.split("/"),s=i.normalizedPath.split("/"),c=i.fragment||i.query?0:1;for(;a.length>0&&s.length>c&&a[0]===s[0];)a.shift(),s.shift();let l="";if(a.length>0){a.pop();for(let e=0;e<a.length;++e)l+="../"}return l+=s.join("/"),null!==i.query&&(l+="?"+i.query),null!==i.fragment&&(l+="#"+i.fragment),""===l&&(l="./"),l},o.removeDotSegments=e=>{if(0===e.length)return"";const t=e.split("/"),r=[];for(;t.length>0;){const e=t.shift(),n=0===t.length;"."!==e?".."!==e?r.push(e):(r.pop(),n&&r.push("")):n&&r.push("")}return"/"===e[0]&&r.length>0&&""!==r[0]&&r.unshift(""),1===r.length&&""===r[0]?"/":r.join("/")};const i=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;o.isAbsolute=e=>n.isString(e)&&i.test(e),o.isRelative=e=>n.isString(e)},1055:(e,t,r)=>{"use strict";const n=r(8463),o=r(832),i=r(7055).IdentifierIssuer,a=r(4093),s=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,c=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,l=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,d="application/ld+json, application/json",u={};function p(e,t){if(o.isArray(t))for(let r=0;r<t.length;++r)t[r]=p(e,t[r]);else if(n.isList(t))t["@list"]=p(e,t["@list"]);else if(o.isObject(t)){n.isBlankNode(t)&&(t["@id"]=e.getId(t["@id"]));const r=Object.keys(t).sort();for(let n=0;n<r.length;++n){const o=r[n];"@id"!==o&&(t[o]=p(e,t[o]))}}return t}e.exports=u,u.IdentifierIssuer=i,u.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,u.REGEX_KEYWORD=/^@[a-zA-Z]+$/,u.clone=function(e){if(e&&"object"==typeof e){let t;if(o.isArray(e)){t=[];for(let r=0;r<e.length;++r)t[r]=u.clone(e[r])}else if(e instanceof Map){t=new Map;for(const[r,n]of e)t.set(r,u.clone(n))}else if(e instanceof Set){t=new Set;for(const r of e)t.add(u.clone(r))}else if(o.isObject(e)){t={};for(const r in e)t[r]=u.clone(e[r])}else t=e.toString();return t}return e},u.asArray=function(e){return Array.isArray(e)?e:[e]},u.buildHeaders=(e={})=>{if(Object.keys(e).some((e=>"accept"===e.toLowerCase())))throw new RangeError('Accept header may not be specified; only "'+d+'" is supported.');return Object.assign({Accept:d},e)},u.parseLinkHeader=e=>{const t={},r=e.match(s);for(let e=0;e<r.length;++e){let n=r[e].match(c);if(!n)continue;const o={target:n[1]},i=n[2];for(;n=l.exec(i);)o[n[1]]=void 0===n[2]?n[3]:n[2];const a=o.rel||"";Array.isArray(t[a])?t[a].push(o):t.hasOwnProperty(a)?t[a]=[t[a],o]:t[a]=o}return t},u.validateTypeValue=(e,t)=>{if(!(o.isString(e)||o.isArray(e)&&e.every((e=>o.isString(e))))){if(t&&o.isObject(e))switch(Object.keys(e).length){case 0:return;case 1:if("@default"in e&&u.asArray(e["@default"]).every((e=>o.isString(e))))return}throw new a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}},u.hasProperty=(e,t)=>{if(e.hasOwnProperty(t)){const r=e[t];return!o.isArray(r)||r.length>0}return!1},u.hasValue=(e,t,r)=>{if(u.hasProperty(e,t)){let i=e[t];const a=n.isList(i);if(o.isArray(i)||a){a&&(i=i["@list"]);for(let e=0;e<i.length;++e)if(u.compareValues(r,i[e]))return!0}else if(!o.isArray(r))return u.compareValues(r,i)}return!1},u.addValue=(e,t,r,n)=>{if("propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1),"valueIsArray"in n||(n.valueIsArray=!1),"allowDuplicate"in n||(n.allowDuplicate=!0),"prependValue"in n||(n.prependValue=!1),n.valueIsArray)e[t]=r;else if(o.isArray(r)){0===r.length&&n.propertyIsArray&&!e.hasOwnProperty(t)&&(e[t]=[]),n.prependValue&&(r=r.concat(e[t]),e[t]=[]);for(let o=0;o<r.length;++o)u.addValue(e,t,r[o],n)}else if(e.hasOwnProperty(t)){const i=!n.allowDuplicate&&u.hasValue(e,t,r);o.isArray(e[t])||i&&!n.propertyIsArray||(e[t]=[e[t]]),i||(n.prependValue?e[t].unshift(r):e[t].push(r))}else e[t]=n.propertyIsArray?[r]:r},u.getValues=(e,t)=>[].concat(e[t]||[]),u.removeProperty=(e,t)=>{delete e[t]},u.removeValue=(e,t,r,n)=>{"propertyIsArray"in(n=n||{})||(n.propertyIsArray=!1);const o=u.getValues(e,t).filter((e=>!u.compareValues(e,r)));0===o.length?u.removeProperty(e,t):1!==o.length||n.propertyIsArray?e[t]=o:e[t]=o[0]},u.relabelBlankNodes=(e,t)=>p((t=t||{}).issuer||new i("_:b"),e),u.compareValues=(e,t)=>e===t||!(!n.isValue(e)||!n.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(o.isObject(e)&&"@id"in e&&o.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"],u.compareShortestLeast=(e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1},9593:(e,t,r)=>{"use strict";const n=r(4411),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),d=Symbol("noDisposeOnSet"),u=Symbol("lruList"),p=Symbol("cache"),f=Symbol("updateAgeOnGet"),h=()=>1,y=(e,t,r)=>{const n=e[p].get(t);if(n){const t=n.value;if(g(e,t)){if(v(e,n),!e[s])return}else r&&(e[f]&&(n.value.now=Date.now()),e[u].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},m=e=>{if(e[i]>e[o])for(let t=e[u].tail;e[i]>e[o]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[i]-=r.length,e[p].delete(r.key),e[u].removeNode(t)}};class w{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const x=(e,t,r,n)=>{let o=r.value;g(e,o)&&(v(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||h;if(this[a]="function"!=typeof t?h:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,m(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,m(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=h),e!==this[a]&&(this[a]=e,this[i]=0,this[u].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),m(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[u].length}rforEach(e,t){t=t||this;for(let r=this[u].tail;null!==r;){const n=r.prev;x(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[u].head;null!==r;){const n=r.next;x(this,e,r,t),r=n}}keys(){return this[u].toArray().map((e=>e.key))}values(){return this[u].toArray().map((e=>e.value))}reset(){this[l]&&this[u]&&this[u].length&&this[u].forEach((e=>this[l](e.key,e.value))),this[p]=new Map,this[u]=new n,this[i]=0}dump(){return this[u].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[u]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](t,e);if(this[p].has(e)){if(s>this[o])return v(this,this[p].get(e)),!1;const a=this[p].get(e).value;return this[l]&&(this[d]||this[l](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),m(this),!0}const f=new w(e,t,s,n,r);return f.length>this[o]?(this[l]&&this[l](e,t),!1):(this[i]+=f.length,this[u].unshift(f),this[p].set(e,this[u].head),m(this),!0)}has(e){if(!this[p].has(e))return!1;const t=this[p].get(e).value;return!g(this,t)}get(e){return y(this,e,!0)}peek(e){return y(this,e,!1)}pop(){const e=this[u].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[p].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[p].forEach(((e,t)=>y(this,t,!1)))}}},7055:(e,t,r)=>{e.exports=r(9344)},2401:e=>{"use strict";e.exports=class e{constructor(e,t=new Map,r=0){this.prefix=e,this._existing=t,this.counter=r}clone(){const{prefix:t,_existing:r,counter:n}=this;return new e(t,new Map(r),n)}getId(e){const t=e&&this._existing.get(e);if(t)return t;const r=this.prefix+this.counter;return this.counter++,e&&this._existing.set(e,r),r}hasId(e){return this._existing.has(e)}getOldIds(){return[...this._existing.keys()]}}},5947:(e,t,r)=>{"use strict";r(4889);const n=self.crypto||self.msCrypto;e.exports=class{constructor(e){if(!n||!n.subtle)throw new Error("crypto.subtle not found.");if("sha256"===e)this.algorithm={name:"SHA-256"};else{if("sha1"!==e)throw new Error(`Unsupported algorithm "${e}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(e){this._content+=e}async digest(){const e=(new TextEncoder).encode(this._content),t=new Uint8Array(await n.subtle.digest(this.algorithm,e));let r="";for(let e=0;e<t.length;++e)r+=t[e].toString(16).padStart(2,"0");return r}}},9980:e=>{"use strict";const t="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",r="http://www.w3.org/2001/XMLSchema#string",n="NamedNode",o="BlankNode",i="Literal",a="DefaultGraph",s={};(()=>{const e="(?:<([^:]+:[^>]*)>)",t="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_",r=t+"0-9-·̀-ͯ‿-⁀",n="(_:(?:["+t+"0-9])(?:(?:["+r+".])*(?:["+r+"]))?)",o="[ \\t]+",i="[ \\t]*",a="(?:"+e+"|"+n+")"+o,c=e+o,l="(?:"+e+"|"+n+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+e+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+i,d="(?:\\.|(?:(?:"+e+"|"+n+")"+i+"\\.))";s.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,s.empty=new RegExp("^"+i+"$"),s.quad=new RegExp("^"+i+a+c+l+d+i+"$")})(),e.exports=class e{static parse(e){const c=[],d={},u=e.split(s.eoln);let p=0;for(const e of u){if(p++,s.empty.test(e))continue;const u=e.match(s.quad);if(null===u)throw new Error("N-Quads parse error on line "+p+".");const y={subject:null,predicate:null,object:null,graph:null};if(void 0!==u[1]?y.subject={termType:n,value:u[1]}:y.subject={termType:o,value:u[2]},y.predicate={termType:n,value:u[3]},void 0!==u[4]?y.object={termType:n,value:u[4]}:void 0!==u[5]?y.object={termType:o,value:u[5]}:(y.object={termType:i,value:void 0,datatype:{termType:n}},void 0!==u[7]?y.object.datatype.value=u[7]:void 0!==u[8]?(y.object.datatype.value=t,y.object.language=u[8]):y.object.datatype.value=r,y.object.value=u[6].replace(l,(function(e,t,r,n){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(r)return String.fromCharCode(parseInt(r,16));if(n)throw new Error("Unsupported U escape")}))),void 0!==u[9]?y.graph={termType:n,value:u[9]}:void 0!==u[10]?y.graph={termType:o,value:u[10]}:y.graph={termType:a,value:""},y.graph.value in d){let e=!0;const t=d[y.graph.value];for(const r of t)if(h=y,(f=r).subject.termType===h.subject.termType&&f.object.termType===h.object.termType&&f.subject.value===h.subject.value&&f.predicate.value===h.predicate.value&&f.object.value===h.object.value&&(f.object.termType!==i||f.object.datatype.termType===h.object.datatype.termType&&f.object.language===h.object.language&&f.object.datatype.value===h.object.datatype.value)){e=!1;break}e&&(t.push(y),c.push(y))}else d[y.graph.value]=[y],c.push(y)}var f,h;return c}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const r=[];for(const n of t)r.push(e.serializeQuad(n));return r.sort().join("")}static serializeQuadComponents(e,i,a,s){let l="";return e.termType===n?l+=`<${e.value}>`:l+=`${e.value}`,l+=` <${i.value}> `,a.termType===n?l+=`<${a.value}>`:a.termType===o?l+=a.value:(l+=`"${function(e){return e.replace(c,(function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}}))}(a.value)}"`,a.datatype.value===t?a.language&&(l+=`@${a.language}`):a.datatype.value!==r&&(l+=`^^<${a.datatype.value}>`)),s.termType===n?l+=` <${s.value}>`:s.termType===o&&(l+=` ${s.value}`),l+=" .\n",l}static serializeQuad(t){return e.serializeQuadComponents(t.subject,t.predicate,t.object,t.graph)}static legacyDatasetToQuads(e){const s=[],c={"blank node":o,IRI:n,literal:i};for(const l in e)e[l].forEach((e=>{const d={};for(const o in e){const a=e[o],s={termType:c[a.type],value:a.value};s.termType===i&&(s.datatype={termType:n},"datatype"in a&&(s.datatype.value=a.datatype),"language"in a?("datatype"in a||(s.datatype.value=t),s.language=a.language):"datatype"in a||(s.datatype.value=r)),d[o]=s}d.graph="@default"===l?{termType:a,value:""}:{termType:l.startsWith("_:")?o:n,value:l},s.push(d)}));return s}};const c=/["\\\n\r]/g,l=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},8326:e=>{"use strict";e.exports=class{constructor(e){this.current=e.sort(),this.done=!1,this.dir=new Map;for(let t=0;t<e.length;++t)this.dir.set(e[t],!0)}hasNext(){return!this.done}next(){const{current:e,dir:t}=this,r=e.slice();let n=null,o=0;const i=e.length;for(let r=0;r<i;++r){const a=e[r],s=t.get(a);(null===n||a>n)&&(s&&r>0&&a>e[r-1]||!s&&r<i-1&&a>e[r+1])&&(n=a,o=r)}if(null===n)this.done=!0;else{const r=t.get(n)?o-1:o+1;e[o]=e[r],e[r]=n;for(const r of e)r>n&&t.set(r,!t.get(r))}return r}}},3445:(e,t,r)=>{"use strict";const n=r(2401),o=r(5947),i=r(8326),a=r(9980);function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=(()=>new o("sha256")),canonicalIdMap:t=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new n("_:c14n",t),this.createMessageDigest=e,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}async main(e){this.deepIterations=new Map,this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,r=[...this.blankNodeInfo.keys()];let o=0;for(const e of r)++o%100==0&&await this._yield(),await this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const i=[...t.keys()].sort(),c=[];for(const e of i){const r=t.get(e);if(r.length>1){c.push(r);continue}const n=r[0];this.canonicalIssuer.getId(n)}for(const e of c){const t=[];for(const r of e){if(this.canonicalIssuer.hasId(r))continue;const e=new n("_:b");e.getId(r);const o=await this.hashNDegreeQuads(r,e);t.push(o)}t.sort(s);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const l=[];for(const e of this.quads){const t=a.serializeQuadComponents(this._componentWithCanonicalId(e.subject),e.predicate,this._componentWithCanonicalId(e.object),this._componentWithCanonicalId(e.graph));l.push(t)}return l.sort(),l.join("")}async hashFirstDegreeQuads(e){const t=[],r=this.blankNodeInfo.get(e),n=r.quads;for(const r of n){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const o=this.createMessageDigest();for(const e of t)o.update(e);return r.hash=await o.digest(),r.hash}async hashRelatedBlankNode(e,t,r,n){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):this.blankNodeInfo.get(e).hash;const i=this.createMessageDigest();return i.update(n),"g"!==n&&i.update(this.getRelatedPredicate(t)),i.update(o),i.digest()}async hashNDegreeQuads(e,t){const r=this.deepIterations.get(e)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,r+1);const n=this.createMessageDigest(),o=await this.createHashToRelated(e,t),a=[...o.keys()].sort();for(const e of a){n.update(e);let r,a="";const s=new i(o.get(e));let c=0;for(;s.hasNext();){const e=s.next();++c%3==0&&await this._yield();let n=t.clone(),o="";const i=[];let l=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?o+=this.canonicalIssuer.getId(t):(n.hasId(t)||i.push(t),o+=n.getId(t)),0!==a.length&&o>a){l=!0;break}if(!l){for(const e of i){const t=await this.hashNDegreeQuads(e,n);if(o+=n.getId(e),o+=`<${t.hash}>`,n=t.issuer,0!==a.length&&o>a){l=!0;break}}l||(0===a.length||o<a)&&(a=o,r=n)}}n.update(a),t=r}return{hash:await n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}async createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;let o=0;for(const i of n)++o%100==0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad:i,component:i.subject,position:"s",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.object,position:"o",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:i,component:i.graph,position:"g",id:e,issuer:t,hashToRelated:r})]);return r}async _hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const r=await this.hashFirstDegreeQuads(e),n=t.get(r);n?n.push(e):t.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const r=t.value,n=this.blankNodeInfo.get(r);n?n.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}async _addRelatedBlankNodeHash({quad:e,component:t,position:r,id:n,issuer:o,hashToRelated:i}){if("BlankNode"!==t.termType||t.value===n)return;const a=t.value,s=await this.hashRelatedBlankNode(a,e,o,r),c=i.get(s);c?c.push(a):i.set(s,[a])}_componentWithCanonicalId(e){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}async _yield(){return new Promise((e=>setImmediate(e)))}}},5643:(e,t,r)=>{"use strict";const n=r(2401),o=r(5947),i=r(8326),a=r(9980);function s(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}e.exports=class{constructor({createMessageDigest:e=(()=>new o("sha256")),canonicalIdMap:t=new Map,maxDeepIterations:r=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new n("_:c14n",t),this.createMessageDigest=e,this.maxDeepIterations=r,this.quads=null,this.deepIterations=null}main(e){this.deepIterations=new Map,this.quads=e;for(const t of e)this._addBlankNodeQuadInfo({quad:t,component:t.subject}),this._addBlankNodeQuadInfo({quad:t,component:t.object}),this._addBlankNodeQuadInfo({quad:t,component:t.graph});const t=new Map,r=[...this.blankNodeInfo.keys()];for(const e of r)this._hashAndTrackBlankNode({id:e,hashToBlankNodes:t});const o=[...t.keys()].sort(),i=[];for(const e of o){const r=t.get(e);if(r.length>1){i.push(r);continue}const n=r[0];this.canonicalIssuer.getId(n)}for(const e of i){const t=[];for(const r of e){if(this.canonicalIssuer.hasId(r))continue;const e=new n("_:b");e.getId(r);const o=this.hashNDegreeQuads(r,e);t.push(o)}t.sort(s);for(const e of t){const t=e.issuer.getOldIds();for(const e of t)this.canonicalIssuer.getId(e)}}const c=[];for(const e of this.quads){const t=a.serializeQuadComponents(this._componentWithCanonicalId({component:e.subject}),e.predicate,this._componentWithCanonicalId({component:e.object}),this._componentWithCanonicalId({component:e.graph}));c.push(t)}return c.sort(),c.join("")}hashFirstDegreeQuads(e){const t=[],r=this.blankNodeInfo.get(e),n=r.quads;for(const r of n){const n={subject:null,predicate:r.predicate,object:null,graph:null};n.subject=this.modifyFirstDegreeComponent(e,r.subject,"subject"),n.object=this.modifyFirstDegreeComponent(e,r.object,"object"),n.graph=this.modifyFirstDegreeComponent(e,r.graph,"graph"),t.push(a.serializeQuad(n))}t.sort();const o=this.createMessageDigest();for(const e of t)o.update(e);return r.hash=o.digest(),r.hash}hashRelatedBlankNode(e,t,r,n){let o;o=this.canonicalIssuer.hasId(e)?this.canonicalIssuer.getId(e):r.hasId(e)?r.getId(e):this.blankNodeInfo.get(e).hash;const i=this.createMessageDigest();return i.update(n),"g"!==n&&i.update(this.getRelatedPredicate(t)),i.update(o),i.digest()}hashNDegreeQuads(e,t){const r=this.deepIterations.get(e)||0;if(r>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(e,r+1);const n=this.createMessageDigest(),o=this.createHashToRelated(e,t),a=[...o.keys()].sort();for(const e of a){n.update(e);let r,a="";const s=new i(o.get(e));for(;s.hasNext();){const e=s.next();let n=t.clone(),o="";const i=[];let c=!1;for(const t of e)if(this.canonicalIssuer.hasId(t)?o+=this.canonicalIssuer.getId(t):(n.hasId(t)||i.push(t),o+=n.getId(t)),0!==a.length&&o>a){c=!0;break}if(!c){for(const e of i){const t=this.hashNDegreeQuads(e,n);if(o+=n.getId(e),o+=`<${t.hash}>`,n=t.issuer,0!==a.length&&o>a){c=!0;break}}c||(0===a.length||o<a)&&(a=o,r=n)}}n.update(a),t=r}return{hash:n.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return`<${e.predicate.value}>`}createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;for(const o of n)this._addRelatedBlankNodeHash({quad:o,component:o.subject,position:"s",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.object,position:"o",id:e,issuer:t,hashToRelated:r}),this._addRelatedBlankNodeHash({quad:o,component:o.graph,position:"g",id:e,issuer:t,hashToRelated:r});return r}_hashAndTrackBlankNode({id:e,hashToBlankNodes:t}){const r=this.hashFirstDegreeQuads(e),n=t.get(r);n?n.push(e):t.set(r,[e])}_addBlankNodeQuadInfo({quad:e,component:t}){if("BlankNode"!==t.termType)return;const r=t.value,n=this.blankNodeInfo.get(r);n?n.quads.add(e):this.blankNodeInfo.set(r,{quads:new Set([e]),hash:null})}_addRelatedBlankNodeHash({quad:e,component:t,position:r,id:n,issuer:o,hashToRelated:i}){if("BlankNode"!==t.termType||t.value===n)return;const a=t.value,s=this.hashRelatedBlankNode(a,e,o,r),c=i.get(s);c?c.push(a):i.set(s,[a])}_componentWithCanonicalId({component:e}){return"BlankNode"!==e.termType||e.value.startsWith(this.canonicalIssuer.prefix)?e:{termType:"BlankNode",value:this.canonicalIssuer.getId(e.value)}}}},9201:(e,t,r)=>{"use strict";const n=r(5947),o=r(3445);e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new n("sha1")}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}async createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;let o=0;for(const i of n){let n,a;if("BlankNode"===i.subject.termType&&i.subject.value!==e)a=i.subject.value,n="p";else{if("BlankNode"!==i.object.termType||i.object.value===e)continue;a=i.object.value,n="r"}++o%100==0&&await this._yield();const s=await this.hashRelatedBlankNode(a,i,t,n),c=r.get(s);c?c.push(a):r.set(s,[a])}return r}}},7702:(e,t,r)=>{"use strict";const n=r(5947),o=r(5643);e.exports=class extends o{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new n("sha1")}modifyFirstDegreeComponent(e,t,r){return"BlankNode"!==t.termType?t:"graph"===r?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:t.value===e?"_:a":"_:z"}}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const r=new Map,n=this.blankNodeInfo.get(e).quads;for(const o of n){let n,i;if("BlankNode"===o.subject.termType&&o.subject.value!==e)i=o.subject.value,n="p";else{if("BlankNode"!==o.object.termType||o.object.value===e)continue;i=o.object.value,n="r"}const a=this.hashRelatedBlankNode(i,o,t,n),s=r.get(a);s?s.push(i):r.set(a,[i])}return r}}},9344:(e,t,r)=>{"use strict";const n=r(3445),o=r(9201),i=r(5643),a=r(7702);let s;try{s=r(7670)}catch(e){}function c(e){return Array.isArray(e)?e:t.NQuads.legacyDatasetToQuads(e)}t.NQuads=r(9980),t.IdentifierIssuer=r(2401),t._rdfCanonizeNative=function(e){return e&&(s=e),s},t.canonize=async function(e,t){const r=c(e);if(t.useNative){if(!s)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise(((e,n)=>s.canonize(r,t,((t,r)=>t?n(t):e(r)))))}if("URDNA2015"===t.algorithm)return new n(t).main(r);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new o(t).main(r)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)},t._canonizeSync=function(e,t){const r=c(e);if(t.useNative){if(!s)throw new Error("rdf-canonize-native not available");if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return s.canonizeSync(r,t)}if("URDNA2015"===t.algorithm)return new i(t).main(r);if("URGNA2012"===t.algorithm){if(t.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new a(t).main(r)}if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},7710:e=>{"use strict";class t extends Error{constructor(e){super(t._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,t)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const r=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],n=Symbol(".toJSON called"),o=({from:e,seen:t,to_:i,forceEnumerable:a,maxDepth:s,depth:c})=>{const l=i||(Array.isArray(e)?[]:{});if(t.push(e),c>=s)return l;if("function"==typeof e.toJSON&&!0!==e[n])return(e=>{e[n]=!0;const t=e.toJSON();return delete e[n],t})(e);for(const[r,n]of Object.entries(e))"function"==typeof Buffer&&Buffer.isBuffer(n)?l[r]="[object Buffer]":"function"!=typeof n&&(n&&"object"==typeof n?t.includes(e[r])?l[r]="[Circular]":(c++,l[r]=o({from:e[r],seen:t.slice(),forceEnumerable:a,maxDepth:s,depth:c})):l[r]=n);for(const{property:t,enumerable:n}of r)"string"==typeof e[t]&&Object.defineProperty(l,t,{value:e[t],enumerable:!!a||n,configurable:!0,writable:!0});return l};e.exports={serializeError:(e,t={})=>{const{maxDepth:r=Number.POSITIVE_INFINITY}=t;return"object"==typeof e&&null!==e?o({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e},deserializeError:(e,r={})=>{const{maxDepth:n=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return o({from:e,seen:[],to_:t,maxDepth:n,depth:0}),t}return new t(e)}}},4889:function(e,t,r){!function(e,t){"use strict";if(!e.setImmediate){var r,n,o,i,a,s=1,c={},l=!1,d=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(i="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&f(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(n=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(f,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return c[s]=o,r(s),s++},u.clearImmediate=p}function p(e){delete c[e]}function f(e){if(l)setTimeout(f,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(undefined,r)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}function i(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;var a=[];for(n=0;i&&n<t;n++)a.push(i.value),i=this.removeNode(i);for(null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev),n=0;n<r.length;n++)i=o(this,i,r[n]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9602)(n)}catch(e){}},7420:()=>{},7670:()=>{}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var i=n[e]={exports:{}};return r[e].call(i.exports,i,i.exports,o),i.exports}t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var i=Object.create(null);o.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,o.d(i,a),i},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};o.r(e),o.d(e,{constants:()=>u,Sb:()=>d});var t=o(6805),r=o(7563);const{purposes:{AssertionProofPurpose:n}}=r;class i extends n{constructor({controller:e,date:t,maxTimestampDelta:r}={}){super({controller:e,date:t,maxTimestampDelta:r})}async validate(e,{document:r,suite:n,verificationMethod:o,documentLoader:i,expansionMap:a}){try{const s=await super.validate(e,{document:r,suite:n,verificationMethod:o,documentLoader:i,expansionMap:a});if(!s.valid)throw s.error;const c=t.getValues(r,"issuer");if(!c||0===c.length)throw new Error("Credential issuer is required.");const l="string"==typeof c[0]?c[0]:c[0].id;if(s.controller.id!==l)throw new Error("Credential issuer must match the verification method controller.");return{valid:!0}}catch(e){return{valid:!1,error:e}}}}var a,s,c,l=(c=(a={exports:{}}).exports,(()=>{var e={717:e=>{e.exports={CONTEXT_FILENAME:"credentials-v1.jsonld",CONTEXT_URL:"https://www.w3.org/2018/credentials/v1",CREDENTIALS_CONTEXT_V1_URL:"https://www.w3.org/2018/credentials/v1"}},869:e=>{e.exports={"@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",VerifiableCredential:{"@id":"https://www.w3.org/2018/credentials#VerifiableCredential","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",credentialSchema:{"@id":"cred:credentialSchema","@type":"@id","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",JsonSchemaValidator2018:"cred:JsonSchemaValidator2018"}},credentialStatus:{"@id":"cred:credentialStatus","@type":"@id"},credentialSubject:{"@id":"cred:credentialSubject","@type":"@id"},evidence:{"@id":"cred:evidence","@type":"@id"},expirationDate:{"@id":"cred:expirationDate","@type":"xsd:dateTime"},holder:{"@id":"cred:holder","@type":"@id"},issued:{"@id":"cred:issued","@type":"xsd:dateTime"},issuer:{"@id":"cred:issuer","@type":"@id"},issuanceDate:{"@id":"cred:issuanceDate","@type":"xsd:dateTime"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},refreshService:{"@id":"cred:refreshService","@type":"@id","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",ManualRefreshService2018:"cred:ManualRefreshService2018"}},termsOfUse:{"@id":"cred:termsOfUse","@type":"@id"},validFrom:{"@id":"cred:validFrom","@type":"xsd:dateTime"},validUntil:{"@id":"cred:validUntil","@type":"xsd:dateTime"}}},VerifiablePresentation:{"@id":"https://www.w3.org/2018/credentials#VerifiablePresentation","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",cred:"https://www.w3.org/2018/credentials#",sec:"https://w3id.org/security#",holder:{"@id":"cred:holder","@type":"@id"},proof:{"@id":"sec:proof","@type":"@id","@container":"@graph"},verifiableCredential:{"@id":"cred:verifiableCredential","@type":"@id","@container":"@graph"}}},EcdsaSecp256k1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256k1Signature2019","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},EcdsaSecp256r1Signature2019:{"@id":"https://w3id.org/security#EcdsaSecp256r1Signature2019","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",xsd:"http://www.w3.org/2001/XMLSchema#",challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},RsaSignature2018:{"@id":"https://w3id.org/security#RsaSignature2018","@context":{"@version":1.1,"@protected":!0,challenge:"sec:challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"xsd:dateTime"},domain:"sec:domain",expires:{"@id":"sec:expiration","@type":"xsd:dateTime"},jws:"sec:jws",nonce:"sec:nonce",proofPurpose:{"@id":"sec:proofPurpose","@type":"@vocab","@context":{"@version":1.1,"@protected":!0,id:"@id",type:"@type",sec:"https://w3id.org/security#",assertionMethod:{"@id":"sec:assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"sec:authenticationMethod","@type":"@id","@container":"@set"}}},proofValue:"sec:proofValue",verificationMethod:{"@id":"sec:verificationMethod","@type":"@id"}}},proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"}}}},858:(e,t,r)=>{const{CONTEXT_URL:n}=r(717),o=r(869);e.exports={documentLoader(e){if(e!==n)throw new Error(`Loading document "${e}" is not allowed.`);return{contextUrl:null,document:o,documentUrl:e}}}},243:(e,t,r)=>{const n=r(869),o=r(717),{documentLoader:i}=r(858),{CONTEXT_URL:a}=o,s=new Map;s.set(o.CONTEXT_URL,n),e.exports={constants:o,contexts:s,documentLoader:i,CONTEXT_URL:a,CREDENTIALS_CONTEXT_V1_URL:a,CONTEXT_URL_V1:a,CONTEXT:n}}},t={},r=function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(243),n=c;for(var o in r)n[o]=r[o];r.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})(),a.exports),d=((s=l)&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")&&s.default,l.contexts),u=l.constants,p=(l.CONTEXT,l.CONTEXT_URL,l.CONTEXT_URL_V1,l.CREDENTIALS_CONTEXT_V1_URL,o(5907));const f={"https://www.w3.org/2018/credentials/examples/v1":{"@context":[{"@version":1.1},"https://www.w3.org/ns/odrl.jsonld",{ex:"https://example.org/examples#",schema:"http://schema.org/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#","3rdPartyCorrelation":"ex:3rdPartyCorrelation",AllVerifiers:"ex:AllVerifiers",AlumniCredential:"ex:AlumniCredential",Archival:"ex:Archival",BachelorDegree:"ex:BachelorDegree",Child:"ex:Child",CLCredentialDefinition2019:"ex:CLCredentialDefinition2019",CLSignature2019:"ex:CLSignature2019",DisputeCredential:"ex:DisputeCredential",IssuerPolicy:"ex:IssuerPolicy",HolderPolicy:"ex:HolderPolicy",Mother:"ex:Mother",PrescriptionCredential:"ex:PrescriptionCredential",RelationshipCredential:"ex:RelationshipCredential",UniversityDegreeCredential:"ex:UniversityDegreeCredential",ZkpExampleSchema2018:"ex:ZkpExampleSchema2018",alumniOf:{"@id":"schema:alumniOf","@type":"rdf:HTML"},attributes:"ex:attributes",child:{"@id":"ex:child","@type":"@id"},college:"ex:college",currentStatus:"ex:currentStatus",degree:"ex:degree",degreeSchool:"ex:degreeSchool",degreeType:"ex:degreeType",familyName:"schema:familyName",givenName:"schema:givenName",issuerData:"ex:issuerData",name:{"@id":"schema:name","@type":"rdf:HTML"},nonRevocationProof:"ex:nonRevocationProof",parent:{"@id":"ex:parent","@type":"@id"},prescription:"ex:prescription",primaryProof:"ex:primaryProof",referenceId:"ex:referenceId",documentPresence:"ex:documentPresence",evidenceDocument:"ex:evidenceDocument",signature:"ex:signature",signatureCorrectnessProof:"ex:signatureCorrectnessProof",spouse:"schema:spouse",statusReason:"ex:statusReason",subjectPresence:"ex:subjectPresence",verifier:{"@id":"ex:verifier","@type":"@id"}}]},"https://www.w3.org/ns/odrl.jsonld":{"@context":{odrl:"http://www.w3.org/ns/odrl/2/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",skos:"http://www.w3.org/2004/02/skos/core#",dct:"http://purl.org/dc/terms/",xsd:"http://www.w3.org/2001/XMLSchema#",vcard:"http://www.w3.org/2006/vcard/ns#",foaf:"http://xmlns.com/foaf/0.1/",schema:"http://schema.org/",cc:"http://creativecommons.org/ns#",uid:"@id",type:"@type",Policy:"odrl:Policy",Rule:"odrl:Rule",profile:{"@type":"@id","@id":"odrl:profile"},inheritFrom:{"@type":"@id","@id":"odrl:inheritFrom"},ConflictTerm:"odrl:ConflictTerm",conflict:{"@type":"@vocab","@id":"odrl:conflict"},perm:"odrl:perm",prohibit:"odrl:prohibit",invalid:"odrl:invalid",Agreement:"odrl:Agreement",Assertion:"odrl:Assertion",Offer:"odrl:Offer",Privacy:"odrl:Privacy",Request:"odrl:Request",Set:"odrl:Set",Ticket:"odrl:Ticket",Asset:"odrl:Asset",AssetCollection:"odrl:AssetCollection",relation:{"@type":"@id","@id":"odrl:relation"},hasPolicy:{"@type":"@id","@id":"odrl:hasPolicy"},target:{"@type":"@id","@id":"odrl:target"},output:{"@type":"@id","@id":"odrl:output"},partOf:{"@type":"@id","@id":"odrl:partOf"},source:{"@type":"@id","@id":"odrl:source"},Party:"odrl:Party",PartyCollection:"odrl:PartyCollection",function:{"@type":"@vocab","@id":"odrl:function"},PartyScope:"odrl:PartyScope",assignee:{"@type":"@id","@id":"odrl:assignee"},assigner:{"@type":"@id","@id":"odrl:assigner"},assigneeOf:{"@type":"@id","@id":"odrl:assigneeOf"},assignerOf:{"@type":"@id","@id":"odrl:assignerOf"},attributedParty:{"@type":"@id","@id":"odrl:attributedParty"},attributingParty:{"@type":"@id","@id":"odrl:attributingParty"},compensatedParty:{"@type":"@id","@id":"odrl:compensatedParty"},compensatingParty:{"@type":"@id","@id":"odrl:compensatingParty"},consentingParty:{"@type":"@id","@id":"odrl:consentingParty"},consentedParty:{"@type":"@id","@id":"odrl:consentedParty"},informedParty:{"@type":"@id","@id":"odrl:informedParty"},informingParty:{"@type":"@id","@id":"odrl:informingParty"},trackingParty:{"@type":"@id","@id":"odrl:trackingParty"},trackedParty:{"@type":"@id","@id":"odrl:trackedParty"},contractingParty:{"@type":"@id","@id":"odrl:contractingParty"},contractedParty:{"@type":"@id","@id":"odrl:contractedParty"},Action:"odrl:Action",action:{"@type":"@vocab","@id":"odrl:action"},includedIn:{"@type":"@id","@id":"odrl:includedIn"},implies:{"@type":"@id","@id":"odrl:implies"},Permission:"odrl:Permission",permission:{"@type":"@id","@id":"odrl:permission"},Prohibition:"odrl:Prohibition",prohibition:{"@type":"@id","@id":"odrl:prohibition"},obligation:{"@type":"@id","@id":"odrl:obligation"},use:"odrl:use",grantUse:"odrl:grantUse",aggregate:"odrl:aggregate",annotate:"odrl:annotate",anonymize:"odrl:anonymize",archive:"odrl:archive",concurrentUse:"odrl:concurrentUse",derive:"odrl:derive",digitize:"odrl:digitize",display:"odrl:display",distribute:"odrl:distribute",execute:"odrl:execute",extract:"odrl:extract",give:"odrl:give",index:"odrl:index",install:"odrl:install",modify:"odrl:modify",move:"odrl:move",play:"odrl:play",present:"odrl:present",print:"odrl:print",read:"odrl:read",reproduce:"odrl:reproduce",sell:"odrl:sell",stream:"odrl:stream",textToSpeech:"odrl:textToSpeech",transfer:"odrl:transfer",transform:"odrl:transform",translate:"odrl:translate",Duty:"odrl:Duty",duty:{"@type":"@id","@id":"odrl:duty"},consequence:{"@type":"@id","@id":"odrl:consequence"},remedy:{"@type":"@id","@id":"odrl:remedy"},acceptTracking:"odrl:acceptTracking",attribute:"odrl:attribute",compensate:"odrl:compensate",delete:"odrl:delete",ensureExclusivity:"odrl:ensureExclusivity",include:"odrl:include",inform:"odrl:inform",nextPolicy:"odrl:nextPolicy",obtainConsent:"odrl:obtainConsent",reviewPolicy:"odrl:reviewPolicy",uninstall:"odrl:uninstall",watermark:"odrl:watermark",Constraint:"odrl:Constraint",LogicalConstraint:"odrl:LogicalConstraint",constraint:{"@type":"@id","@id":"odrl:constraint"},refinement:{"@type":"@id","@id":"odrl:refinement"},Operator:"odrl:Operator",operator:{"@type":"@vocab","@id":"odrl:operator"},RightOperand:"odrl:RightOperand",rightOperand:"odrl:rightOperand",rightOperandReference:{"@type":"xsd:anyURI","@id":"odrl:rightOperandReference"},LeftOperand:"odrl:LeftOperand",leftOperand:{"@type":"@vocab","@id":"odrl:leftOperand"},unit:"odrl:unit",dataType:{"@type":"xsd:anyType","@id":"odrl:datatype"},status:"odrl:status",absolutePosition:"odrl:absolutePosition",absoluteSpatialPosition:"odrl:absoluteSpatialPosition",absoluteTemporalPosition:"odrl:absoluteTemporalPosition",absoluteSize:"odrl:absoluteSize",count:"odrl:count",dateTime:"odrl:dateTime",delayPeriod:"odrl:delayPeriod",deliveryChannel:"odrl:deliveryChannel",elapsedTime:"odrl:elapsedTime",event:"odrl:event",fileFormat:"odrl:fileFormat",industry:"odrl:industry:",language:"odrl:language",media:"odrl:media",meteredTime:"odrl:meteredTime",payAmount:"odrl:payAmount",percentage:"odrl:percentage",product:"odrl:product",purpose:"odrl:purpose",recipient:"odrl:recipient",relativePosition:"odrl:relativePosition",relativeSpatialPosition:"odrl:relativeSpatialPosition",relativeTemporalPosition:"odrl:relativeTemporalPosition",relativeSize:"odrl:relativeSize",resolution:"odrl:resolution",spatial:"odrl:spatial",spatialCoordinates:"odrl:spatialCoordinates",systemDevice:"odrl:systemDevice",timeInterval:"odrl:timeInterval",unitOfCount:"odrl:unitOfCount",version:"odrl:version",virtualLocation:"odrl:virtualLocation",eq:"odrl:eq",gt:"odrl:gt",gteq:"odrl:gteq",lt:"odrl:lt",lteq:"odrl:lteq",neq:"odrl:neg",isA:"odrl:isA",hasPart:"odrl:hasPart",isPartOf:"odrl:isPartOf",isAllOf:"odrl:isAllOf",isAnyOf:"odrl:isAnyOf",isNoneOf:"odrl:isNoneOf",or:"odrl:or",xone:"odrl:xone",and:"odrl:and",andSequence:"odrl:andSequence",policyUsage:"odrl:policyUsage"}}};for(const[e,t]of d.entries())f[e]=t;for(const[e,t]of p.contexts.entries())f[e]=t;const h=r.extendContextLoader((async function(e){const t=f[e];if(void 0!==t)return{contextUrl:null,documentUrl:e,document:t};throw new Error(`Document loader unable to load URL "${e}".`)})),{AuthenticationProofPurpose:y}=r.purposes,{constants:{CREDENTIALS_CONTEXT_V1_URL:g}}=e,m=p.CONTEXT_URL,v=new RegExp("^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\\.[0-9]+)?(Z|(\\+|-)([01][0-9]|2[0-3]):([0-5][0-9]))$","i");function w(e){return"string"==typeof e?e:"id"in e?e.id:void 0}function x({id:e,propertyName:t}){let r;try{r=new URL(e)}catch(r){const n=new TypeError(`"${t}" must be a URI: "${e}".`);throw n.cause=r,n}if(!r.protocol)throw new TypeError(`"${t}" must be a URI: "${e}".`)}var b=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2020:{"@id":"https://w3id.org/security#Ed25519VerificationKey2020","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyMultibase:{"@id":"https://w3id.org/security#publicKeyMultibase","@type":"https://w3id.org/security#multibase"}}},Ed25519Signature2020:{"@id":"https://w3id.org/security#Ed25519Signature2020","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},proofValue:{"@id":"https://w3id.org/security#proofValue","@type":"https://w3id.org/security#multibase"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){e.exports={CONTEXT_FILENAME:"ed25519-signature-2020-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2020/v1",CBORLD_CODEC_VALUE:20}},function(e,t,r){const n=r(0),o=r(1),{documentLoader:i}=r(3),{CONTEXT_URL:a,CBORLD_CODEC_VALUE:s}=o,c=new Map;c.set(o.CONTEXT_URL,n);const l=new Map;l.set(a,s),e.exports={constants:o,contexts:c,appContextMap:l,documentLoader:i,CONTEXT_URL:a,CONTEXT:n}},function(e,t,r){const{CONTEXT_URL:n}=r(1),o=r(0);e.exports={documentLoader(e){if(e!==n)throw new Error(`Loading document "${e}" is not allowed.`);return{contextUrl:null,document:o,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),E=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(b);b.contexts,b.constants,b.CONTEXT,b.CONTEXT_URL,b.appContextMap,b.documentLoader;const S=E;var T=o(3118);const O=new TextEncoder,C=new TextDecoder;const I=e=>(e=>{let t=e;"string"==typeof t&&(t=O.encode(t));const r=[];for(let e=0;e<t.length;e+=32768)r.push(String.fromCharCode.apply(null,t.subarray(e,e+32768)));return btoa(r.join(""))})(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");class j extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var t;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null===(t=Error.captureStackTrace)||void 0===t||t.call(Error,this,this.constructor)}}class A extends j{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class N extends j{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class L extends j{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}Symbol.asyncIterator;const P=crypto,R=e=>e instanceof CryptoKey;P.getRandomValues.bind(P);Symbol();const D=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i,_=e=>{const t=D.exec(e);if(!t)throw new TypeError("Invalid time period format");const r=parseFloat(t[1]);switch(t[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*r);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*r);case"day":case"days":case"d":return Math.round(86400*r);case"week":case"weeks":case"w":return Math.round(604800*r);default:return Math.round(31557600*r)}};function k(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function M(e,t){return e.name===t}function U(e){return parseInt(e.name.slice(4),10)}function V(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!M(e.algorithm,"HMAC"))throw k("HMAC");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw k(`SHA-${r}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!M(e.algorithm,"RSASSA-PKCS1-v1_5"))throw k("RSASSA-PKCS1-v1_5");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw k(`SHA-${r}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!M(e.algorithm,"RSA-PSS"))throw k("RSA-PSS");const r=parseInt(t.slice(2),10);if(U(e.algorithm.hash)!==r)throw k(`SHA-${r}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==e.algorithm.name&&"Ed448"!==e.algorithm.name)throw k("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!M(e.algorithm,"ECDSA"))throw k("ECDSA");const r=function(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}(t);if(e.algorithm.namedCurve!==r)throw k(r,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}!function(e,t){if(t.length&&!t.some((t=>e.usages.includes(t)))){let e="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const r=t.pop();e+=`one of ${t.join(", ")}, or ${r}.`}else 2===t.length?e+=`one of ${t[0]} or ${t[1]}.`:e+=`${t[0]}.`;throw new TypeError(e)}}(e,r)}function B(e,t,...r){if(r.length>2){const t=r.pop();e+=`one of type ${r.join(", ")}, or ${t}.`}else 2===r.length?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return null==t?e+=` Received ${t}`:"function"==typeof t&&t.name?e+=` Received function ${t.name}`:"object"==typeof t&&null!=t&&t.constructor&&t.constructor.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const K=(e,...t)=>B("Key must be ",e,...t);function H(e,t,...r){return B(`Key for the ${e} algorithm must be `,t,...r)}const J=e=>R(e),q=["CryptoKey"];class F{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,t){if(!this._protectedHeader&&!this._unprotectedHeader)throw new N("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!((...e)=>{const t=e.filter(Boolean);if(0===t.length||1===t.length)return!0;let r;for(const e of t){const t=Object.keys(e);if(r&&0!==r.size)for(const e of t){if(r.has(e))return!1;r.add(e)}else r=new Set(t)}return!0})(this._protectedHeader,this._unprotectedHeader))throw new N("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const r={...this._protectedHeader,...this._unprotectedHeader};let n=!0;if(function(e,t,r,n,o){if(void 0!==o.crit&&void 0===n.crit)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||void 0===n.crit)return new Set;if(!Array.isArray(n.crit)||0===n.crit.length||n.crit.some((e=>"string"!=typeof e||0===e.length)))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;i=void 0!==r?new Map([...Object.entries(r),...t.entries()]):t;for(const t of n.crit){if(!i.has(t))throw new A(`Extension Header Parameter "${t}" is not recognized`);if(void 0===o[t])throw new e(`Extension Header Parameter "${t}" is missing`);if(i.get(t)&&void 0===n[t])throw new e(`Extension Header Parameter "${t}" MUST be integrity protected`)}return new Set(n.crit)}(N,new Map([["b64",!0]]),null==t?void 0:t.crit,this._protectedHeader,r).has("b64")&&(n=this._protectedHeader.b64,"boolean"!=typeof n))throw new N('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:o}=r;if("string"!=typeof o||!o)throw new N('JWS "alg" (Algorithm) Header Parameter missing or invalid');((e,t,r)=>{e.startsWith("HS")||"dir"===e||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?((e,t)=>{if(!(t instanceof Uint8Array)){if(!J(t))throw new TypeError(H(e,t,...q,"Uint8Array"));if("secret"!==t.type)throw new TypeError(`${q.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(e,t):((e,t,r)=>{if(!J(t))throw new TypeError(H(e,t,...q));if("secret"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===r&&"public"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===r&&"public"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&"verify"===r&&"private"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&"encrypt"===r&&"private"===t.type)throw new TypeError(`${q.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(e,t,r)})(o,e,"sign");let i,a=this._payload;n&&(a=O.encode(I(a))),i=this._protectedHeader?O.encode(I(JSON.stringify(this._protectedHeader))):O.encode("");const s=function(...e){const t=e.reduce(((e,{length:t})=>e+t),0),r=new Uint8Array(t);let n=0;return e.forEach((e=>{r.set(e,n),n+=e.length})),r}(i,O.encode("."),a),c=await(async(e,t,r)=>{const n=await function(e,t,r){if(R(t))return V(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(K(t,...q));return P.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(K(t,...q,"Uint8Array"))}(e,t,"sign");((e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if("number"!=typeof r||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}})(e,n);const o=await P.subtle.sign(function(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new A(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}(e,n.algorithm),n,r);return new Uint8Array(o)})(o,e,s),l={signature:I(c),payload:""};return n&&(l.payload=C.decode(a)),this._unprotectedHeader&&(l.header=this._unprotectedHeader),this._protectedHeader&&(l.protected=C.decode(i)),l}}class X{constructor(e){this._flattened=new F(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,t){const r=await this._flattened.sign(e,t);if(void 0===r.payload)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${r.protected}.${r.payload}.${r.signature}`}}const $=e=>Math.floor(e.getTime()/1e3);class z{constructor(e){if(!function(e){if("object"!=typeof(t=e)||null===t||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t;if(null===Object.getPrototypeOf(e))return!0;let r=e;for(;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(e)===r}(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return this._payload="number"==typeof e?{...this._payload,nbf:e}:{...this._payload,nbf:$(new Date)+_(e)},this}setExpirationTime(e){return this._payload="number"==typeof e?{...this._payload,exp:e}:{...this._payload,exp:$(new Date)+_(e)},this}setIssuedAt(e){return this._payload=void 0===e?{...this._payload,iat:$(new Date)}:{...this._payload,iat:e},this}}class W extends z{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,t){var r;const n=new X(O.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray(null===(r=this._protectedHeader)||void 0===r?void 0:r.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new L("JWTs MUST NOT use unencoded payload");return n.sign(e,t)}}function G(e){var t;const r=null!==(t=null==e?void 0:e.modulusLength)&&void 0!==t?t:2048;if("number"!=typeof r||r<2048)throw new A("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return r}var Q=o(8970);const Z=JSON.parse('{"@context":{"@vocab":"https://www.w3.org/ns/credentials/examples#"}}'),Y={},ee="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function te(e,t){return function(e,t,r){if(!(e instanceof Uint8Array))throw new TypeError('"input" must be a Uint8Array.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');if(0===e.length)return"";let n="",o=0;const i=t.length,a=t.charAt(0),s=[0];for(o=0;o<e.length;++o){let t=e[o];for(let e=0;e<s.length;++e)t+=s[e]<<8,s[e]=t%i,t=t/i|0;for(;t>0;)s.push(t%i),t=t/i|0}for(o=0;0===e[o]&&o<e.length-1;++o)n+=a;for(o=s.length-1;o>=0;--o)n+=t[s[o]];if(r){const e=new RegExp(".{1,"+r+"}","g");n=n.match(e).join("\r\n")}return n}(e,ee,t)}function re(e){return function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(0===e.length)return new Uint8Array;let r=Y[t];if(!r){r=Y[t]=[];for(let e=0;e<t.length;++e)r[t.charCodeAt(e)]=e}e=e.replace(/\s/g,"");const n=t.length,o=t.charAt(0),i=[0];for(let t=0;t<e.length;t++){const o=r[e.charCodeAt(t)];if(void 0===o)return;let a=o;for(let e=0;e<i.length;++e)a+=i[e]*n,i[e]=255&a,a>>=8;for(;a>0;)i.push(255&a),a>>=8}for(let t=0;e[t]===o&&t<e.length-1;++t)i.push(0);return new Uint8Array(i.reverse())}(e,ee)}const ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",oe=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function ie(e){if(!(e instanceof Uint8Array||"string"==typeof e))throw new TypeError('"input" be a string or Uint8Array.');"string"==typeof e&&(e=(new TextEncoder).encode(e));let t,r,n,o="",i=0;for(;i<e.byteLength;)t=e[i++],r=e[i++],n=e[i++],o+=ne.charAt(t>>2),o+=ne.charAt((3&t)<<4|r>>4),isNaN(r)||(o+=ne.charAt((15&r)<<2|n>>6),isNaN(n)||(o+=ne.charAt(63&n)));return o}function ae({bytes:e,expectedLength:t=32,code:r}){if(!(e instanceof Uint8Array))throw new TypeError('"bytes" must be a Uint8Array.');if(e.length!==t){const e=new Error(`"bytes" must be a ${t}-byte Uint8Array.`);throw e.name="DataError",r&&(e.code=r),e}}var se=o(7420),ce=o.t(se,2);const le=BigInt(0),de=BigInt(1),ue=BigInt(2),pe=BigInt(8),fe=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),he=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:fe,n:fe,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),ye=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),ge=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),me=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),ve=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),we=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),xe=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class be{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof je))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(je.ZERO)?be.ZERO:new be(e.x,e.y,de,Be(e.x*e.y))}static toAffineBatch(e){const t=function(e,t=he.P){const r=new Array(e.length),n=Ke(e.reduce(((e,n,o)=>n===le?e:(r[o]=e,Be(e*n,t))),de),t);return e.reduceRight(((e,n,o)=>n===le?e:(r[o]=Be(e*r[o],t),Be(e*n,t))),n),r}(e.map((e=>e.z)));return e.map(((e,r)=>e.toAffine(t[r])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){Se(e);const{x:t,y:r,z:n}=this,{x:o,y:i,z:a}=e,s=Be(t*a),c=Be(o*n),l=Be(r*a),d=Be(i*n);return s===c&&l===d}negate(){return new be(Be(-this.x),this.y,this.z,Be(-this.t))}double(){const{x:e,y:t,z:r}=this,{a:n}=he,o=Be(e*e),i=Be(t*t),a=Be(ue*Be(r*r)),s=Be(n*o),c=e+t,l=Be(Be(c*c)-o-i),d=s+i,u=d-a,p=s-i,f=Be(l*u),h=Be(d*p),y=Be(l*p),g=Be(u*d);return new be(f,h,g,y)}add(e){Se(e);const{x:t,y:r,z:n,t:o}=this,{x:i,y:a,z:s,t:c}=e,l=Be((r-t)*(a+i)),d=Be((r+t)*(a-i)),u=Be(d-l);if(u===le)return this.double();const p=Be(n*ue*c),f=Be(o*ue*s),h=f+p,y=d+l,g=f-p,m=Be(h*u),v=Be(y*g),w=Be(h*g),x=Be(u*y);return new be(m,v,x,w)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const t=1+256/e,r=[];let n=this,o=n;for(let i=0;i<t;i++){o=n,r.push(o);for(let t=1;t<2**(e-1);t++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(e,t){!t&&this.equals(be.BASE)&&(t=je.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&Ie.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=be.normalizeZ(n),Ie.set(t,n)));let o=be.ZERO,i=be.BASE;const a=1+256/r,s=2**(r-1),c=BigInt(2**r-1),l=2**r,d=BigInt(r);for(let t=0;t<a;t++){const r=t*s;let a=Number(e&c);e>>=d,a>s&&(a-=l,e+=de);const u=r,p=r+Math.abs(a)-1,f=t%2!=0,h=a<0;0===a?i=i.add(Ee(f,n[u])):o=o.add(Ee(h,n[p]))}return be.normalizeZ([o,i])[0]}multiply(e,t){return this.wNAF($e(e,he.l),t)}multiplyUnsafe(e){let t=$e(e,he.l,!1);const r=be.BASE,n=be.ZERO;if(t===le)return n;if(this.equals(n)||t===de)return this;if(this.equals(r))return this.wNAF(t);let o=n,i=this;for(;t>le;)t&de&&(o=o.add(i)),i=i.double(),t>>=de;return o}isSmallOrder(){return this.multiplyUnsafe(he.h).equals(be.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(he.l/ue).double();return he.l%ue&&(e=e.add(this)),e.equals(be.ZERO)}toAffine(e){const{x:t,y:r,z:n}=this,o=this.equals(be.ZERO);null==e&&(e=o?pe:Ke(n));const i=Be(t*e),a=Be(r*e),s=Be(n*e);if(o)return je.ZERO;if(s!==de)throw new Error("invZ was invalid");return new je(i,a)}fromRistrettoBytes(){Oe()}toRistrettoBytes(){Oe()}fromRistrettoHash(){Oe()}}function Ee(e,t){const r=t.negate();return e?r:t}function Se(e){if(!(e instanceof be))throw new TypeError("ExtendedPoint expected")}function Te(e){if(!(e instanceof Ce))throw new TypeError("RistrettoPoint expected")}function Oe(){throw new Error("Legacy method: switch to RistrettoPoint")}be.BASE=new be(he.Gx,he.Gy,de,Be(he.Gx*he.Gy)),be.ZERO=new be(le,de,de,le);class Ce{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:t}=he,r=Be(ge*e*e),n=Be((r+de)*we);let o=BigInt(-1);const i=Be((o-t*r)*Be(r+t));let{isValid:a,value:s}=Je(n,i),c=Be(s*e);ke(c)||(c=Be(-c)),a||(s=c),a||(o=r);const l=Be(o*(r-de)*xe-i),d=s*s,u=Be((s+s)*i),p=Be(l*me),f=Be(de-d),h=Be(de+d);return new be(Be(u*h),Be(f*p),Be(p*h),Be(u*f))}static hashToCurve(e){const t=Ve((e=Xe(e,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(t),n=Ve(e.slice(32,64)),o=this.calcElligatorRistrettoMap(n);return new Ce(r.add(o))}static fromHex(e){e=Xe(e,32);const{a:t,d:r}=he,n="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Ve(e);if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(_e(o),e)||ke(o))throw new Error(n);const i=Be(o*o),a=Be(de+t*i),s=Be(de-t*i),c=Be(a*a),l=Be(s*s),d=Be(t*r*c-l),{isValid:u,value:p}=qe(Be(d*l)),f=Be(p*s),h=Be(p*f*d);let y=Be((o+o)*f);ke(y)&&(y=Be(-y));const g=Be(a*h),m=Be(y*g);if(!u||ke(m)||g===le)throw new Error(n);return new Ce(new be(y,g,de,m))}toRawBytes(){let{x:e,y:t,z:r,t:n}=this.ep;const o=Be(Be(r+t)*Be(r-t)),i=Be(e*t),a=Be(i*i),{value:s}=qe(Be(o*a)),c=Be(s*o),l=Be(s*i),d=Be(c*l*n);let u;if(ke(n*d)){let r=Be(t*ge),n=Be(e*ge);e=r,t=n,u=Be(c*ve)}else u=l;ke(e*d)&&(t=Be(-t));let p=Be((r-t)*u);return ke(p)&&(p=Be(-p)),_e(p)}toHex(){return Pe(this.toRawBytes())}toString(){return this.toHex()}equals(e){Te(e);const t=this.ep,r=e.ep,n=Be(t.x*r.y)===Be(t.y*r.x),o=Be(t.y*r.y)===Be(t.x*r.x);return n||o}add(e){return Te(e),new Ce(this.ep.add(e.ep))}subtract(e){return Te(e),new Ce(this.ep.subtract(e.ep))}multiply(e){return new Ce(this.ep.multiply(e))}multiplyUnsafe(e){return new Ce(this.ep.multiplyUnsafe(e))}}Ce.BASE=new Ce(be.BASE),Ce.ZERO=new Ce(be.ZERO);const Ie=new WeakMap;class je{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,Ie.delete(this)}static fromHex(e,t=!0){const{d:r,P:n}=he,o=(e=Xe(e,32)).slice();o[31]=-129&e[31];const i=Me(o);if(t&&i>=n)throw new Error("Expected 0 < hex < P");if(!t&&i>=ye)throw new Error("Expected 0 < hex < 2**256");const a=Be(i*i),s=Be(a-de),c=Be(r*a+de);let{isValid:l,value:d}=Je(s,c);if(!l)throw new Error("Point.fromHex: invalid y coordinate");const u=(d&de)===de;return 0!=(128&e[31])!==u&&(d=Be(-d)),new je(d,i)}static async fromPrivateKey(e){return(await We(e)).point}toRawBytes(){const e=_e(this.y);return e[31]|=this.x&de?128:0,e}toHex(){return Pe(this.toRawBytes())}toX25519(){const{y:e}=this;return _e(Be((de+e)*Ke(de-e)))}isTorsionFree(){return be.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new je(Be(-this.x),this.y)}add(e){return be.fromAffine(this).add(be.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return be.fromAffine(this).multiply(e,this).toAffine()}}je.BASE=new je(he.Gx,he.Gy),je.ZERO=new je(le,de);class Ae{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){const t=Xe(e,64),r=je.fromHex(t.slice(0,32),!1),n=Me(t.slice(32,64));return new Ae(r,n)}assertValidity(){const{r:e,s:t}=this;if(!(e instanceof je))throw new Error("Expected Point instance");return $e(t,he.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(_e(this.s),32),e}toHex(){return Pe(this.toRawBytes())}}function Ne(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Expected Uint8Array list");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const o=e[t];r.set(o,n),n+=o.length}return r}const Le=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Pe(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Le[e[r]];return t}function Re(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r,o=e.slice(n,n+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[r]=i}return t}function De(e){return Re(e.toString(16).padStart(64,"0"))}function _e(e){return De(e).reverse()}function ke(e){return(Be(e)&de)===de}function Me(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Pe(Uint8Array.from(e).reverse()))}const Ue=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ve(e){return Be(Me(e)&Ue)}function Be(e,t=he.P){const r=e%t;return r>=le?r:t+r}function Ke(e,t=he.P){if(e===le||t<=le)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=Be(e,t),n=t,o=le,i=de,a=de,s=le;for(;r!==le;){const e=n/r,t=n%r,c=o-a*e,l=i-s*e;n=r,r=t,o=a,i=s,a=c,s=l}if(n!==de)throw new Error("invert: does not exist");return Be(o,t)}function He(e,t){const{P:r}=he;let n=e;for(;t-- >le;)n*=n,n%=r;return n}function Je(e,t){const r=Be(t*t*t),n=Be(r*r*t);let o=Be(e*r*function(e){const{P:t}=he,r=BigInt(5),n=BigInt(10),o=BigInt(20),i=BigInt(40),a=BigInt(80),s=e*e%t*e%t,c=He(s,ue)*s%t,l=He(c,de)*e%t,d=He(l,r)*l%t,u=He(d,n)*d%t,p=He(u,o)*u%t,f=He(p,i)*p%t,h=He(f,a)*f%t,y=He(h,a)*f%t,g=He(y,n)*d%t;return{pow_p_5_8:He(g,ue)*e%t,b2:s}}(e*n).pow_p_5_8);const i=Be(t*o*o),a=o,s=Be(o*ge),c=i===e,l=i===Be(-e),d=i===Be(-e*ge);return c&&(o=a),(l||d)&&(o=s),ke(o)&&(o=Be(-o)),{isValid:c||l,value:o}}function qe(e){return Je(de,e)}function Fe(e){return Be(Me(e),he.l)}function Xe(e,t){const r=e instanceof Uint8Array?Uint8Array.from(e):Re(e);if("number"==typeof t&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function $e(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if("number"==typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"==typeof e&&e<t)if(r){if(le<e)return e}else if(le<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}let ze;async function We(e){return function(e){const t=((a=e.slice(0,32))[0]&=248,a[31]&=127,a[31]|=64,a),r=e.slice(32,64),n=Fe(t),o=je.BASE.multiply(n),i=o.toRawBytes();var a;return{head:t,prefix:r,scalar:n,point:o,pointBytes:i}}(await Qe.sha512(function(e){if(32!==(e="bigint"==typeof e||"number"==typeof e?De($e(e,ye)):Xe(e)).length)throw new Error("Expected 32 bytes");return e}(e)))}je.BASE._setWindowSize(8);const Ge={node:ce,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},Qe={bytesToHex:Pe,hexToBytes:Re,concatBytes:Ne,getExtendedPublicKey:We,mod:Be,invert:Ke,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if((e=Xe(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Be(Me(e),he.l-de)+de},randomBytes:(e=32)=>{if(Ge.web)return Ge.web.getRandomValues(new Uint8Array(e));if(Ge.node){const{randomBytes:t}=Ge.node;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Qe.randomBytes(32),sha512:async(...e)=>{const t=Ne(...e);if(Ge.web){const e=await Ge.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if(Ge.node)return Uint8Array.from(Ge.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=je.BASE){const r=t.equals(je.BASE)?t:new je(t.x,t.y);return r._setWindowSize(e),r.multiply(ue),r},sha512Sync:void 0};Object.defineProperties(Qe,{sha512Sync:{configurable:!1,get:()=>ze,set(e){ze||(ze=e)}}});const Ze=globalThis.crypto;if(!Ze.getRandomValues)throw new Error('Browser does not provide "crypto.getRandomValues".');const Ye={async generateKeyPair(){const e=new Uint8Array(32);Ze.getRandomValues(e);const t=await et(e);return e.fill(0),t},generateKeyPairFromSeed:et,sign:async(e,t)=>async function(e,t){e=Xe(e);const{prefix:r,scalar:n,pointBytes:o}=await We(t),i=Fe(await Qe.sha512(r,e)),a=je.BASE.multiply(i),s=Be(i+Fe(await Qe.sha512(a.toRawBytes(),o,e))*n,he.l);return new Ae(a,s).toRawBytes()}(t,e.slice(0,32)),verify:async(e,t,r)=>async function(e,t,r){const{r:n,SB:o,msg:i,pub:a}=function(e,t,r){t=Xe(t),r instanceof je||(r=je.fromHex(r,!1));const{r:n,s:o}=e instanceof Ae?e.assertValidity():Ae.fromHex(e);return{r:n,s:o,SB:be.BASE.multiplyUnsafe(o),pub:r,msg:t}}(e,t,r),s=await Qe.sha512(n.toRawBytes(),a.toRawBytes(),i);return function(e,t,r,n){const o=Fe(n),i=be.fromAffine(e).multiplyUnsafe(o);return be.fromAffine(t).add(i).subtract(r).multiplyUnsafe(he.h).equals(be.ZERO)}(a,n,o,s)}(r,t,e),sha256digest:async({data:e})=>Ze.subtle.digest("SHA-256",e)};async function et(e){ae({bytes:e,expectedLength:32});const t=await async function(e){return(await We(e)).pointBytes}(e),r=new Uint8Array(64);return r.set(e),r.set(t,e.length),{publicKey:t,secretKey:r}}class tt{constructor({id:e,controller:t,revoked:r}={}){this.id=e,this.controller=t,this.revoked=r}static async generate(){throw new Error("Abstract method, must be implemented in subclass.")}static async fromKeyDocument({document:e,checkContext:t=!0,checkRevoked:r=!0}={}){if(!e)throw new TypeError('The "document" parameter is required.');if(t&&![].concat(e["@context"]).includes(this.SUITE_CONTEXT))throw new Error('Key document does not contain required context "'+this.SUITE_CONTEXT+'".');if(r&&e.revoked)throw new Error(`Key has been revoked since: "${e.revoked}".`);return this.from(e)}static async from(){throw new Error("Abstract method from() must be implemented in subclass.")}export({publicKey:e=!1,privateKey:t=!1}={}){if(!e&&!t)throw new Error('Export requires specifying either "publicKey" or "privateKey".');const r={id:this.id,type:this.type,controller:this.controller};return this.revoked&&(r.revoked=this.revoked),r}fingerprint(){throw new Error("Abstract method, must be implemented in subclass.")}verifyFingerprint(){throw new Error("Abstract method, must be implemented in subclass.")}signer(){return{async sign({}){throw new Error("Abstract method, must be implemented in subclass.")}}}verifier(){return{async verify({}){throw new Error("Abstract method, must be implemented in subclass.")}}}}tt.SUITE_CONTEXT="INVALID LDKeyPair CONTEXT";const rt="Ed25519VerificationKey2020",nt=new Uint8Array([237,1]),ot=new Uint8Array([128,38]);class it extends tt{constructor(e={}){super(e),this.type=rt;const{publicKeyMultibase:t,privateKeyMultibase:r}=e;if(!t)throw new TypeError('The "publicKeyMultibase" property is required.');if(!t||!at(t,nt))throw new Error(`"publicKeyMultibase" has invalid header bytes: "${t}".`);if(r&&!at(r,ot))throw new Error('"privateKeyMultibase" has invalid header bytes.');this.publicKeyMultibase=t,this.privateKeyMultibase=r,this.controller&&!this.id&&(this.id=`${this.controller}#${this.fingerprint()}`),ae({bytes:this._publicKeyBuffer,code:"invalidPublicKeyLength",expectedLength:32})}static async from(e){return"Ed25519VerificationKey2018"===e.type?it.fromEd25519VerificationKey2018(e):"JsonWebKey2020"===e.type?it.fromJsonWebKey2020(e):new it(e)}static fromEd25519VerificationKey2018({keyPair:e}={}){const t=st(nt,re(e.publicKeyBase58)),r=new it({id:e.id,controller:e.controller,publicKeyMultibase:t});return e.privateKeyBase58&&(r.privateKeyMultibase=st(ot,re(e.privateKeyBase58))),r}static fromJsonWebKey2020({id:e,type:t,controller:r,publicKeyJwk:n}={}){if("JsonWebKey2020"!==t)throw new TypeError(`Invalid key type: "${t}".`);if(!n)throw new TypeError('"publicKeyJwk" property is required.');const{kty:o,crv:i}=n;if("OKP"!==o)throw new TypeError('"kty" is required to be "OKP".');if("Ed25519"!==i)throw new TypeError('"crv" is required to be "Ed25519".');const{x:a}=n,s=st(nt,function(e){let t=e.length;const r=t%4;if(1===r)throw new Error("Illegal base64 string.");let n=0;r>0&&(n=4-r,t+=n);const o=new Uint8Array(t/4*3-n);let i,a,s,c,l=0,d=0;for(;l<t;)i=oe[e.charCodeAt(l++)-45],a=oe[e.charCodeAt(l++)-45],o[d++]=i<<2|a>>4,l<e.length&&(s=oe[e.charCodeAt(l++)-45],o[d++]=(15&a)<<4|s>>2,l<e.length&&(c=oe[e.charCodeAt(l++)-45],o[d++]=(3&s)<<6|c));return o}(a));return it.from({id:e,controller:r,publicKeyMultibase:s})}static async generate({seed:e,...t}={}){let r;r=e?await Ye.generateKeyPairFromSeed(e):await Ye.generateKeyPair();const n=st(nt,r.publicKey),o=st(ot,r.secretKey);return new it({publicKeyMultibase:n,privateKeyMultibase:o,...t})}static fromFingerprint({fingerprint:e}={}){return new it({publicKeyMultibase:e})}get _publicKeyBuffer(){if(this.publicKeyMultibase)return re(this.publicKeyMultibase.substr(1)).slice(nt.length)}get _privateKeyBuffer(){if(this.privateKeyMultibase)return re(this.privateKeyMultibase.substr(1)).slice(ot.length)}fingerprint(){return this.publicKeyMultibase}export({publicKey:e=!1,privateKey:t=!1,includeContext:r=!1}={}){if(!e&&!t)throw new TypeError('Export requires specifying either "publicKey" or "privateKey".');const n={id:this.id,type:this.type};return r&&(n["@context"]=it.SUITE_CONTEXT),this.controller&&(n.controller=this.controller),e&&(n.publicKeyMultibase=this.publicKeyMultibase),t&&(n.privateKeyMultibase=this.privateKeyMultibase),this.revoked&&(n.revoked=this.revoked),n}toJwk({publicKey:e=!0,privateKey:t=!1}={}){if(!e&&!t)throw TypeError('Either a "publicKey" or a "privateKey" is required.');const r={crv:"Ed25519",kty:"OKP"};return e&&(r.x=ie(this._publicKeyBuffer)),t&&(r.d=ie(this._privateKeyBuffer)),r}async jwkThumbprint(){const e=`{"crv":"Ed25519","kty":"OKP","x":"${ie(this._publicKeyBuffer)}"}`,t=(new TextEncoder).encode(e);return ie(new Uint8Array(await Ye.sha256digest({data:t})))}async toJsonWebKey2020(){return{"@context":"https://w3id.org/security/jws/v1",id:this.controller+"#"+await this.jwkThumbprint(),type:"JsonWebKey2020",controller:this.controller,publicKeyJwk:this.toJwk({publicKey:!0})}}verifyFingerprint({fingerprint:e}={}){if("string"!=typeof e||"z"!==e[0])return{error:new Error('"fingerprint" must be a multibase encoded string.'),valid:!1};let t;try{if(t=re(e.substr(1)),!t)throw new TypeError("Invalid encoding of fingerprint.")}catch(e){return{error:e,valid:!1}}const r=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(this._publicKeyBuffer,t.slice(2)),n=t[0]===nt[0]&&t[1]===nt[1]&&r;return n?{valid:n}:{error:new Error("The fingerprint does not match the public key."),valid:!1}}signer(){const e=this._privateKeyBuffer;return{async sign({data:t}){if(!e)throw new Error("A private key is not available for signing.");return Ye.sign(e,t)},id:this.id}}verifier(){const e=this._publicKeyBuffer;return{async verify({data:t,signature:r}){if(!e)throw new Error("A public key is not available for verifying.");return Ye.verify(e,t,r)},id:this.id}}}function at(e,t){if("string"!=typeof e||"z"!==e[0])return!1;const r=re(e.slice(1));return t.every(((e,t)=>r[t]===e))}function st(e,t){const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),"z"+te(r)}it.suite=rt,it.SUITE_CONTEXT="https://w3id.org/security/suites/ed25519-2020/v1";var ct=function(e,t){return function(e,t){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){e.exports={"@context":{id:"@id",type:"@type","@protected":!0,proof:{"@id":"https://w3id.org/security#proof","@type":"@id","@container":"@graph"},Ed25519VerificationKey2018:{"@id":"https://w3id.org/security#Ed25519VerificationKey2018","@context":{"@protected":!0,id:"@id",type:"@type",controller:{"@id":"https://w3id.org/security#controller","@type":"@id"},revoked:{"@id":"https://w3id.org/security#revoked","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},publicKeyBase58:{"@id":"https://w3id.org/security#publicKeyBase58"}}},Ed25519Signature2018:{"@id":"https://w3id.org/security#Ed25519Signature2018","@context":{"@protected":!0,id:"@id",type:"@type",challenge:"https://w3id.org/security#challenge",created:{"@id":"http://purl.org/dc/terms/created","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},domain:"https://w3id.org/security#domain",expires:{"@id":"https://w3id.org/security#expiration","@type":"http://www.w3.org/2001/XMLSchema#dateTime"},nonce:"https://w3id.org/security#nonce",proofPurpose:{"@id":"https://w3id.org/security#proofPurpose","@type":"@vocab","@context":{"@protected":!0,id:"@id",type:"@type",assertionMethod:{"@id":"https://w3id.org/security#assertionMethod","@type":"@id","@container":"@set"},authentication:{"@id":"https://w3id.org/security#authenticationMethod","@type":"@id","@container":"@set"},capabilityInvocation:{"@id":"https://w3id.org/security#capabilityInvocationMethod","@type":"@id","@container":"@set"},capabilityDelegation:{"@id":"https://w3id.org/security#capabilityDelegationMethod","@type":"@id","@container":"@set"},keyAgreement:{"@id":"https://w3id.org/security#keyAgreementMethod","@type":"@id","@container":"@set"}}},jws:{"@id":"https://w3id.org/security#jws"},verificationMethod:{"@id":"https://w3id.org/security#verificationMethod","@type":"@id"}}}}}},function(e,t,r){e.exports={CONTEXT_FILENAME:"ed25519-signature-2018-v1.jsonld",CONTEXT_URL:"https://w3id.org/security/suites/ed25519-2018/v1",CBORLD_CODEC_VALUE:19}},function(e,t,r){const n=r(0),o=r(1),{documentLoader:i}=r(3),{CONTEXT_URL:a,CBORLD_CODEC_VALUE:s}=o,c=new Map;c.set(a,n);const l=new Map;l.set(a,s),e.exports={constants:o,contexts:c,appContextMap:l,documentLoader:i,CONTEXT_URL:a,CONTEXT:n}},function(e,t,r){const{CONTEXT_URL:n}=r(1),o=r(0);e.exports={documentLoader(e){if(e!==n)throw new Error(`Loading document "${e}" is not allowed.`);return{contextUrl:null,document:o,documentUrl:e}}}}]))}(t={exports:{}},t.exports),t.exports}(),lt=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(ct);ct.contexts,ct.constants,ct.CONTEXT,ct.CONTEXT_URL,ct.appContextMap,ct.documentLoader;const dt=lt,{suites:{LinkedDataSignature:ut}}=r,pt=S.constants.CONTEXT_URL,ft=dt.constants.CONTEXT_URL;class ht extends ut{constructor({key:e,signer:t,verifier:r,proof:n,date:o,useNativeCanonize:i,canonizeOptions:a}={}){super({type:"Ed25519Signature2020",LDKeyClass:it,contextUrl:pt,key:e,signer:t,verifier:r,proof:n,date:o,useNativeCanonize:i,canonizeOptions:a}),this.requiredKeyType="Ed25519VerificationKey2020"}async sign({verifyData:e,proof:t}){if(!this.signer||"function"!=typeof this.signer.sign)throw new Error("A signer API has not been specified.");const r=await this.signer.sign({data:e});return t.proofValue="z"+te(r),t}async verifySignature({verifyData:e,verificationMethod:t,proof:r}){const{proofValue:n}=r;if(!n||"string"!=typeof n)throw new TypeError('The proof does not include a valid "proofValue" property.');if("z"!==n[0])throw new Error("Only base58btc multibase encoding is supported.");const o=re(n.substr(1));let{verifier:i}=this;return i||(i=(await this.LDKeyClass.from(t)).verifier()),i.verify({data:e,signature:o})}async assertVerificationMethod({verificationMethod:e}){let t;if("Ed25519VerificationKey2020"===e.type)t=pt;else{if("Ed25519VerificationKey2018"!==e.type)throw new Error(`Unsupported key type "${e.type}".`);t=ft}if(!yt({document:e,contextUrl:t}))throw new TypeError(`The verification method (key) must contain "${t}" context.`);if(void 0!==e.revoked)throw new Error("The verification method has been revoked.")}async getVerificationMethod({proof:e,documentLoader:t}){if(this.key)return this.key.export({publicKey:!0});let{verificationMethod:r}=e;if("object"==typeof r&&(r=r.id),!r)throw new Error('No "verificationMethod" found in proof.');const{document:n}=await t(r);return r="string"==typeof n?JSON.parse(n):n,await this.assertVerificationMethod({verificationMethod:r}),"Ed25519VerificationKey2018"===r.type&&(r=(await it.fromEd25519VerificationKey2018({keyPair:r})).export({publicKey:!0,includeContext:!0})),r}async matchProof({proof:e,document:t,purpose:r,documentLoader:n}){if(!yt({document:t,contextUrl:pt}))return!1;if(!await super.matchProof({proof:e,document:t,purpose:r,documentLoader:n}))return!1;if(!this.key)return!0;const{verificationMethod:o}=e;return"object"==typeof o?o.id===this.key.id:o===this.key.id}}function yt({document:e,contextUrl:t}){const r=e["@context"];return r===t||Array.isArray(r)&&r.includes(t)}ht.CONTEXT_URL=pt,ht.CONTEXT=S.contexts.get(pt);const gt={};for(const e of[Q,S,T])for(const[t,r]of e.contexts)gt[t]=r;gt["https://www.w3.org/ns/credentials/examples/v2"]=Z;const mt=(0,r.extendContextLoader)((async function(e){const t=gt[e];return void 0!==t?{contextUrl:null,documentUrl:e,document:t}:h(e)}));function vt(e){if(e)return Date.parse(e)/1e3}async function wt({credential:e,kid:t,jwk:r}){const n={alg:"ES256",typ:"JWT"},o={vc:e};e.expirationDate&&(o.exp=vt(e.expirationDate)),e.issuer&&(o.iss=e.issuer),e.issuanceDate&&(o.nbf=vt(e.issuanceDate)),e.id&&(o.jti=e.id),e.credentialSubject.id&&(o.sub=e.credentialSubject.id);let i="---------------- JWT header ---------------\n"+JSON.stringify(n,null,2);return i+="\n\n--------------- JWT payload ---------------\n// NOTE: The example below uses a valid VC-JWT serialization\n//       that duplicates the iss, nbf, jti, and sub fields in the\n//       Verifiable Credential (vc) field.\n\n"+JSON.stringify(o,null,2),i+"\n\n--------------- JWT ---------------\n\n"+await new W(o).setProtectedHeader(n).sign(r.privateKey)}async function xt({credential:e,suite:n}){return async function({credential:e,suite:n,expansionMap:o,purpose:a=new i,documentLoader:s=h,now:c}={}){if(!n)throw new TypeError('"suite" parameter is required for issuing.');if(!n.verificationMethod)throw new TypeError('"suite.verificationMethod" property is required.');if(!e)throw new TypeError('"credential" parameter is required for issuing.');if(e["@context"][0]!==g||e.issuanceDate){if(e["@context"][0]===m&&!e.validFrom){const t=(new Date).toJSON();e.validFrom=`${t.substr(0,t.length-5)}Z`}}else{const t=(new Date).toJSON();e.issuanceDate=`${t.substr(0,t.length-5)}Z`}return function({credential:e,now:r=new Date}){if("string"==typeof r&&(r=new Date(r)),e["@context"][0]!==g&&e["@context"][0]!==m)throw new Error(`"${g}" or "${m}" needs to be first in the list of contexts.`);if(!e.type)throw new Error('"type" property is required.');if(!t.getValues(e,"type").includes("VerifiableCredential"))throw new Error('"type" must include `VerifiableCredential`.');if(!e.credentialSubject)throw new Error('"credentialSubject" property is required.');if(e.credentialSubject.id&&x({id:e.credentialSubject.id,propertyName:"credentialSubject.id"}),!e.issuer)throw new Error('"issuer" property is required.');if(e["@context"][0]===g){if(t.getValues(e,"issuanceDate").length>1)throw new Error('"issuanceDate" property can only have one value.');if(!e.issuanceDate)throw new Error('"issuanceDate" property is required.');if("issuanceDate"in e){let{issuanceDate:t}=e;if(!v.test(t))throw new Error(`"issuanceDate" must be a valid date: ${t}`);if(t=new Date(t),r<t)throw new Error(`The current date time (${r.toISOString()}) is before the "issuanceDate" (${t.toISOString()}).`)}}else if(e["@context"][0]===m){if(t.getValues(e,"validFrom").length>1)throw new Error('"validFrom" property can only have one value.');if(!e.validFrom)throw new Error('"validFrom" property is required.');if("validFrom"in e){let{validFrom:t}=e;if(!v.test(t))throw new Error(`"validFrom" must be a valid date: ${t}`);if(t=new Date(t),r<t)throw new Error(`The current date time (${r.toISOString()}) is before the "validFrom" (${t.toISOString()}).`)}}if(t.getValues(e,"issuer").length>1)throw new Error('"issuer" property can only have one value.');if("issuer"in e){const t=w(e.issuer);if(!t)throw new Error('"issuer" id is required.');x({id:t,propertyName:"issuer"})}if("credentialStatus"in e){if(!e.credentialStatus.id)throw new Error('"credentialStatus" must include an id.');if(!e.credentialStatus.type)throw new Error('"credentialStatus" must include a type.')}if(t.getValues(e,"evidence").forEach((e=>{const t=w(e);t&&x({id:t,propertyName:"evidence"})})),"expirationDate"in e){const{expirationDate:t}=e;if(!v.test(t))throw new Error(`"expirationDate" must be a valid date: ${t}`);if(r>new Date(t))throw new Error("Credential has expired.")}}({credential:e,now:c}),r.sign(e,{purpose:a,documentLoader:s,suite:n,expansionMap:o})}({credential:JSON.parse(JSON.stringify(e)),suite:n,documentLoader:mt})}window.respecVc={createVcExamples:async function(){const e=await it.generate(),t=new ht({key:e}),r=await async function(e,t){return async function(e,t){var r,n,o;let i,a;switch(e){case"PS256":case"PS384":case"PS512":i={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:G(t)},a=["sign","verify"];break;case"RS256":case"RS384":case"RS512":i={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:G(t)},a=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":i={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:G(t)},a=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":i={name:"ECDSA",namedCurve:"P-256"},a=["sign","verify"];break;case"ES384":i={name:"ECDSA",namedCurve:"P-384"},a=["sign","verify"];break;case"ES512":i={name:"ECDSA",namedCurve:"P-521"},a=["sign","verify"];break;case"EdDSA":a=["sign","verify"];const o=null!==(r=null==t?void 0:t.crv)&&void 0!==r?r:"Ed25519";switch(o){case"Ed25519":case"Ed448":i={name:o};break;default:throw new A("Invalid or unsupported crv option provided")}break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{a=["deriveKey","deriveBits"];const e=null!==(n=null==t?void 0:t.crv)&&void 0!==n?n:"P-256";switch(e){case"P-256":case"P-384":case"P-521":i={name:"ECDH",namedCurve:e};break;case"X25519":case"X448":i={name:e};break;default:throw new A("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new A('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return P.subtle.generateKey(i,null!==(o=null==t?void 0:t.extractable)&&void 0!==o&&o,a)}(e,t)}("ES256");!function(){const e=document.createElement("script");e.type="text/javascript",e.text+="\n  /**\n   * Displays a Verifiable Credential example given an element that contains\n   * PRE tags and an elementClass to match against and display.\n   */\n  function displayVcExample(element, elementClass) {\n    // find all SPAN.tab sibling elements in an example block\n    const tabs = element.parentElement.querySelectorAll('.tab');\n    // highlight the currently clicked on tab\n    for(tab of tabs) {\n      tab.classList.remove('selected');\n    }\n    element.classList.add('selected');\n\n    // find all PRE sibling elements in an example block\n    const examples = element.parentElement.querySelectorAll('pre');\n    // display the provided elementClass, hide all other PRE blocks\n    for(example of examples) {\n      if(example.classList.contains(elementClass)) {\n        example.style.display = 'block';\n      } else {\n        example.style.display = 'none';\n      }\n    }\n  }\n\n  window.displayVcExample = displayVcExample;\n  ",document.getElementsByTagName("head")[0].appendChild(e)}(),function(){const e=document.createElement("style");e.innerHTML+="\n  .example .tab {\n    background-color: rgba(0, 0, 0, 0.05);\n    border: solid gray thin;\n    border-radius: 4px 4px 0px 0px;\n    border-color: #574b0f;\n    padding: 4px;\n    cursor: default;\n    margin: 4px;\n  }\n\n  .example .tab.selected {\n    background-color: inherit;\n    border-bottom: solid #fcfaee thin;\n  }\n\n  .example .tab:hover {\n    color: #034575;\n    background-color: #e0cb52;\n  }\n\n  .example .tab-separator {\n    background: gray;\n    height: 1px;\n    border: 1px;\n  }",document.getElementsByTagName("head")[0].appendChild(e)}();const n=document.querySelectorAll(".vc");for(const o of n){const n=o.getAttribute("data-vc-vm");t.verificationMethod=n||"did:key:"+e.publicKey,o.innerHTML;let i,a,s={};try{let e=o.innerText;e=e.replace(/\/\/ .*$/gm,""),s=JSON.parse(e)}catch(e){console.error("respec-vc error: Failed to create Verifiable Credential.",e,o.innerText);continue}try{i=await xt({credential:s,suite:t})}catch(e){console.error("respec-vc error: Failed to attach proof to Verifiable Credential.",e,o.innerText);continue}try{a=await wt({credential:s,kid:t.verificationMethod,jwk:r})}catch(e){console.error("respec-vc error: Failed to convert Credential to JWT.",e,o.innerText);continue}const c="",l=document.createElement("div");l.setAttribute("style","padding: 5px;");const d=document.createElement("span");d.setAttribute("style",c),d.setAttribute("class","tab selected"),d.innerText="Verifiable Credential",d.setAttribute("onclick","window.displayVcExample(this, 'credential');"),o.classList.remove("vc"),o.classList.add("credential");const u=document.createElement("span");u.innerText="Secured with Data Integrity",u.setAttribute("style",c),u.setAttribute("class","tab"),u.setAttribute("onclick","window.displayVcExample(this, 'vc-proof');");const p=document.createElement("pre");p.classList.add("vc-proof"),p.style.display="none",p.innerText=JSON.stringify(i,null,2).match(/.{1,75}/g).join("\n");const f=document.createElement("span");f.innerText="Secured with VC-JWT",f.setAttribute("class","tab"),f.setAttribute("style",c),f.setAttribute("onclick","window.displayVcExample(this, 'vc-jwt');");const h=document.createElement("pre");h.classList.add("vc-jwt"),h.style.display="none",h.innerText=a.match(/.{1,75}/g).join("\n");const y=document.createElement("div");y.setAttribute("class","tab-separator"),o.before(l),o.before(d),o.before(u),o.before(f),o.before(y),o.after(h),o.after(p)}}}})()})();